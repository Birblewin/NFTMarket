import{an as Hp,bB as _h,aj as F,bC as zp,bD as Sh,al as nn,bE as A,au as Up}from"./main-index.js/index.js";function qp(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var ic={},Li={},qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.walletLogo=void 0;const Gp=(t,e)=>{let r;switch(t){case"standard":return r=e,`data:image/svg+xml,%3Csvg width='${e}' height='${r}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return r=e,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${r}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return r=(.1*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return r=(.25*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return r=(.1*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return r=(.25*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;default:return r=e,`data:image/svg+xml,%3Csvg width='${e}' height='${r}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `}};qs.walletLogo=Gp;var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.LINK_API_URL=void 0;Gs.LINK_API_URL="https://www.walletlink.org";var Js={};Object.defineProperty(Js,"__esModule",{value:!0});Js.ScopedLocalStorage=void 0;class Jp{constructor(e){this.scope=e}setItem(e,r){localStorage.setItem(this.scopedKey(e),r)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){const e=this.scopedKey(""),r=[];for(let n=0;n<localStorage.length;n++){const i=localStorage.key(n);typeof i=="string"&&i.startsWith(e)&&r.push(i)}r.forEach(n=>localStorage.removeItem(n))}scopedKey(e){return`${this.scope}:${e}`}}Js.ScopedLocalStorage=Jp;var Bn={},sn={};Object.defineProperty(sn,"__esModule",{value:!0});const Zp=Hp;function vu(t,e,r){try{Reflect.apply(t,e,r)}catch(n){setTimeout(()=>{throw n})}}function Qp(t){const e=t.length,r=new Array(e);for(let n=0;n<e;n+=1)r[n]=t[n];return r}let Yp=class extends Zp.EventEmitter{emit(e,...r){let n=e==="error";const i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){let o;if(r.length>0&&([o]=r),o instanceof Error)throw o;const a=new Error(`Unhandled error.${o?` (${o.message})`:""}`);throw a.context=o,a}const s=i[e];if(s===void 0)return!1;if(typeof s=="function")vu(s,this,r);else{const o=s.length,a=Qp(s);for(let u=0;u<o;u+=1)vu(a[u],this,r)}return!0}};sn.default=Yp;var sc={exports:{}};sc.exports;(function(t){(function(e,r){function n(m,c){if(!m)throw new Error(c||"Assertion failed")}function i(m,c){m.super_=c;var f=function(){};f.prototype=c.prototype,m.prototype=new f,m.prototype.constructor=m}function s(m,c,f){if(s.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((c==="le"||c==="be")&&(f=c,c=10),this._init(m||0,c||10,f||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=_h.Buffer}catch{}s.isBN=function(c){return c instanceof s?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===s.wordSize&&Array.isArray(c.words)},s.max=function(c,f){return c.cmp(f)>0?c:f},s.min=function(c,f){return c.cmp(f)<0?c:f},s.prototype._init=function(c,f,g){if(typeof c=="number")return this._initNumber(c,f,g);if(typeof c=="object")return this._initArray(c,f,g);f==="hex"&&(f=16),n(f===(f|0)&&f>=2&&f<=36),c=c.toString().replace(/\s+/g,"");var y=0;c[0]==="-"&&(y++,this.negative=1),y<c.length&&(f===16?this._parseHex(c,y,g):(this._parseBase(c,f,y),g==="le"&&this._initArray(this.toArray(),f,g)))},s.prototype._initNumber=function(c,f,g){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),f,g)},s.prototype._initArray=function(c,f,g){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var w,E,C=0;if(g==="be")for(y=c.length-1,w=0;y>=0;y-=3)E=c[y]|c[y-1]<<8|c[y-2]<<16,this.words[w]|=E<<C&67108863,this.words[w+1]=E>>>26-C&67108863,C+=24,C>=26&&(C-=26,w++);else if(g==="le")for(y=0,w=0;y<c.length;y+=3)E=c[y]|c[y+1]<<8|c[y+2]<<16,this.words[w]|=E<<C&67108863,this.words[w+1]=E>>>26-C&67108863,C+=24,C>=26&&(C-=26,w++);return this._strip()};function a(m,c){var f=m.charCodeAt(c);if(f>=48&&f<=57)return f-48;if(f>=65&&f<=70)return f-55;if(f>=97&&f<=102)return f-87;n(!1,"Invalid character in "+m)}function u(m,c,f){var g=a(m,f);return f-1>=c&&(g|=a(m,f-1)<<4),g}s.prototype._parseHex=function(c,f,g){this.length=Math.ceil((c.length-f)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var w=0,E=0,C;if(g==="be")for(y=c.length-1;y>=f;y-=2)C=u(c,f,y)<<w,this.words[E]|=C&67108863,w>=18?(w-=18,E+=1,this.words[E]|=C>>>26):w+=8;else{var b=c.length-f;for(y=b%2===0?f+1:f;y<c.length;y+=2)C=u(c,f,y)<<w,this.words[E]|=C&67108863,w>=18?(w-=18,E+=1,this.words[E]|=C>>>26):w+=8}this._strip()};function l(m,c,f,g){for(var y=0,w=0,E=Math.min(m.length,f),C=c;C<E;C++){var b=m.charCodeAt(C)-48;y*=g,b>=49?w=b-49+10:b>=17?w=b-17+10:w=b,n(b>=0&&w<g,"Invalid character"),y+=w}return y}s.prototype._parseBase=function(c,f,g){this.words=[0],this.length=1;for(var y=0,w=1;w<=67108863;w*=f)y++;y--,w=w/f|0;for(var E=c.length-g,C=E%y,b=Math.min(E,E-C)+g,h=0,_=g;_<b;_+=y)h=l(c,_,_+y,f),this.imuln(w),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(C!==0){var L=1;for(h=l(c,_,c.length,f),_=0;_<C;_++)L*=f;this.imuln(L),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},s.prototype.copy=function(c){c.words=new Array(this.length);for(var f=0;f<this.length;f++)c.words[f]=this.words[f];c.length=this.length,c.negative=this.negative,c.red=this.red};function d(m,c){m.words=c.words,m.length=c.length,m.negative=c.negative,m.red=c.red}if(s.prototype._move=function(c){d(c,this)},s.prototype.clone=function(){var c=new s(null);return this.copy(c),c},s.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=p}catch{s.prototype.inspect=p}else s.prototype.inspect=p;function p(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(c,f){c=c||10,f=f|0||1;var g;if(c===16||c==="hex"){g="";for(var y=0,w=0,E=0;E<this.length;E++){var C=this.words[E],b=((C<<y|w)&16777215).toString(16);w=C>>>24-y&16777215,y+=2,y>=26&&(y-=26,E--),w!==0||E!==this.length-1?g=v[6-b.length]+b+g:g=b+g}for(w!==0&&(g=w.toString(16)+g);g.length%f!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(c===(c|0)&&c>=2&&c<=36){var h=S[c],_=M[c];g="";var L=this.clone();for(L.negative=0;!L.isZero();){var j=L.modrn(_).toString(c);L=L.idivn(_),L.isZero()?g=j+g:g=v[h-j.length]+j+g}for(this.isZero()&&(g="0"+g);g.length%f!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(c,f){return this.toArrayLike(o,c,f)}),s.prototype.toArray=function(c,f){return this.toArrayLike(Array,c,f)};var x=function(c,f){return c.allocUnsafe?c.allocUnsafe(f):new c(f)};s.prototype.toArrayLike=function(c,f,g){this._strip();var y=this.byteLength(),w=g||Math.max(1,y);n(y<=w,"byte array longer than desired length"),n(w>0,"Requested array length <= 0");var E=x(c,w),C=f==="le"?"LE":"BE";return this["_toArrayLike"+C](E,y),E},s.prototype._toArrayLikeLE=function(c,f){for(var g=0,y=0,w=0,E=0;w<this.length;w++){var C=this.words[w]<<E|y;c[g++]=C&255,g<c.length&&(c[g++]=C>>8&255),g<c.length&&(c[g++]=C>>16&255),E===6?(g<c.length&&(c[g++]=C>>24&255),y=0,E=0):(y=C>>>24,E+=2)}if(g<c.length)for(c[g++]=y;g<c.length;)c[g++]=0},s.prototype._toArrayLikeBE=function(c,f){for(var g=c.length-1,y=0,w=0,E=0;w<this.length;w++){var C=this.words[w]<<E|y;c[g--]=C&255,g>=0&&(c[g--]=C>>8&255),g>=0&&(c[g--]=C>>16&255),E===6?(g>=0&&(c[g--]=C>>24&255),y=0,E=0):(y=C>>>24,E+=2)}if(g>=0)for(c[g--]=y;g>=0;)c[g--]=0},Math.clz32?s.prototype._countBits=function(c){return 32-Math.clz32(c)}:s.prototype._countBits=function(c){var f=c,g=0;return f>=4096&&(g+=13,f>>>=13),f>=64&&(g+=7,f>>>=7),f>=8&&(g+=4,f>>>=4),f>=2&&(g+=2,f>>>=2),g+f},s.prototype._zeroBits=function(c){if(c===0)return 26;var f=c,g=0;return f&8191||(g+=13,f>>>=13),f&127||(g+=7,f>>>=7),f&15||(g+=4,f>>>=4),f&3||(g+=2,f>>>=2),f&1||g++,g},s.prototype.bitLength=function(){var c=this.words[this.length-1],f=this._countBits(c);return(this.length-1)*26+f};function O(m){for(var c=new Array(m.bitLength()),f=0;f<c.length;f++){var g=f/26|0,y=f%26;c[f]=m.words[g]>>>y&1}return c}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,f=0;f<this.length;f++){var g=this._zeroBits(this.words[f]);if(c+=g,g!==26)break}return c},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},s.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var f=0;f<c.length;f++)this.words[f]=this.words[f]|c.words[f];return this._strip()},s.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},s.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},s.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},s.prototype.iuand=function(c){var f;this.length>c.length?f=c:f=this;for(var g=0;g<f.length;g++)this.words[g]=this.words[g]&c.words[g];return this.length=f.length,this._strip()},s.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},s.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},s.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},s.prototype.iuxor=function(c){var f,g;this.length>c.length?(f=this,g=c):(f=c,g=this);for(var y=0;y<g.length;y++)this.words[y]=f.words[y]^g.words[y];if(this!==f)for(;y<f.length;y++)this.words[y]=f.words[y];return this.length=f.length,this._strip()},s.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},s.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},s.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},s.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var f=Math.ceil(c/26)|0,g=c%26;this._expand(f),g>0&&f--;for(var y=0;y<f;y++)this.words[y]=~this.words[y]&67108863;return g>0&&(this.words[y]=~this.words[y]&67108863>>26-g),this._strip()},s.prototype.notn=function(c){return this.clone().inotn(c)},s.prototype.setn=function(c,f){n(typeof c=="number"&&c>=0);var g=c/26|0,y=c%26;return this._expand(g+1),f?this.words[g]=this.words[g]|1<<y:this.words[g]=this.words[g]&~(1<<y),this._strip()},s.prototype.iadd=function(c){var f;if(this.negative!==0&&c.negative===0)return this.negative=0,f=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,f=this.isub(c),c.negative=1,f._normSign();var g,y;this.length>c.length?(g=this,y=c):(g=c,y=this);for(var w=0,E=0;E<y.length;E++)f=(g.words[E]|0)+(y.words[E]|0)+w,this.words[E]=f&67108863,w=f>>>26;for(;w!==0&&E<g.length;E++)f=(g.words[E]|0)+w,this.words[E]=f&67108863,w=f>>>26;if(this.length=g.length,w!==0)this.words[this.length]=w,this.length++;else if(g!==this)for(;E<g.length;E++)this.words[E]=g.words[E];return this},s.prototype.add=function(c){var f;return c.negative!==0&&this.negative===0?(c.negative=0,f=this.sub(c),c.negative^=1,f):c.negative===0&&this.negative!==0?(this.negative=0,f=c.sub(this),this.negative=1,f):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},s.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var f=this.iadd(c);return c.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var g=this.cmp(c);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,w;g>0?(y=this,w=c):(y=c,w=this);for(var E=0,C=0;C<w.length;C++)f=(y.words[C]|0)-(w.words[C]|0)+E,E=f>>26,this.words[C]=f&67108863;for(;E!==0&&C<y.length;C++)f=(y.words[C]|0)+E,E=f>>26,this.words[C]=f&67108863;if(E===0&&C<y.length&&y!==this)for(;C<y.length;C++)this.words[C]=y.words[C];return this.length=Math.max(this.length,C),y!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(c){return this.clone().isub(c)};function I(m,c,f){f.negative=c.negative^m.negative;var g=m.length+c.length|0;f.length=g,g=g-1|0;var y=m.words[0]|0,w=c.words[0]|0,E=y*w,C=E&67108863,b=E/67108864|0;f.words[0]=C;for(var h=1;h<g;h++){for(var _=b>>>26,L=b&67108863,j=Math.min(h,c.length-1),H=Math.max(0,h-m.length+1);H<=j;H++){var et=h-H|0;y=m.words[et]|0,w=c.words[H]|0,E=y*w+L,_+=E/67108864|0,L=E&67108863}f.words[h]=L|0,b=_|0}return b!==0?f.words[h]=b|0:f.length--,f._strip()}var R=function(c,f,g){var y=c.words,w=f.words,E=g.words,C=0,b,h,_,L=y[0]|0,j=L&8191,H=L>>>13,et=y[1]|0,ie=et&8191,ae=et>>>13,di=y[2]|0,Le=di&8191,Pe=di>>>13,pi=y[3]|0,$e=pi&8191,De=pi>>>13,gi=y[4]|0,je=gi&8191,Fe=gi>>>13,vi=y[5]|0,Be=vi&8191,Ve=vi>>>13,yi=y[6]|0,We=yi&8191,He=yi>>>13,mi=y[7]|0,ze=mi&8191,Ue=mi>>>13,hn=y[8]|0,ue=hn&8191,le=hn>>>13,fn=y[9]|0,he=fn&8191,fe=fn>>>13,dn=w[0]|0,de=dn&8191,pe=dn>>>13,pn=w[1]|0,ge=pn&8191,ve=pn>>>13,gn=w[2]|0,ye=gn&8191,me=gn>>>13,vn=w[3]|0,be=vn&8191,we=vn>>>13,yn=w[4]|0,_e=yn&8191,Se=yn>>>13,mn=w[5]|0,Ee=mn&8191,Me=mn>>>13,bn=w[6]|0,Ce=bn&8191,xe=bn>>>13,wn=w[7]|0,Ie=wn&8191,Re=wn>>>13,_n=w[8]|0,Ae=_n&8191,ke=_n>>>13,Sn=w[9]|0,Oe=Sn&8191,Te=Sn>>>13;g.negative=c.negative^f.negative,g.length=19,b=Math.imul(j,de),h=Math.imul(j,pe),h=h+Math.imul(H,de)|0,_=Math.imul(H,pe);var Cr=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,b=Math.imul(ie,de),h=Math.imul(ie,pe),h=h+Math.imul(ae,de)|0,_=Math.imul(ae,pe),b=b+Math.imul(j,ge)|0,h=h+Math.imul(j,ve)|0,h=h+Math.imul(H,ge)|0,_=_+Math.imul(H,ve)|0;var xr=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(xr>>>26)|0,xr&=67108863,b=Math.imul(Le,de),h=Math.imul(Le,pe),h=h+Math.imul(Pe,de)|0,_=Math.imul(Pe,pe),b=b+Math.imul(ie,ge)|0,h=h+Math.imul(ie,ve)|0,h=h+Math.imul(ae,ge)|0,_=_+Math.imul(ae,ve)|0,b=b+Math.imul(j,ye)|0,h=h+Math.imul(j,me)|0,h=h+Math.imul(H,ye)|0,_=_+Math.imul(H,me)|0;var Ir=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,b=Math.imul($e,de),h=Math.imul($e,pe),h=h+Math.imul(De,de)|0,_=Math.imul(De,pe),b=b+Math.imul(Le,ge)|0,h=h+Math.imul(Le,ve)|0,h=h+Math.imul(Pe,ge)|0,_=_+Math.imul(Pe,ve)|0,b=b+Math.imul(ie,ye)|0,h=h+Math.imul(ie,me)|0,h=h+Math.imul(ae,ye)|0,_=_+Math.imul(ae,me)|0,b=b+Math.imul(j,be)|0,h=h+Math.imul(j,we)|0,h=h+Math.imul(H,be)|0,_=_+Math.imul(H,we)|0;var Rr=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,b=Math.imul(je,de),h=Math.imul(je,pe),h=h+Math.imul(Fe,de)|0,_=Math.imul(Fe,pe),b=b+Math.imul($e,ge)|0,h=h+Math.imul($e,ve)|0,h=h+Math.imul(De,ge)|0,_=_+Math.imul(De,ve)|0,b=b+Math.imul(Le,ye)|0,h=h+Math.imul(Le,me)|0,h=h+Math.imul(Pe,ye)|0,_=_+Math.imul(Pe,me)|0,b=b+Math.imul(ie,be)|0,h=h+Math.imul(ie,we)|0,h=h+Math.imul(ae,be)|0,_=_+Math.imul(ae,we)|0,b=b+Math.imul(j,_e)|0,h=h+Math.imul(j,Se)|0,h=h+Math.imul(H,_e)|0,_=_+Math.imul(H,Se)|0;var Ar=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,b=Math.imul(Be,de),h=Math.imul(Be,pe),h=h+Math.imul(Ve,de)|0,_=Math.imul(Ve,pe),b=b+Math.imul(je,ge)|0,h=h+Math.imul(je,ve)|0,h=h+Math.imul(Fe,ge)|0,_=_+Math.imul(Fe,ve)|0,b=b+Math.imul($e,ye)|0,h=h+Math.imul($e,me)|0,h=h+Math.imul(De,ye)|0,_=_+Math.imul(De,me)|0,b=b+Math.imul(Le,be)|0,h=h+Math.imul(Le,we)|0,h=h+Math.imul(Pe,be)|0,_=_+Math.imul(Pe,we)|0,b=b+Math.imul(ie,_e)|0,h=h+Math.imul(ie,Se)|0,h=h+Math.imul(ae,_e)|0,_=_+Math.imul(ae,Se)|0,b=b+Math.imul(j,Ee)|0,h=h+Math.imul(j,Me)|0,h=h+Math.imul(H,Ee)|0,_=_+Math.imul(H,Me)|0;var kr=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(kr>>>26)|0,kr&=67108863,b=Math.imul(We,de),h=Math.imul(We,pe),h=h+Math.imul(He,de)|0,_=Math.imul(He,pe),b=b+Math.imul(Be,ge)|0,h=h+Math.imul(Be,ve)|0,h=h+Math.imul(Ve,ge)|0,_=_+Math.imul(Ve,ve)|0,b=b+Math.imul(je,ye)|0,h=h+Math.imul(je,me)|0,h=h+Math.imul(Fe,ye)|0,_=_+Math.imul(Fe,me)|0,b=b+Math.imul($e,be)|0,h=h+Math.imul($e,we)|0,h=h+Math.imul(De,be)|0,_=_+Math.imul(De,we)|0,b=b+Math.imul(Le,_e)|0,h=h+Math.imul(Le,Se)|0,h=h+Math.imul(Pe,_e)|0,_=_+Math.imul(Pe,Se)|0,b=b+Math.imul(ie,Ee)|0,h=h+Math.imul(ie,Me)|0,h=h+Math.imul(ae,Ee)|0,_=_+Math.imul(ae,Me)|0,b=b+Math.imul(j,Ce)|0,h=h+Math.imul(j,xe)|0,h=h+Math.imul(H,Ce)|0,_=_+Math.imul(H,xe)|0;var Or=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(Or>>>26)|0,Or&=67108863,b=Math.imul(ze,de),h=Math.imul(ze,pe),h=h+Math.imul(Ue,de)|0,_=Math.imul(Ue,pe),b=b+Math.imul(We,ge)|0,h=h+Math.imul(We,ve)|0,h=h+Math.imul(He,ge)|0,_=_+Math.imul(He,ve)|0,b=b+Math.imul(Be,ye)|0,h=h+Math.imul(Be,me)|0,h=h+Math.imul(Ve,ye)|0,_=_+Math.imul(Ve,me)|0,b=b+Math.imul(je,be)|0,h=h+Math.imul(je,we)|0,h=h+Math.imul(Fe,be)|0,_=_+Math.imul(Fe,we)|0,b=b+Math.imul($e,_e)|0,h=h+Math.imul($e,Se)|0,h=h+Math.imul(De,_e)|0,_=_+Math.imul(De,Se)|0,b=b+Math.imul(Le,Ee)|0,h=h+Math.imul(Le,Me)|0,h=h+Math.imul(Pe,Ee)|0,_=_+Math.imul(Pe,Me)|0,b=b+Math.imul(ie,Ce)|0,h=h+Math.imul(ie,xe)|0,h=h+Math.imul(ae,Ce)|0,_=_+Math.imul(ae,xe)|0,b=b+Math.imul(j,Ie)|0,h=h+Math.imul(j,Re)|0,h=h+Math.imul(H,Ie)|0,_=_+Math.imul(H,Re)|0;var Tr=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,b=Math.imul(ue,de),h=Math.imul(ue,pe),h=h+Math.imul(le,de)|0,_=Math.imul(le,pe),b=b+Math.imul(ze,ge)|0,h=h+Math.imul(ze,ve)|0,h=h+Math.imul(Ue,ge)|0,_=_+Math.imul(Ue,ve)|0,b=b+Math.imul(We,ye)|0,h=h+Math.imul(We,me)|0,h=h+Math.imul(He,ye)|0,_=_+Math.imul(He,me)|0,b=b+Math.imul(Be,be)|0,h=h+Math.imul(Be,we)|0,h=h+Math.imul(Ve,be)|0,_=_+Math.imul(Ve,we)|0,b=b+Math.imul(je,_e)|0,h=h+Math.imul(je,Se)|0,h=h+Math.imul(Fe,_e)|0,_=_+Math.imul(Fe,Se)|0,b=b+Math.imul($e,Ee)|0,h=h+Math.imul($e,Me)|0,h=h+Math.imul(De,Ee)|0,_=_+Math.imul(De,Me)|0,b=b+Math.imul(Le,Ce)|0,h=h+Math.imul(Le,xe)|0,h=h+Math.imul(Pe,Ce)|0,_=_+Math.imul(Pe,xe)|0,b=b+Math.imul(ie,Ie)|0,h=h+Math.imul(ie,Re)|0,h=h+Math.imul(ae,Ie)|0,_=_+Math.imul(ae,Re)|0,b=b+Math.imul(j,Ae)|0,h=h+Math.imul(j,ke)|0,h=h+Math.imul(H,Ae)|0,_=_+Math.imul(H,ke)|0;var Nr=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,b=Math.imul(he,de),h=Math.imul(he,pe),h=h+Math.imul(fe,de)|0,_=Math.imul(fe,pe),b=b+Math.imul(ue,ge)|0,h=h+Math.imul(ue,ve)|0,h=h+Math.imul(le,ge)|0,_=_+Math.imul(le,ve)|0,b=b+Math.imul(ze,ye)|0,h=h+Math.imul(ze,me)|0,h=h+Math.imul(Ue,ye)|0,_=_+Math.imul(Ue,me)|0,b=b+Math.imul(We,be)|0,h=h+Math.imul(We,we)|0,h=h+Math.imul(He,be)|0,_=_+Math.imul(He,we)|0,b=b+Math.imul(Be,_e)|0,h=h+Math.imul(Be,Se)|0,h=h+Math.imul(Ve,_e)|0,_=_+Math.imul(Ve,Se)|0,b=b+Math.imul(je,Ee)|0,h=h+Math.imul(je,Me)|0,h=h+Math.imul(Fe,Ee)|0,_=_+Math.imul(Fe,Me)|0,b=b+Math.imul($e,Ce)|0,h=h+Math.imul($e,xe)|0,h=h+Math.imul(De,Ce)|0,_=_+Math.imul(De,xe)|0,b=b+Math.imul(Le,Ie)|0,h=h+Math.imul(Le,Re)|0,h=h+Math.imul(Pe,Ie)|0,_=_+Math.imul(Pe,Re)|0,b=b+Math.imul(ie,Ae)|0,h=h+Math.imul(ie,ke)|0,h=h+Math.imul(ae,Ae)|0,_=_+Math.imul(ae,ke)|0,b=b+Math.imul(j,Oe)|0,h=h+Math.imul(j,Te)|0,h=h+Math.imul(H,Oe)|0,_=_+Math.imul(H,Te)|0;var Lr=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,b=Math.imul(he,ge),h=Math.imul(he,ve),h=h+Math.imul(fe,ge)|0,_=Math.imul(fe,ve),b=b+Math.imul(ue,ye)|0,h=h+Math.imul(ue,me)|0,h=h+Math.imul(le,ye)|0,_=_+Math.imul(le,me)|0,b=b+Math.imul(ze,be)|0,h=h+Math.imul(ze,we)|0,h=h+Math.imul(Ue,be)|0,_=_+Math.imul(Ue,we)|0,b=b+Math.imul(We,_e)|0,h=h+Math.imul(We,Se)|0,h=h+Math.imul(He,_e)|0,_=_+Math.imul(He,Se)|0,b=b+Math.imul(Be,Ee)|0,h=h+Math.imul(Be,Me)|0,h=h+Math.imul(Ve,Ee)|0,_=_+Math.imul(Ve,Me)|0,b=b+Math.imul(je,Ce)|0,h=h+Math.imul(je,xe)|0,h=h+Math.imul(Fe,Ce)|0,_=_+Math.imul(Fe,xe)|0,b=b+Math.imul($e,Ie)|0,h=h+Math.imul($e,Re)|0,h=h+Math.imul(De,Ie)|0,_=_+Math.imul(De,Re)|0,b=b+Math.imul(Le,Ae)|0,h=h+Math.imul(Le,ke)|0,h=h+Math.imul(Pe,Ae)|0,_=_+Math.imul(Pe,ke)|0,b=b+Math.imul(ie,Oe)|0,h=h+Math.imul(ie,Te)|0,h=h+Math.imul(ae,Oe)|0,_=_+Math.imul(ae,Te)|0;var Pr=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,b=Math.imul(he,ye),h=Math.imul(he,me),h=h+Math.imul(fe,ye)|0,_=Math.imul(fe,me),b=b+Math.imul(ue,be)|0,h=h+Math.imul(ue,we)|0,h=h+Math.imul(le,be)|0,_=_+Math.imul(le,we)|0,b=b+Math.imul(ze,_e)|0,h=h+Math.imul(ze,Se)|0,h=h+Math.imul(Ue,_e)|0,_=_+Math.imul(Ue,Se)|0,b=b+Math.imul(We,Ee)|0,h=h+Math.imul(We,Me)|0,h=h+Math.imul(He,Ee)|0,_=_+Math.imul(He,Me)|0,b=b+Math.imul(Be,Ce)|0,h=h+Math.imul(Be,xe)|0,h=h+Math.imul(Ve,Ce)|0,_=_+Math.imul(Ve,xe)|0,b=b+Math.imul(je,Ie)|0,h=h+Math.imul(je,Re)|0,h=h+Math.imul(Fe,Ie)|0,_=_+Math.imul(Fe,Re)|0,b=b+Math.imul($e,Ae)|0,h=h+Math.imul($e,ke)|0,h=h+Math.imul(De,Ae)|0,_=_+Math.imul(De,ke)|0,b=b+Math.imul(Le,Oe)|0,h=h+Math.imul(Le,Te)|0,h=h+Math.imul(Pe,Oe)|0,_=_+Math.imul(Pe,Te)|0;var $r=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+($r>>>26)|0,$r&=67108863,b=Math.imul(he,be),h=Math.imul(he,we),h=h+Math.imul(fe,be)|0,_=Math.imul(fe,we),b=b+Math.imul(ue,_e)|0,h=h+Math.imul(ue,Se)|0,h=h+Math.imul(le,_e)|0,_=_+Math.imul(le,Se)|0,b=b+Math.imul(ze,Ee)|0,h=h+Math.imul(ze,Me)|0,h=h+Math.imul(Ue,Ee)|0,_=_+Math.imul(Ue,Me)|0,b=b+Math.imul(We,Ce)|0,h=h+Math.imul(We,xe)|0,h=h+Math.imul(He,Ce)|0,_=_+Math.imul(He,xe)|0,b=b+Math.imul(Be,Ie)|0,h=h+Math.imul(Be,Re)|0,h=h+Math.imul(Ve,Ie)|0,_=_+Math.imul(Ve,Re)|0,b=b+Math.imul(je,Ae)|0,h=h+Math.imul(je,ke)|0,h=h+Math.imul(Fe,Ae)|0,_=_+Math.imul(Fe,ke)|0,b=b+Math.imul($e,Oe)|0,h=h+Math.imul($e,Te)|0,h=h+Math.imul(De,Oe)|0,_=_+Math.imul(De,Te)|0;var Dr=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,b=Math.imul(he,_e),h=Math.imul(he,Se),h=h+Math.imul(fe,_e)|0,_=Math.imul(fe,Se),b=b+Math.imul(ue,Ee)|0,h=h+Math.imul(ue,Me)|0,h=h+Math.imul(le,Ee)|0,_=_+Math.imul(le,Me)|0,b=b+Math.imul(ze,Ce)|0,h=h+Math.imul(ze,xe)|0,h=h+Math.imul(Ue,Ce)|0,_=_+Math.imul(Ue,xe)|0,b=b+Math.imul(We,Ie)|0,h=h+Math.imul(We,Re)|0,h=h+Math.imul(He,Ie)|0,_=_+Math.imul(He,Re)|0,b=b+Math.imul(Be,Ae)|0,h=h+Math.imul(Be,ke)|0,h=h+Math.imul(Ve,Ae)|0,_=_+Math.imul(Ve,ke)|0,b=b+Math.imul(je,Oe)|0,h=h+Math.imul(je,Te)|0,h=h+Math.imul(Fe,Oe)|0,_=_+Math.imul(Fe,Te)|0;var jr=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(jr>>>26)|0,jr&=67108863,b=Math.imul(he,Ee),h=Math.imul(he,Me),h=h+Math.imul(fe,Ee)|0,_=Math.imul(fe,Me),b=b+Math.imul(ue,Ce)|0,h=h+Math.imul(ue,xe)|0,h=h+Math.imul(le,Ce)|0,_=_+Math.imul(le,xe)|0,b=b+Math.imul(ze,Ie)|0,h=h+Math.imul(ze,Re)|0,h=h+Math.imul(Ue,Ie)|0,_=_+Math.imul(Ue,Re)|0,b=b+Math.imul(We,Ae)|0,h=h+Math.imul(We,ke)|0,h=h+Math.imul(He,Ae)|0,_=_+Math.imul(He,ke)|0,b=b+Math.imul(Be,Oe)|0,h=h+Math.imul(Be,Te)|0,h=h+Math.imul(Ve,Oe)|0,_=_+Math.imul(Ve,Te)|0;var Go=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(Go>>>26)|0,Go&=67108863,b=Math.imul(he,Ce),h=Math.imul(he,xe),h=h+Math.imul(fe,Ce)|0,_=Math.imul(fe,xe),b=b+Math.imul(ue,Ie)|0,h=h+Math.imul(ue,Re)|0,h=h+Math.imul(le,Ie)|0,_=_+Math.imul(le,Re)|0,b=b+Math.imul(ze,Ae)|0,h=h+Math.imul(ze,ke)|0,h=h+Math.imul(Ue,Ae)|0,_=_+Math.imul(Ue,ke)|0,b=b+Math.imul(We,Oe)|0,h=h+Math.imul(We,Te)|0,h=h+Math.imul(He,Oe)|0,_=_+Math.imul(He,Te)|0;var Jo=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(Jo>>>26)|0,Jo&=67108863,b=Math.imul(he,Ie),h=Math.imul(he,Re),h=h+Math.imul(fe,Ie)|0,_=Math.imul(fe,Re),b=b+Math.imul(ue,Ae)|0,h=h+Math.imul(ue,ke)|0,h=h+Math.imul(le,Ae)|0,_=_+Math.imul(le,ke)|0,b=b+Math.imul(ze,Oe)|0,h=h+Math.imul(ze,Te)|0,h=h+Math.imul(Ue,Oe)|0,_=_+Math.imul(Ue,Te)|0;var Zo=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(Zo>>>26)|0,Zo&=67108863,b=Math.imul(he,Ae),h=Math.imul(he,ke),h=h+Math.imul(fe,Ae)|0,_=Math.imul(fe,ke),b=b+Math.imul(ue,Oe)|0,h=h+Math.imul(ue,Te)|0,h=h+Math.imul(le,Oe)|0,_=_+Math.imul(le,Te)|0;var Qo=(C+b|0)+((h&8191)<<13)|0;C=(_+(h>>>13)|0)+(Qo>>>26)|0,Qo&=67108863,b=Math.imul(he,Oe),h=Math.imul(he,Te),h=h+Math.imul(fe,Oe)|0,_=Math.imul(fe,Te);var Yo=(C+b|0)+((h&8191)<<13)|0;return C=(_+(h>>>13)|0)+(Yo>>>26)|0,Yo&=67108863,E[0]=Cr,E[1]=xr,E[2]=Ir,E[3]=Rr,E[4]=Ar,E[5]=kr,E[6]=Or,E[7]=Tr,E[8]=Nr,E[9]=Lr,E[10]=Pr,E[11]=$r,E[12]=Dr,E[13]=jr,E[14]=Go,E[15]=Jo,E[16]=Zo,E[17]=Qo,E[18]=Yo,C!==0&&(E[19]=C,g.length++),g};Math.imul||(R=I);function T(m,c,f){f.negative=c.negative^m.negative,f.length=m.length+c.length;for(var g=0,y=0,w=0;w<f.length-1;w++){var E=y;y=0;for(var C=g&67108863,b=Math.min(w,c.length-1),h=Math.max(0,w-m.length+1);h<=b;h++){var _=w-h,L=m.words[_]|0,j=c.words[h]|0,H=L*j,et=H&67108863;E=E+(H/67108864|0)|0,et=et+C|0,C=et&67108863,E=E+(et>>>26)|0,y+=E>>>26,E&=67108863}f.words[w]=C,g=E,E=y}return g!==0?f.words[w]=g:f.length--,f._strip()}function N(m,c,f){return T(m,c,f)}s.prototype.mulTo=function(c,f){var g,y=this.length+c.length;return this.length===10&&c.length===10?g=R(this,c,f):y<63?g=I(this,c,f):y<1024?g=T(this,c,f):g=N(this,c,f),g},s.prototype.mul=function(c){var f=new s(null);return f.words=new Array(this.length+c.length),this.mulTo(c,f)},s.prototype.mulf=function(c){var f=new s(null);return f.words=new Array(this.length+c.length),N(this,c,f)},s.prototype.imul=function(c){return this.clone().mulTo(c,this)},s.prototype.imuln=function(c){var f=c<0;f&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var g=0,y=0;y<this.length;y++){var w=(this.words[y]|0)*c,E=(w&67108863)+(g&67108863);g>>=26,g+=w/67108864|0,g+=E>>>26,this.words[y]=E&67108863}return g!==0&&(this.words[y]=g,this.length++),f?this.ineg():this},s.prototype.muln=function(c){return this.clone().imuln(c)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(c){var f=O(c);if(f.length===0)return new s(1);for(var g=this,y=0;y<f.length&&f[y]===0;y++,g=g.sqr());if(++y<f.length)for(var w=g.sqr();y<f.length;y++,w=w.sqr())f[y]!==0&&(g=g.mul(w));return g},s.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var f=c%26,g=(c-f)/26,y=67108863>>>26-f<<26-f,w;if(f!==0){var E=0;for(w=0;w<this.length;w++){var C=this.words[w]&y,b=(this.words[w]|0)-C<<f;this.words[w]=b|E,E=C>>>26-f}E&&(this.words[w]=E,this.length++)}if(g!==0){for(w=this.length-1;w>=0;w--)this.words[w+g]=this.words[w];for(w=0;w<g;w++)this.words[w]=0;this.length+=g}return this._strip()},s.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},s.prototype.iushrn=function(c,f,g){n(typeof c=="number"&&c>=0);var y;f?y=(f-f%26)/26:y=0;var w=c%26,E=Math.min((c-w)/26,this.length),C=67108863^67108863>>>w<<w,b=g;if(y-=E,y=Math.max(0,y),b){for(var h=0;h<E;h++)b.words[h]=this.words[h];b.length=E}if(E!==0)if(this.length>E)for(this.length-=E,h=0;h<this.length;h++)this.words[h]=this.words[h+E];else this.words[0]=0,this.length=1;var _=0;for(h=this.length-1;h>=0&&(_!==0||h>=y);h--){var L=this.words[h]|0;this.words[h]=_<<26-w|L>>>w,_=L&C}return b&&_!==0&&(b.words[b.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(c,f,g){return n(this.negative===0),this.iushrn(c,f,g)},s.prototype.shln=function(c){return this.clone().ishln(c)},s.prototype.ushln=function(c){return this.clone().iushln(c)},s.prototype.shrn=function(c){return this.clone().ishrn(c)},s.prototype.ushrn=function(c){return this.clone().iushrn(c)},s.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var f=c%26,g=(c-f)/26,y=1<<f;if(this.length<=g)return!1;var w=this.words[g];return!!(w&y)},s.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var f=c%26,g=(c-f)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(f!==0&&g++,this.length=Math.min(g,this.length),f!==0){var y=67108863^67108863>>>f<<f;this.words[this.length-1]&=y}return this._strip()},s.prototype.maskn=function(c){return this.clone().imaskn(c)},s.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},s.prototype._iaddn=function(c){this.words[0]+=c;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},s.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},s.prototype.addn=function(c){return this.clone().iaddn(c)},s.prototype.subn=function(c){return this.clone().isubn(c)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(c,f,g){var y=c.length+g,w;this._expand(y);var E,C=0;for(w=0;w<c.length;w++){E=(this.words[w+g]|0)+C;var b=(c.words[w]|0)*f;E-=b&67108863,C=(E>>26)-(b/67108864|0),this.words[w+g]=E&67108863}for(;w<this.length-g;w++)E=(this.words[w+g]|0)+C,C=E>>26,this.words[w+g]=E&67108863;if(C===0)return this._strip();for(n(C===-1),C=0,w=0;w<this.length;w++)E=-(this.words[w]|0)+C,C=E>>26,this.words[w]=E&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(c,f){var g=this.length-c.length,y=this.clone(),w=c,E=w.words[w.length-1]|0,C=this._countBits(E);g=26-C,g!==0&&(w=w.ushln(g),y.iushln(g),E=w.words[w.length-1]|0);var b=y.length-w.length,h;if(f!=="mod"){h=new s(null),h.length=b+1,h.words=new Array(h.length);for(var _=0;_<h.length;_++)h.words[_]=0}var L=y.clone()._ishlnsubmul(w,1,b);L.negative===0&&(y=L,h&&(h.words[b]=1));for(var j=b-1;j>=0;j--){var H=(y.words[w.length+j]|0)*67108864+(y.words[w.length+j-1]|0);for(H=Math.min(H/E|0,67108863),y._ishlnsubmul(w,H,j);y.negative!==0;)H--,y.negative=0,y._ishlnsubmul(w,1,j),y.isZero()||(y.negative^=1);h&&(h.words[j]=H)}return h&&h._strip(),y._strip(),f!=="div"&&g!==0&&y.iushrn(g),{div:h||null,mod:y}},s.prototype.divmod=function(c,f,g){if(n(!c.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var y,w,E;return this.negative!==0&&c.negative===0?(E=this.neg().divmod(c,f),f!=="mod"&&(y=E.div.neg()),f!=="div"&&(w=E.mod.neg(),g&&w.negative!==0&&w.iadd(c)),{div:y,mod:w}):this.negative===0&&c.negative!==0?(E=this.divmod(c.neg(),f),f!=="mod"&&(y=E.div.neg()),{div:y,mod:E.mod}):this.negative&c.negative?(E=this.neg().divmod(c.neg(),f),f!=="div"&&(w=E.mod.neg(),g&&w.negative!==0&&w.isub(c)),{div:E.div,mod:w}):c.length>this.length||this.cmp(c)<0?{div:new s(0),mod:this}:c.length===1?f==="div"?{div:this.divn(c.words[0]),mod:null}:f==="mod"?{div:null,mod:new s(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new s(this.modrn(c.words[0]))}:this._wordDiv(c,f)},s.prototype.div=function(c){return this.divmod(c,"div",!1).div},s.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},s.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},s.prototype.divRound=function(c){var f=this.divmod(c);if(f.mod.isZero())return f.div;var g=f.div.negative!==0?f.mod.isub(c):f.mod,y=c.ushrn(1),w=c.andln(1),E=g.cmp(y);return E<0||w===1&&E===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},s.prototype.modrn=function(c){var f=c<0;f&&(c=-c),n(c<=67108863);for(var g=(1<<26)%c,y=0,w=this.length-1;w>=0;w--)y=(g*y+(this.words[w]|0))%c;return f?-y:y},s.prototype.modn=function(c){return this.modrn(c)},s.prototype.idivn=function(c){var f=c<0;f&&(c=-c),n(c<=67108863);for(var g=0,y=this.length-1;y>=0;y--){var w=(this.words[y]|0)+g*67108864;this.words[y]=w/c|0,g=w%c}return this._strip(),f?this.ineg():this},s.prototype.divn=function(c){return this.clone().idivn(c)},s.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var f=this,g=c.clone();f.negative!==0?f=f.umod(c):f=f.clone();for(var y=new s(1),w=new s(0),E=new s(0),C=new s(1),b=0;f.isEven()&&g.isEven();)f.iushrn(1),g.iushrn(1),++b;for(var h=g.clone(),_=f.clone();!f.isZero();){for(var L=0,j=1;!(f.words[0]&j)&&L<26;++L,j<<=1);if(L>0)for(f.iushrn(L);L-- >0;)(y.isOdd()||w.isOdd())&&(y.iadd(h),w.isub(_)),y.iushrn(1),w.iushrn(1);for(var H=0,et=1;!(g.words[0]&et)&&H<26;++H,et<<=1);if(H>0)for(g.iushrn(H);H-- >0;)(E.isOdd()||C.isOdd())&&(E.iadd(h),C.isub(_)),E.iushrn(1),C.iushrn(1);f.cmp(g)>=0?(f.isub(g),y.isub(E),w.isub(C)):(g.isub(f),E.isub(y),C.isub(w))}return{a:E,b:C,gcd:g.iushln(b)}},s.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var f=this,g=c.clone();f.negative!==0?f=f.umod(c):f=f.clone();for(var y=new s(1),w=new s(0),E=g.clone();f.cmpn(1)>0&&g.cmpn(1)>0;){for(var C=0,b=1;!(f.words[0]&b)&&C<26;++C,b<<=1);if(C>0)for(f.iushrn(C);C-- >0;)y.isOdd()&&y.iadd(E),y.iushrn(1);for(var h=0,_=1;!(g.words[0]&_)&&h<26;++h,_<<=1);if(h>0)for(g.iushrn(h);h-- >0;)w.isOdd()&&w.iadd(E),w.iushrn(1);f.cmp(g)>=0?(f.isub(g),y.isub(w)):(g.isub(f),w.isub(y))}var L;return f.cmpn(1)===0?L=y:L=w,L.cmpn(0)<0&&L.iadd(c),L},s.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var f=this.clone(),g=c.clone();f.negative=0,g.negative=0;for(var y=0;f.isEven()&&g.isEven();y++)f.iushrn(1),g.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;g.isEven();)g.iushrn(1);var w=f.cmp(g);if(w<0){var E=f;f=g,g=E}else if(w===0||g.cmpn(1)===0)break;f.isub(g)}while(!0);return g.iushln(y)},s.prototype.invm=function(c){return this.egcd(c).a.umod(c)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(c){return this.words[0]&c},s.prototype.bincn=function(c){n(typeof c=="number");var f=c%26,g=(c-f)/26,y=1<<f;if(this.length<=g)return this._expand(g+1),this.words[g]|=y,this;for(var w=y,E=g;w!==0&&E<this.length;E++){var C=this.words[E]|0;C+=w,w=C>>>26,C&=67108863,this.words[E]=C}return w!==0&&(this.words[E]=w,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(c){var f=c<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var g;if(this.length>1)g=1;else{f&&(c=-c),n(c<=67108863,"Number is too big");var y=this.words[0]|0;g=y===c?0:y<c?-1:1}return this.negative!==0?-g|0:g},s.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var f=this.ucmp(c);return this.negative!==0?-f|0:f},s.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var f=0,g=this.length-1;g>=0;g--){var y=this.words[g]|0,w=c.words[g]|0;if(y!==w){y<w?f=-1:y>w&&(f=1);break}}return f},s.prototype.gtn=function(c){return this.cmpn(c)===1},s.prototype.gt=function(c){return this.cmp(c)===1},s.prototype.gten=function(c){return this.cmpn(c)>=0},s.prototype.gte=function(c){return this.cmp(c)>=0},s.prototype.ltn=function(c){return this.cmpn(c)===-1},s.prototype.lt=function(c){return this.cmp(c)===-1},s.prototype.lten=function(c){return this.cmpn(c)<=0},s.prototype.lte=function(c){return this.cmp(c)<=0},s.prototype.eqn=function(c){return this.cmpn(c)===0},s.prototype.eq=function(c){return this.cmp(c)===0},s.red=function(c){return new U(c)},s.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(c){return this.red=c,this},s.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},s.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},s.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},s.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},s.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},s.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},s.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},s.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var k={k256:null,p224:null,p192:null,p25519:null};function P(m,c){this.name=m,this.p=new s(c,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}P.prototype._tmp=function(){var c=new s(null);return c.words=new Array(Math.ceil(this.n/13)),c},P.prototype.ireduce=function(c){var f=c,g;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),g=f.bitLength();while(g>this.n);var y=g<this.n?-1:f.ucmp(this.p);return y===0?(f.words[0]=0,f.length=1):y>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},P.prototype.split=function(c,f){c.iushrn(this.n,0,f)},P.prototype.imulK=function(c){return c.imul(this.k)};function W(){P.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(W,P),W.prototype.split=function(c,f){for(var g=4194303,y=Math.min(c.length,9),w=0;w<y;w++)f.words[w]=c.words[w];if(f.length=y,c.length<=9){c.words[0]=0,c.length=1;return}var E=c.words[9];for(f.words[f.length++]=E&g,w=10;w<c.length;w++){var C=c.words[w]|0;c.words[w-10]=(C&g)<<4|E>>>22,E=C}E>>>=22,c.words[w-10]=E,E===0&&c.length>10?c.length-=10:c.length-=9},W.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var f=0,g=0;g<c.length;g++){var y=c.words[g]|0;f+=y*977,c.words[g]=f&67108863,f=y*64+(f/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function ee(){P.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(ee,P);function D(){P.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(D,P);function z(){P.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(z,P),z.prototype.imulK=function(c){for(var f=0,g=0;g<c.length;g++){var y=(c.words[g]|0)*19+f,w=y&67108863;y>>>=26,c.words[g]=w,f=y}return f!==0&&(c.words[c.length++]=f),c},s._prime=function(c){if(k[c])return k[c];var f;if(c==="k256")f=new W;else if(c==="p224")f=new ee;else if(c==="p192")f=new D;else if(c==="p25519")f=new z;else throw new Error("Unknown prime "+c);return k[c]=f,f};function U(m){if(typeof m=="string"){var c=s._prime(m);this.m=c.p,this.prime=c}else n(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}U.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},U.prototype._verify2=function(c,f){n((c.negative|f.negative)===0,"red works only with positives"),n(c.red&&c.red===f.red,"red works only with red numbers")},U.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(d(c,c.umod(this.m)._forceRed(this)),c)},U.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},U.prototype.add=function(c,f){this._verify2(c,f);var g=c.add(f);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},U.prototype.iadd=function(c,f){this._verify2(c,f);var g=c.iadd(f);return g.cmp(this.m)>=0&&g.isub(this.m),g},U.prototype.sub=function(c,f){this._verify2(c,f);var g=c.sub(f);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},U.prototype.isub=function(c,f){this._verify2(c,f);var g=c.isub(f);return g.cmpn(0)<0&&g.iadd(this.m),g},U.prototype.shl=function(c,f){return this._verify1(c),this.imod(c.ushln(f))},U.prototype.imul=function(c,f){return this._verify2(c,f),this.imod(c.imul(f))},U.prototype.mul=function(c,f){return this._verify2(c,f),this.imod(c.mul(f))},U.prototype.isqr=function(c){return this.imul(c,c.clone())},U.prototype.sqr=function(c){return this.mul(c,c)},U.prototype.sqrt=function(c){if(c.isZero())return c.clone();var f=this.m.andln(3);if(n(f%2===1),f===3){var g=this.m.add(new s(1)).iushrn(2);return this.pow(c,g)}for(var y=this.m.subn(1),w=0;!y.isZero()&&y.andln(1)===0;)w++,y.iushrn(1);n(!y.isZero());var E=new s(1).toRed(this),C=E.redNeg(),b=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);this.pow(h,b).cmp(C)!==0;)h.redIAdd(C);for(var _=this.pow(h,y),L=this.pow(c,y.addn(1).iushrn(1)),j=this.pow(c,y),H=w;j.cmp(E)!==0;){for(var et=j,ie=0;et.cmp(E)!==0;ie++)et=et.redSqr();n(ie<H);var ae=this.pow(_,new s(1).iushln(H-ie-1));L=L.redMul(ae),_=ae.redSqr(),j=j.redMul(_),H=ie}return L},U.prototype.invm=function(c){var f=c._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},U.prototype.pow=function(c,f){if(f.isZero())return new s(1).toRed(this);if(f.cmpn(1)===0)return c.clone();var g=4,y=new Array(1<<g);y[0]=new s(1).toRed(this),y[1]=c;for(var w=2;w<y.length;w++)y[w]=this.mul(y[w-1],c);var E=y[0],C=0,b=0,h=f.bitLength()%26;for(h===0&&(h=26),w=f.length-1;w>=0;w--){for(var _=f.words[w],L=h-1;L>=0;L--){var j=_>>L&1;if(E!==y[0]&&(E=this.sqr(E)),j===0&&C===0){b=0;continue}C<<=1,C|=j,b++,!(b!==g&&(w!==0||L!==0))&&(E=this.mul(E,y[C]),b=0,C=0)}h=26}return E},U.prototype.convertTo=function(c){var f=c.umod(this.m);return f===c?f.clone():f},U.prototype.convertFrom=function(c){var f=c.clone();return f.red=null,f},s.mont=function(c){return new q(c)};function q(m){U.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(q,U),q.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},q.prototype.convertFrom=function(c){var f=this.imod(c.mul(this.rinv));return f.red=null,f},q.prototype.imul=function(c,f){if(c.isZero()||f.isZero())return c.words[0]=0,c.length=1,c;var g=c.imul(f),y=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=g.isub(y).iushrn(this.shift),E=w;return w.cmp(this.m)>=0?E=w.isub(this.m):w.cmpn(0)<0&&(E=w.iadd(this.m)),E._forceRed(this)},q.prototype.mul=function(c,f){if(c.isZero()||f.isZero())return new s(0)._forceRed(this);var g=c.mul(f),y=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=g.isub(y).iushrn(this.shift),E=w;return w.cmp(this.m)>=0?E=w.isub(this.m):w.cmpn(0)<0&&(E=w.iadd(this.m)),E._forceRed(this)},q.prototype.invm=function(c){var f=this.imod(c._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(t,F)})(sc);var Zs=sc.exports,ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.EVENTS=void 0;ti.EVENTS={STARTED_CONNECTING:"walletlink_sdk.started.connecting",CONNECTED_STATE_CHANGE:"walletlink_sdk.connected",DISCONNECTED:"walletlink_sdk.disconnected",METADATA_DESTROYED:"walletlink_sdk_metadata_destroyed",LINKED:"walletlink_sdk.linked",FAILURE:"walletlink_sdk.generic_failure",SESSION_CONFIG_RECEIVED:"walletlink_sdk.session_config_event_received",ETH_ACCOUNTS_STATE:"walletlink_sdk.eth_accounts_state",SESSION_STATE_CHANGE:"walletlink_sdk.session_state_change",UNLINKED_ERROR_STATE:"walletlink_sdk.unlinked_error_state",SKIPPED_CLEARING_SESSION:"walletlink_sdk.skipped_clearing_session",GENERAL_ERROR:"walletlink_sdk.general_error",WEB3_REQUEST:"walletlink_sdk.web3.request",WEB3_REQUEST_PUBLISHED:"walletlink_sdk.web3.request_published",WEB3_RESPONSE:"walletlink_sdk.web3.response",UNKNOWN_ADDRESS_ENCOUNTERED:"walletlink_sdk.unknown_address_encountered"};var Vi={},oc={},br={},Kp=Pi;Pi.default=Pi;Pi.stable=Ch;Pi.stableStringify=Ch;var As="[...]",Eh="[Circular]",Kr=[],Gr=[];function Mh(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Pi(t,e,r,n){typeof n>"u"&&(n=Mh()),Na(t,"",0,[],void 0,0,n);var i;try{Gr.length===0?i=JSON.stringify(t,e,r):i=JSON.stringify(t,xh(e),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Kr.length!==0;){var s=Kr.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function Nn(t,e,r,n){var i=Object.getOwnPropertyDescriptor(n,r);i.get!==void 0?i.configurable?(Object.defineProperty(n,r,{value:t}),Kr.push([n,r,e,i])):Gr.push([e,r,t]):(n[r]=t,Kr.push([n,r,e]))}function Na(t,e,r,n,i,s,o){s+=1;var a;if(typeof t=="object"&&t!==null){for(a=0;a<n.length;a++)if(n[a]===t){Nn(Eh,t,e,i);return}if(typeof o.depthLimit<"u"&&s>o.depthLimit){Nn(As,t,e,i);return}if(typeof o.edgesLimit<"u"&&r+1>o.edgesLimit){Nn(As,t,e,i);return}if(n.push(t),Array.isArray(t))for(a=0;a<t.length;a++)Na(t[a],a,a,n,t,s,o);else{var u=Object.keys(t);for(a=0;a<u.length;a++){var l=u[a];Na(t[l],l,a,n,t,s,o)}}n.pop()}}function Xp(t,e){return t<e?-1:t>e?1:0}function Ch(t,e,r,n){typeof n>"u"&&(n=Mh());var i=La(t,"",0,[],void 0,0,n)||t,s;try{Gr.length===0?s=JSON.stringify(i,e,r):s=JSON.stringify(i,xh(e),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Kr.length!==0;){var o=Kr.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return s}function La(t,e,r,n,i,s,o){s+=1;var a;if(typeof t=="object"&&t!==null){for(a=0;a<n.length;a++)if(n[a]===t){Nn(Eh,t,e,i);return}try{if(typeof t.toJSON=="function")return}catch{return}if(typeof o.depthLimit<"u"&&s>o.depthLimit){Nn(As,t,e,i);return}if(typeof o.edgesLimit<"u"&&r+1>o.edgesLimit){Nn(As,t,e,i);return}if(n.push(t),Array.isArray(t))for(a=0;a<t.length;a++)La(t[a],a,a,n,t,s,o);else{var u={},l=Object.keys(t).sort(Xp);for(a=0;a<l.length;a++){var d=l[a];La(t[d],d,a,n,t,s,o),u[d]=t[d]}if(typeof i<"u")Kr.push([i,e,t]),i[e]=u;else return u}n.pop()}}function xh(t){return t=typeof t<"u"?t:function(e,r){return r},function(e,r){if(Gr.length>0)for(var n=0;n<Gr.length;n++){var i=Gr[n];if(i[1]===e&&i[0]===r){r=i[2],Gr.splice(n,1);break}}return t.call(this,e,r)}}Object.defineProperty(br,"__esModule",{value:!0});br.EthereumProviderError=br.EthereumRpcError=void 0;const e0=Kp;class Ih extends Error{constructor(e,r,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=e,n!==void 0&&(this.data=n)}serialize(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return e0.default(this.serialize(),n0,2)}}br.EthereumRpcError=Ih;class t0 extends Ih{constructor(e,r,n){if(!r0(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,r,n)}}br.EthereumProviderError=t0;function r0(t){return Number.isInteger(t)&&t>=1e3&&t<=4999}function n0(t,e){if(e!=="[Circular]")return e}var ac={},wr={};Object.defineProperty(wr,"__esModule",{value:!0});wr.errorValues=wr.errorCodes=void 0;wr.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};wr.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=wr,r=br,n=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",s={code:n,message:o(n)};t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function o(v,S=i){if(Number.isInteger(v)){const M=v.toString();if(p(e.errorValues,M))return e.errorValues[M].message;if(l(v))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return S}t.getMessageFromCode=o;function a(v){if(!Number.isInteger(v))return!1;const S=v.toString();return!!(e.errorValues[S]||l(v))}t.isValidCode=a;function u(v,{fallbackError:S=s,shouldIncludeStack:M=!1}={}){var x,O;if(!S||!Number.isInteger(S.code)||typeof S.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(v instanceof r.EthereumRpcError)return v.serialize();const I={};if(v&&typeof v=="object"&&!Array.isArray(v)&&p(v,"code")&&a(v.code)){const T=v;I.code=T.code,T.message&&typeof T.message=="string"?(I.message=T.message,p(T,"data")&&(I.data=T.data)):(I.message=o(I.code),I.data={originalError:d(v)})}else{I.code=S.code;const T=(x=v)===null||x===void 0?void 0:x.message;I.message=T&&typeof T=="string"?T:S.message,I.data={originalError:d(v)}}const R=(O=v)===null||O===void 0?void 0:O.stack;return M&&v&&R&&typeof R=="string"&&(I.stack=R),I}t.serializeError=u;function l(v){return v>=-32099&&v<=-32e3}function d(v){return v&&typeof v=="object"&&!Array.isArray(v)?Object.assign({},v):v}function p(v,S){return Object.prototype.hasOwnProperty.call(v,S)}})(ac);var Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.ethErrors=void 0;const cc=br,Rh=ac,ht=wr;Qs.ethErrors={rpc:{parse:t=>xt(ht.errorCodes.rpc.parse,t),invalidRequest:t=>xt(ht.errorCodes.rpc.invalidRequest,t),invalidParams:t=>xt(ht.errorCodes.rpc.invalidParams,t),methodNotFound:t=>xt(ht.errorCodes.rpc.methodNotFound,t),internal:t=>xt(ht.errorCodes.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return xt(e,t)},invalidInput:t=>xt(ht.errorCodes.rpc.invalidInput,t),resourceNotFound:t=>xt(ht.errorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>xt(ht.errorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>xt(ht.errorCodes.rpc.transactionRejected,t),methodNotSupported:t=>xt(ht.errorCodes.rpc.methodNotSupported,t),limitExceeded:t=>xt(ht.errorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>bi(ht.errorCodes.provider.userRejectedRequest,t),unauthorized:t=>bi(ht.errorCodes.provider.unauthorized,t),unsupportedMethod:t=>bi(ht.errorCodes.provider.unsupportedMethod,t),disconnected:t=>bi(ht.errorCodes.provider.disconnected,t),chainDisconnected:t=>bi(ht.errorCodes.provider.chainDisconnected,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:r,data:n}=t;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new cc.EthereumProviderError(e,r,n)}}};function xt(t,e){const[r,n]=Ah(e);return new cc.EthereumRpcError(t,r||Rh.getMessageFromCode(t),n)}function bi(t,e){const[r,n]=Ah(e);return new cc.EthereumProviderError(t,r||Rh.getMessageFromCode(t),n)}function Ah(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:r}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,r]}}return[]}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const e=br;Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const r=ac;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=Qs;Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=wr;Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(oc);var ce={},Ys={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Web3Method=void 0,function(e){e.requestEthereumAccounts="requestEthereumAccounts",e.signEthereumMessage="signEthereumMessage",e.signEthereumTransaction="signEthereumTransaction",e.submitEthereumTransaction="submitEthereumTransaction",e.ethereumAddressFromSignedMessage="ethereumAddressFromSignedMessage",e.scanQRCode="scanQRCode",e.generic="generic",e.childRequestEthereumAccounts="childRequestEthereumAccounts",e.addEthereumChain="addEthereumChain",e.switchEthereumChain="switchEthereumChain",e.makeEthereumJSONRPCRequest="makeEthereumJSONRPCRequest",e.watchAsset="watchAsset",e.selectProvider="selectProvider"}(t.Web3Method||(t.Web3Method={}))})(Ys);Object.defineProperty(ce,"__esModule",{value:!0});ce.EthereumAddressFromSignedMessageResponse=ce.SubmitEthereumTransactionResponse=ce.SignEthereumTransactionResponse=ce.SignEthereumMessageResponse=ce.isRequestEthereumAccountsResponse=ce.SelectProviderResponse=ce.WatchAssetReponse=ce.RequestEthereumAccountsResponse=ce.SwitchEthereumChainResponse=ce.AddEthereumChainResponse=ce.isErrorResponse=void 0;const tr=Ys;function i0(t){var e,r;return((e=t)===null||e===void 0?void 0:e.method)!==void 0&&((r=t)===null||r===void 0?void 0:r.errorMessage)!==void 0}ce.isErrorResponse=i0;function s0(t){return{method:tr.Web3Method.addEthereumChain,result:t}}ce.AddEthereumChainResponse=s0;function o0(t){return{method:tr.Web3Method.switchEthereumChain,result:t}}ce.SwitchEthereumChainResponse=o0;function a0(t){return{method:tr.Web3Method.requestEthereumAccounts,result:t}}ce.RequestEthereumAccountsResponse=a0;function c0(t){return{method:tr.Web3Method.watchAsset,result:t}}ce.WatchAssetReponse=c0;function u0(t){return{method:tr.Web3Method.selectProvider,result:t}}ce.SelectProviderResponse=u0;function l0(t){return t&&t.method===tr.Web3Method.requestEthereumAccounts}ce.isRequestEthereumAccountsResponse=l0;function h0(t){return{method:tr.Web3Method.signEthereumMessage,result:t}}ce.SignEthereumMessageResponse=h0;function f0(t){return{method:tr.Web3Method.signEthereumTransaction,result:t}}ce.SignEthereumTransactionResponse=f0;function d0(t){return{method:tr.Web3Method.submitEthereumTransaction,result:t}}ce.SubmitEthereumTransactionResponse=d0;function p0(t){return{method:tr.Web3Method.ethereumAddressFromSignedMessage,result:t}}ce.EthereumAddressFromSignedMessageResponse=p0;var ri={};Object.defineProperty(ri,"__esModule",{value:!0});ri.LIB_VERSION=void 0;ri.LIB_VERSION="3.7.2";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorCode=t.serializeError=t.standardErrors=t.standardErrorMessage=t.standardErrorCodes=void 0;const e=oc,r=ce,n=ri;t.standardErrorCodes=Object.freeze(Object.assign(Object.assign({},e.errorCodes),{provider:Object.freeze(Object.assign(Object.assign({},e.errorCodes.provider),{unsupportedChain:4902}))}));function i(d){return d!==void 0?(0,e.getMessageFromCode)(d):"Unknown error"}t.standardErrorMessage=i,t.standardErrors=Object.freeze(Object.assign(Object.assign({},e.ethErrors),{provider:Object.freeze(Object.assign(Object.assign({},e.ethErrors.provider),{unsupportedChain:(d="")=>e.ethErrors.provider.custom({code:t.standardErrorCodes.provider.unsupportedChain,message:`Unrecognized chain ID ${d}. Try adding the chain using wallet_addEthereumChain first.`})}))}));function s(d,p){const v=(0,e.serializeError)(o(d),{shouldIncludeStack:!0}),S=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");S.searchParams.set("version",n.LIB_VERSION),S.searchParams.set("code",v.code.toString());const M=a(v.data,p);return M&&S.searchParams.set("method",M),S.searchParams.set("message",v.message),Object.assign(Object.assign({},v),{docUrl:S.href})}t.serializeError=s;function o(d){return typeof d=="string"?{message:d,code:t.standardErrorCodes.rpc.internal}:(0,r.isErrorResponse)(d)?Object.assign(Object.assign({},d),{message:d.errorMessage,code:d.errorCode,data:{method:d.method,result:d.result}}):d}function a(d,p){var v;const S=(v=d)===null||v===void 0?void 0:v.method;if(S)return S;if(p!==void 0)return typeof p=="string"?p:Array.isArray(p)?p.length>0?p[0].method:void 0:p.method}function u(d){var p;if(typeof d=="number")return d;if(l(d))return(p=d.code)!==null&&p!==void 0?p:d.errorCode}t.getErrorCode=u;function l(d){return typeof d=="object"&&d!==null&&(typeof d.code=="number"||typeof d.errorCode=="number")}})(Vi);var ni={},$={},g0=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0},yu=typeof Symbol<"u"&&Symbol,v0=g0,y0=function(){return typeof yu!="function"||typeof Symbol!="function"||typeof yu("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:v0()},mu={foo:{}},m0=Object,b0=function(){return{__proto__:mu}.foo===mu.foo&&!({__proto__:null}instanceof m0)},w0="Function.prototype.bind called on incompatible ",_0=Object.prototype.toString,S0=Math.max,E0="[object Function]",bu=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var s=0;s<r.length;s+=1)n[s+e.length]=r[s];return n},M0=function(e,r){for(var n=[],i=r||0,s=0;i<e.length;i+=1,s+=1)n[s]=e[i];return n},C0=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},x0=function(e){var r=this;if(typeof r!="function"||_0.apply(r)!==E0)throw new TypeError(w0+r);for(var n=M0(arguments,1),i,s=function(){if(this instanceof i){var d=r.apply(this,bu(n,arguments));return Object(d)===d?d:this}return r.apply(e,bu(n,arguments))},o=S0(0,r.length-n.length),a=[],u=0;u<o;u++)a[u]="$"+u;if(i=Function("binder","return function ("+C0(a,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i},I0=x0,kh=Function.prototype.bind||I0,wu={}.hasOwnProperty,Ko=Function.prototype.call,R0=Ko.bind?Ko.bind(wu):function(t,e){return Ko.call(wu,t,e)},K,Vn=SyntaxError,Oh=Function,Ln=TypeError,Xo=function(t){try{return Oh('"use strict"; return ('+t+").constructor;")()}catch{}},Qr=Object.getOwnPropertyDescriptor;if(Qr)try{Qr({},"")}catch{Qr=null}var ea=function(){throw new Ln},A0=Qr?function(){try{return arguments.callee,ea}catch{try{return Qr(arguments,"callee").get}catch{return ea}}}():ea,En=y0(),k0=b0(),st=Object.getPrototypeOf||(k0?function(t){return t.__proto__}:null),An={},O0=typeof Uint8Array>"u"||!st?K:st(Uint8Array),Yr={"%AggregateError%":typeof AggregateError>"u"?K:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?K:ArrayBuffer,"%ArrayIteratorPrototype%":En&&st?st([][Symbol.iterator]()):K,"%AsyncFromSyncIteratorPrototype%":K,"%AsyncFunction%":An,"%AsyncGenerator%":An,"%AsyncGeneratorFunction%":An,"%AsyncIteratorPrototype%":An,"%Atomics%":typeof Atomics>"u"?K:Atomics,"%BigInt%":typeof BigInt>"u"?K:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?K:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?K:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?K:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?K:Float32Array,"%Float64Array%":typeof Float64Array>"u"?K:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?K:FinalizationRegistry,"%Function%":Oh,"%GeneratorFunction%":An,"%Int8Array%":typeof Int8Array>"u"?K:Int8Array,"%Int16Array%":typeof Int16Array>"u"?K:Int16Array,"%Int32Array%":typeof Int32Array>"u"?K:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":En&&st?st(st([][Symbol.iterator]())):K,"%JSON%":typeof JSON=="object"?JSON:K,"%Map%":typeof Map>"u"?K:Map,"%MapIteratorPrototype%":typeof Map>"u"||!En||!st?K:st(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?K:Promise,"%Proxy%":typeof Proxy>"u"?K:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?K:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?K:Set,"%SetIteratorPrototype%":typeof Set>"u"||!En||!st?K:st(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?K:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":En&&st?st(""[Symbol.iterator]()):K,"%Symbol%":En?Symbol:K,"%SyntaxError%":Vn,"%ThrowTypeError%":A0,"%TypedArray%":O0,"%TypeError%":Ln,"%Uint8Array%":typeof Uint8Array>"u"?K:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?K:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?K:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?K:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?K:WeakMap,"%WeakRef%":typeof WeakRef>"u"?K:WeakRef,"%WeakSet%":typeof WeakSet>"u"?K:WeakSet};if(st)try{null.error}catch(t){var T0=st(st(t));Yr["%Error.prototype%"]=T0}var N0=function t(e){var r;if(e==="%AsyncFunction%")r=Xo("async function () {}");else if(e==="%GeneratorFunction%")r=Xo("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Xo("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&st&&(r=st(i.prototype))}return Yr[e]=r,r},_u={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Wi=kh,ks=R0,L0=Wi.call(Function.call,Array.prototype.concat),P0=Wi.call(Function.apply,Array.prototype.splice),Su=Wi.call(Function.call,String.prototype.replace),Os=Wi.call(Function.call,String.prototype.slice),$0=Wi.call(Function.call,RegExp.prototype.exec),D0=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,j0=/\\(\\)?/g,F0=function(e){var r=Os(e,0,1),n=Os(e,-1);if(r==="%"&&n!=="%")throw new Vn("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Vn("invalid intrinsic syntax, expected opening `%`");var i=[];return Su(e,D0,function(s,o,a,u){i[i.length]=a?Su(u,j0,"$1"):o||s}),i},B0=function(e,r){var n=e,i;if(ks(_u,n)&&(i=_u[n],n="%"+i[0]+"%"),ks(Yr,n)){var s=Yr[n];if(s===An&&(s=N0(n)),typeof s>"u"&&!r)throw new Ln("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Vn("intrinsic "+e+" does not exist!")},uc=function(e,r){if(typeof e!="string"||e.length===0)throw new Ln("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ln('"allowMissing" argument must be a boolean');if($0(/^%?[^%]*%?$/,e)===null)throw new Vn("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=F0(e),i=n.length>0?n[0]:"",s=B0("%"+i+"%",r),o=s.name,a=s.value,u=!1,l=s.alias;l&&(i=l[0],P0(n,L0([0,1],l)));for(var d=1,p=!0;d<n.length;d+=1){var v=n[d],S=Os(v,0,1),M=Os(v,-1);if((S==='"'||S==="'"||S==="`"||M==='"'||M==="'"||M==="`")&&S!==M)throw new Vn("property names with quotes must have matching quotes");if((v==="constructor"||!p)&&(u=!0),i+="."+v,o="%"+i+"%",ks(Yr,o))a=Yr[o];else if(a!=null){if(!(v in a)){if(!r)throw new Ln("base intrinsic for "+e+" exists, but the property is not available.");return}if(Qr&&d+1>=n.length){var x=Qr(a,v);p=!!x,p&&"get"in x&&!("originalValue"in x.get)?a=x.get:a=a[v]}else p=ks(a,v),a=a[v];p&&!u&&(Yr[o]=a)}}return a},Th={exports:{}};(function(t){var e=kh,r=uc,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||e.call(i,n),o=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(p){var v=s(e,i,arguments);if(o&&a){var S=o(v,"length");S.configurable&&a(v,"length",{value:1+u(0,p.length-(arguments.length-1))})}return v};var l=function(){return s(e,n,arguments)};a?a(t.exports,"apply",{value:l}):t.exports.apply=l})(Th);var V0=Th.exports,Nh=uc,Lh=V0,W0=Lh(Nh("String.prototype.indexOf")),H0=function(e,r){var n=Nh(e,!!r);return typeof n=="function"&&W0(e,".prototype.")>-1?Lh(n):n},lc=typeof Map=="function"&&Map.prototype,ta=Object.getOwnPropertyDescriptor&&lc?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ts=lc&&ta&&typeof ta.get=="function"?ta.get:null,Eu=lc&&Map.prototype.forEach,hc=typeof Set=="function"&&Set.prototype,ra=Object.getOwnPropertyDescriptor&&hc?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ns=hc&&ra&&typeof ra.get=="function"?ra.get:null,Mu=hc&&Set.prototype.forEach,z0=typeof WeakMap=="function"&&WeakMap.prototype,xi=z0?WeakMap.prototype.has:null,U0=typeof WeakSet=="function"&&WeakSet.prototype,Ii=U0?WeakSet.prototype.has:null,q0=typeof WeakRef=="function"&&WeakRef.prototype,Cu=q0?WeakRef.prototype.deref:null,G0=Boolean.prototype.valueOf,J0=Object.prototype.toString,Z0=Function.prototype.toString,Q0=String.prototype.match,fc=String.prototype.slice,yr=String.prototype.replace,Y0=String.prototype.toUpperCase,xu=String.prototype.toLowerCase,Ph=RegExp.prototype.test,Iu=Array.prototype.concat,Zt=Array.prototype.join,K0=Array.prototype.slice,Ru=Math.floor,Pa=typeof BigInt=="function"?BigInt.prototype.valueOf:null,na=Object.getOwnPropertySymbols,$a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Wn=typeof Symbol=="function"&&typeof Symbol.iterator=="object",pt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Wn||"symbol")?Symbol.toStringTag:null,$h=Object.prototype.propertyIsEnumerable,Au=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function ku(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Ph.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-Ru(-t):Ru(t);if(n!==t){var i=String(n),s=fc.call(e,i.length+1);return yr.call(i,r,"$&_")+"."+yr.call(yr.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return yr.call(e,r,"$&_")}var Da=_h,Ou=Da.custom,Tu=jh(Ou)?Ou:null,X0=function t(e,r,n,i){var s=r||{};if(pr(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(pr(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=pr(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(pr(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(pr(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Bh(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return a?ku(e,u):u}if(typeof e=="bigint"){var l=String(e)+"n";return a?ku(e,l):l}var d=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=d&&d>0&&typeof e=="object")return ja(e)?"[Array]":"[Object]";var p=yg(s,n);if(typeof i>"u")i=[];else if(Fh(i,e)>=0)return"[Circular]";function v(m,c,f){if(c&&(i=K0.call(i),i.push(c)),f){var g={depth:s.depth};return pr(s,"quoteStyle")&&(g.quoteStyle=s.quoteStyle),t(m,g,n+1,i)}return t(m,s,n+1,i)}if(typeof e=="function"&&!Nu(e)){var S=cg(e),M=us(e,v);return"[Function"+(S?": "+S:" (anonymous)")+"]"+(M.length>0?" { "+Zt.call(M,", ")+" }":"")}if(jh(e)){var x=Wn?yr.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):$a.call(e);return typeof e=="object"&&!Wn?wi(x):x}if(pg(e)){for(var O="<"+xu.call(String(e.nodeName)),I=e.attributes||[],R=0;R<I.length;R++)O+=" "+I[R].name+"="+Dh(eg(I[R].value),"double",s);return O+=">",e.childNodes&&e.childNodes.length&&(O+="..."),O+="</"+xu.call(String(e.nodeName))+">",O}if(ja(e)){if(e.length===0)return"[]";var T=us(e,v);return p&&!vg(T)?"["+Fa(T,p)+"]":"[ "+Zt.call(T,", ")+" ]"}if(rg(e)){var N=us(e,v);return!("cause"in Error.prototype)&&"cause"in e&&!$h.call(e,"cause")?"{ ["+String(e)+"] "+Zt.call(Iu.call("[cause]: "+v(e.cause),N),", ")+" }":N.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Zt.call(N,", ")+" }"}if(typeof e=="object"&&o){if(Tu&&typeof e[Tu]=="function"&&Da)return Da(e,{depth:d-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(ug(e)){var k=[];return Eu&&Eu.call(e,function(m,c){k.push(v(c,e,!0)+" => "+v(m,e))}),Lu("Map",Ts.call(e),k,p)}if(fg(e)){var P=[];return Mu&&Mu.call(e,function(m){P.push(v(m,e))}),Lu("Set",Ns.call(e),P,p)}if(lg(e))return ia("WeakMap");if(dg(e))return ia("WeakSet");if(hg(e))return ia("WeakRef");if(ig(e))return wi(v(Number(e)));if(og(e))return wi(v(Pa.call(e)));if(sg(e))return wi(G0.call(e));if(ng(e))return wi(v(String(e)));if(e===F)return typeof window<"u"?"{ [object Window] }":"{ [object global] }";if(!tg(e)&&!Nu(e)){var W=us(e,v),ee=Au?Au(e)===Object.prototype:e instanceof Object||e.constructor===Object,D=e instanceof Object?"":"null prototype",z=!ee&&pt&&Object(e)===e&&pt in e?fc.call(Mr(e),8,-1):D?"Object":"",U=ee||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",q=U+(z||D?"["+Zt.call(Iu.call([],z||[],D||[]),": ")+"] ":"");return W.length===0?q+"{}":p?q+"{"+Fa(W,p)+"}":q+"{ "+Zt.call(W,", ")+" }"}return String(e)};function Dh(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function eg(t){return yr.call(String(t),/"/g,"&quot;")}function ja(t){return Mr(t)==="[object Array]"&&(!pt||!(typeof t=="object"&&pt in t))}function tg(t){return Mr(t)==="[object Date]"&&(!pt||!(typeof t=="object"&&pt in t))}function Nu(t){return Mr(t)==="[object RegExp]"&&(!pt||!(typeof t=="object"&&pt in t))}function rg(t){return Mr(t)==="[object Error]"&&(!pt||!(typeof t=="object"&&pt in t))}function ng(t){return Mr(t)==="[object String]"&&(!pt||!(typeof t=="object"&&pt in t))}function ig(t){return Mr(t)==="[object Number]"&&(!pt||!(typeof t=="object"&&pt in t))}function sg(t){return Mr(t)==="[object Boolean]"&&(!pt||!(typeof t=="object"&&pt in t))}function jh(t){if(Wn)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!$a)return!1;try{return $a.call(t),!0}catch{}return!1}function og(t){if(!t||typeof t!="object"||!Pa)return!1;try{return Pa.call(t),!0}catch{}return!1}var ag=Object.prototype.hasOwnProperty||function(t){return t in this};function pr(t,e){return ag.call(t,e)}function Mr(t){return J0.call(t)}function cg(t){if(t.name)return t.name;var e=Q0.call(Z0.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Fh(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function ug(t){if(!Ts||!t||typeof t!="object")return!1;try{Ts.call(t);try{Ns.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function lg(t){if(!xi||!t||typeof t!="object")return!1;try{xi.call(t,xi);try{Ii.call(t,Ii)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function hg(t){if(!Cu||!t||typeof t!="object")return!1;try{return Cu.call(t),!0}catch{}return!1}function fg(t){if(!Ns||!t||typeof t!="object")return!1;try{Ns.call(t);try{Ts.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function dg(t){if(!Ii||!t||typeof t!="object")return!1;try{Ii.call(t,Ii);try{xi.call(t,xi)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function pg(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Bh(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Bh(fc.call(t,0,e.maxStringLength),e)+n}var i=yr.call(yr.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,gg);return Dh(i,"single",e)}function gg(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Y0.call(e.toString(16))}function wi(t){return"Object("+t+")"}function ia(t){return t+" { ? }"}function Lu(t,e,r,n){var i=n?Fa(r,n):Zt.call(r,", ");return t+" ("+e+") {"+i+"}"}function vg(t){for(var e=0;e<t.length;e++)if(Fh(t[e],`
`)>=0)return!1;return!0}function yg(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Zt.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Zt.call(Array(e+1),r)}}function Fa(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Zt.call(t,","+r)+`
`+e.prev}function us(t,e){var r=ja(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=pr(t,i)?e(t[i],t):""}var s=typeof na=="function"?na(t):[],o;if(Wn){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var u in t)pr(t,u)&&(r&&String(Number(u))===u&&u<t.length||Wn&&o["$"+u]instanceof Symbol||(Ph.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if(typeof na=="function")for(var l=0;l<s.length;l++)$h.call(t,s[l])&&n.push("["+e(s[l])+"]: "+e(t[s[l]],t));return n}var dc=uc,ii=H0,mg=X0,bg=dc("%TypeError%"),ls=dc("%WeakMap%",!0),hs=dc("%Map%",!0),wg=ii("WeakMap.prototype.get",!0),_g=ii("WeakMap.prototype.set",!0),Sg=ii("WeakMap.prototype.has",!0),Eg=ii("Map.prototype.get",!0),Mg=ii("Map.prototype.set",!0),Cg=ii("Map.prototype.has",!0),pc=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},xg=function(t,e){var r=pc(t,e);return r&&r.value},Ig=function(t,e,r){var n=pc(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},Rg=function(t,e){return!!pc(t,e)},Ag=function(){var e,r,n,i={assert:function(s){if(!i.has(s))throw new bg("Side channel does not contain "+mg(s))},get:function(s){if(ls&&s&&(typeof s=="object"||typeof s=="function")){if(e)return wg(e,s)}else if(hs){if(r)return Eg(r,s)}else if(n)return xg(n,s)},has:function(s){if(ls&&s&&(typeof s=="object"||typeof s=="function")){if(e)return Sg(e,s)}else if(hs){if(r)return Cg(r,s)}else if(n)return Rg(n,s);return!1},set:function(s,o){ls&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new ls),_g(e,s,o)):hs?(r||(r=new hs),Mg(r,s,o)):(n||(n={key:{},next:null}),Ig(n,s,o))}};return i},kg=String.prototype.replace,Og=/%20/g,sa={RFC1738:"RFC1738",RFC3986:"RFC3986"},gc={default:sa.RFC3986,formatters:{RFC1738:function(t){return kg.call(t,Og,"+")},RFC3986:function(t){return String(t)}},RFC1738:sa.RFC1738,RFC3986:sa.RFC3986},Tg=gc,oa=Object.prototype.hasOwnProperty,Wr=Array.isArray,Ht=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Ng=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(Wr(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);r.obj[r.prop]=i}}},Vh=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},Lg=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(Wr(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!oa.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return Wr(e)&&!Wr(r)&&(i=Vh(e,n)),Wr(e)&&Wr(r)?(r.forEach(function(s,o){if(oa.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,n):e.push(s)}else e[o]=s}),e):Object.keys(r).reduce(function(s,o){var a=r[o];return oa.call(s,o)?s[o]=t(s[o],a,n):s[o]=a,s},i)},Pg=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},$g=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Dg=function(e,r,n,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var a="",u=0;u<o.length;++u){var l=o.charCodeAt(u);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||s===Tg.RFC1738&&(l===40||l===41)){a+=o.charAt(u);continue}if(l<128){a=a+Ht[l];continue}if(l<2048){a=a+(Ht[192|l>>6]+Ht[128|l&63]);continue}if(l<55296||l>=57344){a=a+(Ht[224|l>>12]+Ht[128|l>>6&63]+Ht[128|l&63]);continue}u+=1,l=65536+((l&1023)<<10|o.charCodeAt(u)&1023),a+=Ht[240|l>>18]+Ht[128|l>>12&63]+Ht[128|l>>6&63]+Ht[128|l&63]}return a},jg=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var s=r[i],o=s.obj[s.prop],a=Object.keys(o),u=0;u<a.length;++u){var l=a[u],d=o[l];typeof d=="object"&&d!==null&&n.indexOf(d)===-1&&(r.push({obj:o,prop:l}),n.push(d))}return Ng(r),e},Fg=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Bg=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Vg=function(e,r){return[].concat(e,r)},Wg=function(e,r){if(Wr(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)},Wh={arrayToObject:Vh,assign:Pg,combine:Vg,compact:jg,decode:$g,encode:Dg,isBuffer:Bg,isRegExp:Fg,maybeMap:Wg,merge:Lg},Hh=Ag,Ms=Wh,Ri=gc,Hg=Object.prototype.hasOwnProperty,Pu={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},ir=Array.isArray,zg=Array.prototype.push,zh=function(t,e){zg.apply(t,ir(e)?e:[e])},Ug=Date.prototype.toISOString,$u=Ri.default,dt={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Ms.encode,encodeValuesOnly:!1,format:$u,formatter:Ri.formatters[$u],indices:!1,serializeDate:function(e){return Ug.call(e)},skipNulls:!1,strictNullHandling:!1},qg=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},aa={},Gg=function t(e,r,n,i,s,o,a,u,l,d,p,v,S,M,x,O){for(var I=e,R=O,T=0,N=!1;(R=R.get(aa))!==void 0&&!N;){var k=R.get(e);if(T+=1,typeof k<"u"){if(k===T)throw new RangeError("Cyclic object value");N=!0}typeof R.get(aa)>"u"&&(T=0)}if(typeof u=="function"?I=u(r,I):I instanceof Date?I=p(I):n==="comma"&&ir(I)&&(I=Ms.maybeMap(I,function(g){return g instanceof Date?p(g):g})),I===null){if(s)return a&&!M?a(r,dt.encoder,x,"key",v):r;I=""}if(qg(I)||Ms.isBuffer(I)){if(a){var P=M?r:a(r,dt.encoder,x,"key",v);return[S(P)+"="+S(a(I,dt.encoder,x,"value",v))]}return[S(r)+"="+S(String(I))]}var W=[];if(typeof I>"u")return W;var ee;if(n==="comma"&&ir(I))M&&a&&(I=Ms.maybeMap(I,a)),ee=[{value:I.length>0?I.join(",")||null:void 0}];else if(ir(u))ee=u;else{var D=Object.keys(I);ee=l?D.sort(l):D}for(var z=i&&ir(I)&&I.length===1?r+"[]":r,U=0;U<ee.length;++U){var q=ee[U],m=typeof q=="object"&&typeof q.value<"u"?q.value:I[q];if(!(o&&m===null)){var c=ir(I)?typeof n=="function"?n(z,q):z:z+(d?"."+q:"["+q+"]");O.set(e,T);var f=Hh();f.set(aa,O),zh(W,t(m,c,n,i,s,o,n==="comma"&&M&&ir(I)?null:a,u,l,d,p,v,S,M,x,f))}}return W},Jg=function(e){if(!e)return dt;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||dt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Ri.default;if(typeof e.format<"u"){if(!Hg.call(Ri.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=Ri.formatters[n],s=dt.filter;return(typeof e.filter=="function"||ir(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:dt.addQueryPrefix,allowDots:typeof e.allowDots>"u"?dt.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:dt.charsetSentinel,delimiter:typeof e.delimiter>"u"?dt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:dt.encode,encoder:typeof e.encoder=="function"?e.encoder:dt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:dt.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:dt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:dt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:dt.strictNullHandling}},Zg=function(t,e){var r=t,n=Jg(e),i,s;typeof n.filter=="function"?(s=n.filter,r=s("",r)):ir(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof r!="object"||r===null)return"";var a;e&&e.arrayFormat in Pu?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var u=Pu[a];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=u==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var d=Hh(),p=0;p<i.length;++p){var v=i[p];n.skipNulls&&r[v]===null||zh(o,Gg(r[v],v,u,l,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,d))}var S=o.join(n.delimiter),M=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?M+="utf8=%26%2310003%3B&":M+="utf8=%E2%9C%93&"),S.length>0?M+S:""},Hn=Wh,Ba=Object.prototype.hasOwnProperty,Qg=Array.isArray,nt={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Hn.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Yg=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},Uh=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Kg="utf8=%26%2310003%3B",Xg="utf8=%E2%9C%93",ev=function(e,r){var n={__proto__:null},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,s),a=-1,u,l=r.charset;if(r.charsetSentinel)for(u=0;u<o.length;++u)o[u].indexOf("utf8=")===0&&(o[u]===Xg?l="utf-8":o[u]===Kg&&(l="iso-8859-1"),a=u,u=o.length);for(u=0;u<o.length;++u)if(u!==a){var d=o[u],p=d.indexOf("]="),v=p===-1?d.indexOf("="):p+1,S,M;v===-1?(S=r.decoder(d,nt.decoder,l,"key"),M=r.strictNullHandling?null:""):(S=r.decoder(d.slice(0,v),nt.decoder,l,"key"),M=Hn.maybeMap(Uh(d.slice(v+1),r),function(x){return r.decoder(x,nt.decoder,l,"value")})),M&&r.interpretNumericEntities&&l==="iso-8859-1"&&(M=Yg(M)),d.indexOf("[]=")>-1&&(M=Qg(M)?[M]:M),Ba.call(n,S)?n[S]=Hn.combine(n[S],M):n[S]=M}return n},tv=function(t,e,r,n){for(var i=n?e:Uh(e,r),s=t.length-1;s>=0;--s){var o,a=t[s];if(a==="[]"&&r.parseArrays)o=[].concat(i);else{o=r.plainObjects?Object.create(null):{};var u=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,l=parseInt(u,10);!r.parseArrays&&u===""?o={0:i}:!isNaN(l)&&a!==u&&String(l)===u&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(o=[],o[l]=i):u!=="__proto__"&&(o[u]=i)}i=o}return i},rv=function(e,r,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,u=n.depth>0&&o.exec(s),l=u?s.slice(0,u.index):s,d=[];if(l){if(!n.plainObjects&&Ba.call(Object.prototype,l)&&!n.allowPrototypes)return;d.push(l)}for(var p=0;n.depth>0&&(u=a.exec(s))!==null&&p<n.depth;){if(p+=1,!n.plainObjects&&Ba.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;d.push(u[1])}return u&&d.push("["+s.slice(u.index)+"]"),tv(d,r,n,i)}},nv=function(e){if(!e)return nt;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?nt.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?nt.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:nt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:nt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:nt.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:nt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:nt.comma,decoder:typeof e.decoder=="function"?e.decoder:nt.decoder,delimiter:typeof e.delimiter=="string"||Hn.isRegExp(e.delimiter)?e.delimiter:nt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:nt.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:nt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:nt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:nt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:nt.strictNullHandling}},iv=function(t,e){var r=nv(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?ev(t,r):t,i=r.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],u=rv(a,n[a],r,typeof t=="string");i=Hn.merge(i,u,r)}return r.allowSparse===!0?i:Hn.compact(i)},sv=Zg,ov=iv,av=gc,cv={formats:av,parse:ov,stringify:sv},Hi={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ProviderType=t.RegExpString=t.IntNumber=t.BigIntString=t.AddressString=t.HexString=t.OpaqueType=void 0;function e(){return n=>n}t.OpaqueType=e,t.HexString=e(),t.AddressString=e(),t.BigIntString=e();function r(n){return Math.floor(n)}t.IntNumber=r,t.RegExpString=e(),function(n){n.CoinbaseWallet="CoinbaseWallet",n.MetaMask="MetaMask",n.Unselected=""}(t.ProviderType||(t.ProviderType={}))})(Hi);var uv=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($,"__esModule",{value:!0});$.isInIFrame=$.createQrUrl=$.getFavicon=$.range=$.isBigNumber=$.ensureParsedJSONObject=$.ensureBN=$.ensureRegExpString=$.ensureIntNumber=$.ensureBuffer=$.ensureAddressString=$.ensureEvenLengthHexString=$.ensureHexString=$.isHexString=$.prepend0x=$.strip0x=$.has0xPrefix=$.hexStringFromIntNumber=$.intNumberFromHexString=$.bigIntStringFromBN=$.hexStringFromBuffer=$.hexStringToUint8Array=$.uint8ArrayToHex=$.randomBytesHex=void 0;const gr=uv(Zs),lv=cv,on=Vi,Tt=Hi,qh=/^[0-9]*$/,Gh=/^[a-f0-9]*$/;function hv(t){return Jh(crypto.getRandomValues(new Uint8Array(t)))}$.randomBytesHex=hv;function Jh(t){return[...t].map(e=>e.toString(16).padStart(2,"0")).join("")}$.uint8ArrayToHex=Jh;function fv(t){return new Uint8Array(t.match(/.{1,2}/g).map(e=>parseInt(e,16)))}$.hexStringToUint8Array=fv;function dv(t,e=!1){const r=t.toString("hex");return(0,Tt.HexString)(e?"0x"+r:r)}$.hexStringFromBuffer=dv;function pv(t){return(0,Tt.BigIntString)(t.toString(10))}$.bigIntStringFromBN=pv;function gv(t){return(0,Tt.IntNumber)(new gr.default(Ui(t,!1),16).toNumber())}$.intNumberFromHexString=gv;function vv(t){return(0,Tt.HexString)("0x"+new gr.default(t).toString(16))}$.hexStringFromIntNumber=vv;function vc(t){return t.startsWith("0x")||t.startsWith("0X")}$.has0xPrefix=vc;function Ks(t){return vc(t)?t.slice(2):t}$.strip0x=Ks;function Zh(t){return vc(t)?"0x"+t.slice(2):"0x"+t}$.prepend0x=Zh;function zi(t){if(typeof t!="string")return!1;const e=Ks(t).toLowerCase();return Gh.test(e)}$.isHexString=zi;function Qh(t,e=!1){if(typeof t=="string"){const r=Ks(t).toLowerCase();if(Gh.test(r))return(0,Tt.HexString)(e?"0x"+r:r)}throw on.standardErrors.rpc.invalidParams(`"${String(t)}" is not a hexadecimal string`)}$.ensureHexString=Qh;function Ui(t,e=!1){let r=Qh(t,!1);return r.length%2===1&&(r=(0,Tt.HexString)("0"+r)),e?(0,Tt.HexString)("0x"+r):r}$.ensureEvenLengthHexString=Ui;function yv(t){if(typeof t=="string"){const e=Ks(t).toLowerCase();if(zi(e)&&e.length===40)return(0,Tt.AddressString)(Zh(e))}throw on.standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(t)}`)}$.ensureAddressString=yv;function mv(t){if(Buffer.isBuffer(t))return t;if(typeof t=="string")if(zi(t)){const e=Ui(t,!1);return Buffer.from(e,"hex")}else return Buffer.from(t,"utf8");throw on.standardErrors.rpc.invalidParams(`Not binary data: ${String(t)}`)}$.ensureBuffer=mv;function Yh(t){if(typeof t=="number"&&Number.isInteger(t))return(0,Tt.IntNumber)(t);if(typeof t=="string"){if(qh.test(t))return(0,Tt.IntNumber)(Number(t));if(zi(t))return(0,Tt.IntNumber)(new gr.default(Ui(t,!1),16).toNumber())}throw on.standardErrors.rpc.invalidParams(`Not an integer: ${String(t)}`)}$.ensureIntNumber=Yh;function bv(t){if(t instanceof RegExp)return(0,Tt.RegExpString)(t.toString());throw on.standardErrors.rpc.invalidParams(`Not a RegExp: ${String(t)}`)}$.ensureRegExpString=bv;function wv(t){if(t!==null&&(gr.default.isBN(t)||Kh(t)))return new gr.default(t.toString(10),10);if(typeof t=="number")return new gr.default(Yh(t));if(typeof t=="string"){if(qh.test(t))return new gr.default(t,10);if(zi(t))return new gr.default(Ui(t,!1),16)}throw on.standardErrors.rpc.invalidParams(`Not an integer: ${String(t)}`)}$.ensureBN=wv;function _v(t){if(typeof t=="string")return JSON.parse(t);if(typeof t=="object")return t;throw on.standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(t)}`)}$.ensureParsedJSONObject=_v;function Kh(t){if(t==null||typeof t.constructor!="function")return!1;const{constructor:e}=t;return typeof e.config=="function"&&typeof e.EUCLID=="number"}$.isBigNumber=Kh;function Sv(t,e){return Array.from({length:e-t},(r,n)=>t+n)}$.range=Sv;function Ev(){const t=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:e,host:r}=document.location,n=t?t.getAttribute("href"):null;return!n||n.startsWith("javascript:")?null:n.startsWith("http://")||n.startsWith("https://")||n.startsWith("data:")?n:n.startsWith("//")?e+n:`${e}//${r}${n}`}$.getFavicon=Ev;function Mv(t,e,r,n,i,s){const o=n?"parent-id":"id",a=(0,lv.stringify)({[o]:t,secret:e,server:r,v:i,chainId:s});return`${r}/#/link?${a}`}$.createQrUrl=Mv;function Cv(){try{return window.frameElement!==null}catch{return!1}}$.isInIFrame=Cv;Object.defineProperty(ni,"__esModule",{value:!0});ni.Session=void 0;const Du=zp,ju=$,Fu="session:id",Bu="session:secret",Vu="session:linked";class yc{constructor(e,r,n,i){this._storage=e,this._id=r||(0,ju.randomBytesHex)(16),this._secret=n||(0,ju.randomBytesHex)(32),this._key=new Du.sha256().update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!i}static load(e){const r=e.getItem(Fu),n=e.getItem(Vu),i=e.getItem(Bu);return r&&i?new yc(e,r,i,n==="1"):null}static hash(e){return new Du.sha256().update(e).digest("hex")}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this._storage.setItem(Fu,this._id),this._storage.setItem(Bu,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(Vu,this._linked?"1":"0")}}ni.Session=yc;var Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.WalletSDKRelayAbstract=Bt.APP_VERSION_KEY=Bt.LOCAL_STORAGE_ADDRESSES_KEY=Bt.WALLET_USER_NAME_KEY=void 0;const Wu=Vi;Bt.WALLET_USER_NAME_KEY="walletUsername";Bt.LOCAL_STORAGE_ADDRESSES_KEY="Addresses";Bt.APP_VERSION_KEY="AppVersion";class xv{async makeEthereumJSONRPCRequest(e,r){if(!r)throw new Error("Error: No jsonRpcUrl provided");return window.fetch(r,{method:"POST",body:JSON.stringify(e),mode:"cors",headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>{if(!n)throw Wu.standardErrors.rpc.parse({});const i=n,{error:s}=i;if(s)throw(0,Wu.serializeError)(s,e.method);return i})}}Bt.WalletSDKRelayAbstract=xv;const{Transform:Iv}=Sh;var Rv=t=>class Xh extends Iv{constructor(r,n,i,s,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=s,this._options=o,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new Xh(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const{Transform:Av}=Sh;var kv=t=>class ef extends Av{constructor(r,n,i,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=s,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new ef(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const Ov=Rv,Tv=kv;var Nv=function(t){const e=Ov(t),r=Tv(t);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new e(1152,448,null,224,i);case"keccak256":return new e(1088,512,null,256,i);case"keccak384":return new e(832,768,null,384,i);case"keccak512":return new e(576,1024,null,512,i);case"sha3-224":return new e(1152,448,6,224,i);case"sha3-256":return new e(1088,512,6,256,i);case"sha3-384":return new e(832,768,6,384,i);case"sha3-512":return new e(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}},tf={};const Hu=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];tf.p1600=function(t){for(let e=0;e<24;++e){const r=t[0]^t[10]^t[20]^t[30]^t[40],n=t[1]^t[11]^t[21]^t[31]^t[41],i=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],o=t[4]^t[14]^t[24]^t[34]^t[44],a=t[5]^t[15]^t[25]^t[35]^t[45],u=t[6]^t[16]^t[26]^t[36]^t[46],l=t[7]^t[17]^t[27]^t[37]^t[47],d=t[8]^t[18]^t[28]^t[38]^t[48],p=t[9]^t[19]^t[29]^t[39]^t[49];let v=d^(i<<1|s>>>31),S=p^(s<<1|i>>>31);const M=t[0]^v,x=t[1]^S,O=t[10]^v,I=t[11]^S,R=t[20]^v,T=t[21]^S,N=t[30]^v,k=t[31]^S,P=t[40]^v,W=t[41]^S;v=r^(o<<1|a>>>31),S=n^(a<<1|o>>>31);const ee=t[2]^v,D=t[3]^S,z=t[12]^v,U=t[13]^S,q=t[22]^v,m=t[23]^S,c=t[32]^v,f=t[33]^S,g=t[42]^v,y=t[43]^S;v=i^(u<<1|l>>>31),S=s^(l<<1|u>>>31);const w=t[4]^v,E=t[5]^S,C=t[14]^v,b=t[15]^S,h=t[24]^v,_=t[25]^S,L=t[34]^v,j=t[35]^S,H=t[44]^v,et=t[45]^S;v=o^(d<<1|p>>>31),S=a^(p<<1|d>>>31);const ie=t[6]^v,ae=t[7]^S,di=t[16]^v,Le=t[17]^S,Pe=t[26]^v,pi=t[27]^S,$e=t[36]^v,De=t[37]^S,gi=t[46]^v,je=t[47]^S;v=u^(r<<1|n>>>31),S=l^(n<<1|r>>>31);const Fe=t[8]^v,vi=t[9]^S,Be=t[18]^v,Ve=t[19]^S,yi=t[28]^v,We=t[29]^S,He=t[38]^v,mi=t[39]^S,ze=t[48]^v,Ue=t[49]^S,hn=M,ue=x,le=I<<4|O>>>28,fn=O<<4|I>>>28,he=R<<3|T>>>29,fe=T<<3|R>>>29,dn=k<<9|N>>>23,de=N<<9|k>>>23,pe=P<<18|W>>>14,pn=W<<18|P>>>14,ge=ee<<1|D>>>31,ve=D<<1|ee>>>31,gn=U<<12|z>>>20,ye=z<<12|U>>>20,me=q<<10|m>>>22,vn=m<<10|q>>>22,be=f<<13|c>>>19,we=c<<13|f>>>19,yn=g<<2|y>>>30,_e=y<<2|g>>>30,Se=E<<30|w>>>2,mn=w<<30|E>>>2,Ee=C<<6|b>>>26,Me=b<<6|C>>>26,bn=_<<11|h>>>21,Ce=h<<11|_>>>21,xe=L<<15|j>>>17,wn=j<<15|L>>>17,Ie=et<<29|H>>>3,Re=H<<29|et>>>3,_n=ie<<28|ae>>>4,Ae=ae<<28|ie>>>4,ke=Le<<23|di>>>9,Sn=di<<23|Le>>>9,Oe=Pe<<25|pi>>>7,Te=pi<<25|Pe>>>7,Cr=$e<<21|De>>>11,xr=De<<21|$e>>>11,Ir=je<<24|gi>>>8,Rr=gi<<24|je>>>8,Ar=Fe<<27|vi>>>5,kr=vi<<27|Fe>>>5,Or=Be<<20|Ve>>>12,Tr=Ve<<20|Be>>>12,Nr=We<<7|yi>>>25,Lr=yi<<7|We>>>25,Pr=He<<8|mi>>>24,$r=mi<<8|He>>>24,Dr=ze<<14|Ue>>>18,jr=Ue<<14|ze>>>18;t[0]=hn^~gn&bn,t[1]=ue^~ye&Ce,t[10]=_n^~Or&he,t[11]=Ae^~Tr&fe,t[20]=ge^~Ee&Oe,t[21]=ve^~Me&Te,t[30]=Ar^~le&me,t[31]=kr^~fn&vn,t[40]=Se^~ke&Nr,t[41]=mn^~Sn&Lr,t[2]=gn^~bn&Cr,t[3]=ye^~Ce&xr,t[12]=Or^~he&be,t[13]=Tr^~fe&we,t[22]=Ee^~Oe&Pr,t[23]=Me^~Te&$r,t[32]=le^~me&xe,t[33]=fn^~vn&wn,t[42]=ke^~Nr&dn,t[43]=Sn^~Lr&de,t[4]=bn^~Cr&Dr,t[5]=Ce^~xr&jr,t[14]=he^~be&Ie,t[15]=fe^~we&Re,t[24]=Oe^~Pr&pe,t[25]=Te^~$r&pn,t[34]=me^~xe&Ir,t[35]=vn^~wn&Rr,t[44]=Nr^~dn&yn,t[45]=Lr^~de&_e,t[6]=Cr^~Dr&hn,t[7]=xr^~jr&ue,t[16]=be^~Ie&_n,t[17]=we^~Re&Ae,t[26]=Pr^~pe&ge,t[27]=$r^~pn&ve,t[36]=xe^~Ir&Ar,t[37]=wn^~Rr&kr,t[46]=dn^~yn&Se,t[47]=de^~_e&mn,t[8]=Dr^~hn&gn,t[9]=jr^~ue&ye,t[18]=Ie^~_n&Or,t[19]=Re^~Ae&Tr,t[28]=pe^~ge&Ee,t[29]=pn^~ve&Me,t[38]=Ir^~Ar&le,t[39]=Rr^~kr&fn,t[48]=yn^~Se&ke,t[49]=_e^~mn&Sn,t[0]^=Hu[e*2],t[1]^=Hu[e*2+1]}};const Ls=tf;function si(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}si.prototype.initialize=function(t,e){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=t/8,this.count=0,this.squeezing=!1};si.prototype.absorb=function(t){for(let e=0;e<t.length;++e)this.state[~~(this.count/4)]^=t[e]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(Ls.p1600(this.state),this.count=0)};si.prototype.absorbLastFewBits=function(t){this.state[~~(this.count/4)]^=t<<8*(this.count%4),t&128&&this.count===this.blockSize-1&&Ls.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),Ls.p1600(this.state),this.count=0,this.squeezing=!0};si.prototype.squeeze=function(t){this.squeezing||this.absorbLastFewBits(1);const e=Buffer.alloc(t);for(let r=0;r<t;++r)e[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(Ls.p1600(this.state),this.count=0);return e};si.prototype.copy=function(t){for(let e=0;e<50;++e)t.state[e]=this.state[e];t.blockSize=this.blockSize,t.count=this.count,t.squeezing=this.squeezing};var Lv=si,Pv=Nv(Lv);const $v=Pv,Dv=Zs;function rf(t){return Buffer.allocUnsafe(t).fill(0)}function nf(t,e,r){const n=rf(e);return t=Xs(t),r?t.length<e?(t.copy(n),n):t.slice(0,e):t.length<e?(t.copy(n,e-t.length),n):t.slice(-e)}function jv(t,e){return nf(t,e,!0)}function Xs(t){if(!Buffer.isBuffer(t))if(Array.isArray(t))t=Buffer.from(t);else if(typeof t=="string")sf(t)?t=Buffer.from(Vv(of(t)),"hex"):t=Buffer.from(t);else if(typeof t=="number")t=intToBuffer(t);else if(t==null)t=Buffer.allocUnsafe(0);else if(Dv.isBN(t))t=t.toArrayLike(Buffer);else if(t.toArray)t=Buffer.from(t.toArray());else throw new Error("invalid type");return t}function Fv(t){return t=Xs(t),"0x"+t.toString("hex")}function Bv(t,e){return t=Xs(t),e||(e=256),$v("keccak"+e).update(t).digest()}function Vv(t){return t.length%2?"0"+t:t}function sf(t){return typeof t=="string"&&t.match(/^0x[0-9A-Fa-f]*$/)}function of(t){return typeof t=="string"&&t.startsWith("0x")?t.slice(2):t}var af={zeros:rf,setLength:nf,setLengthRight:jv,isHexString:sf,stripHexPrefix:of,toBuffer:Xs,bufferToHex:Fv,keccak:Bv};const Xr=af,Jr=Zs;function cf(t){return t.startsWith("int[")?"int256"+t.slice(3):t==="int"?"int256":t.startsWith("uint[")?"uint256"+t.slice(4):t==="uint"?"uint256":t.startsWith("fixed[")?"fixed128x128"+t.slice(5):t==="fixed"?"fixed128x128":t.startsWith("ufixed[")?"ufixed128x128"+t.slice(6):t==="ufixed"?"ufixed128x128":t}function Pn(t){return parseInt(/^\D+(\d+)$/.exec(t)[1],10)}function zu(t){var e=/^\D+(\d+)x(\d+)$/.exec(t);return[parseInt(e[1],10),parseInt(e[2],10)]}function uf(t){var e=t.match(/(.*)\[(.*?)\]$/);return e?e[2]===""?"dynamic":parseInt(e[2],10):null}function Hr(t){var e=typeof t;if(e==="string")return Xr.isHexString(t)?new Jr(Xr.stripHexPrefix(t),16):new Jr(t,10);if(e==="number")return new Jr(t);if(t.toArray)return t;throw new Error("Argument is not a number")}function Gt(t,e){var r,n,i,s;if(t==="address")return Gt("uint160",Hr(e));if(t==="bool")return Gt("uint8",e?1:0);if(t==="string")return Gt("bytes",new Buffer(e,"utf8"));if(Hv(t)){if(typeof e.length>"u")throw new Error("Not an array?");if(r=uf(t),r!=="dynamic"&&r!==0&&e.length>r)throw new Error("Elements exceed array size: "+r);i=[],t=t.slice(0,t.lastIndexOf("[")),typeof e=="string"&&(e=JSON.parse(e));for(s in e)i.push(Gt(t,e[s]));if(r==="dynamic"){var o=Gt("uint256",e.length);i.unshift(o)}return Buffer.concat(i)}else{if(t==="bytes")return e=new Buffer(e),i=Buffer.concat([Gt("uint256",e.length),e]),e.length%32!==0&&(i=Buffer.concat([i,Xr.zeros(32-e.length%32)])),i;if(t.startsWith("bytes")){if(r=Pn(t),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return Xr.setLengthRight(e,32)}else if(t.startsWith("uint")){if(r=Pn(t),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=Hr(e),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(t.startsWith("int")){if(r=Pn(t),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=Hr(e),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(t.startsWith("ufixed")){if(r=zu(t),n=Hr(e),n<0)throw new Error("Supplied ufixed is negative");return Gt("uint256",n.mul(new Jr(2).pow(new Jr(r[1]))))}else if(t.startsWith("fixed"))return r=zu(t),Gt("int256",Hr(e).mul(new Jr(2).pow(new Jr(r[1]))))}throw new Error("Unsupported or invalid type: "+t)}function Wv(t){return t==="string"||t==="bytes"||uf(t)==="dynamic"}function Hv(t){return t.lastIndexOf("]")===t.length-1}function zv(t,e){var r=[],n=[],i=32*t.length;for(var s in t){var o=cf(t[s]),a=e[s],u=Gt(o,a);Wv(o)?(r.push(Gt("uint256",i)),n.push(u),i+=u.length):r.push(u)}return Buffer.concat(r.concat(n))}function lf(t,e){if(t.length!==e.length)throw new Error("Number of types are not matching the values");for(var r,n,i=[],s=0;s<t.length;s++){var o=cf(t[s]),a=e[s];if(o==="bytes")i.push(a);else if(o==="string")i.push(new Buffer(a,"utf8"));else if(o==="bool")i.push(new Buffer(a?"01":"00","hex"));else if(o==="address")i.push(Xr.setLength(a,20));else if(o.startsWith("bytes")){if(r=Pn(o),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);i.push(Xr.setLengthRight(a,r))}else if(o.startsWith("uint")){if(r=Pn(o),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=Hr(a),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());i.push(n.toArrayLike(Buffer,"be",r/8))}else if(o.startsWith("int")){if(r=Pn(o),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=Hr(a),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());i.push(n.toTwos(r).toArrayLike(Buffer,"be",r/8))}else throw new Error("Unsupported or invalid type: "+o)}return Buffer.concat(i)}function Uv(t,e){return Xr.keccak(lf(t,e))}var qv={rawEncode:zv,solidityPack:lf,soliditySHA3:Uv};const Dt=af,Ai=qv,hf={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},ca={encodeData(t,e,r,n=!0){const i=["bytes32"],s=[this.hashType(t,r)];if(n){const o=(a,u,l)=>{if(r[u]!==void 0)return["bytes32",l==null?"0x0000000000000000000000000000000000000000000000000000000000000000":Dt.keccak(this.encodeData(u,l,r,n))];if(l===void 0)throw new Error(`missing value for field ${a} of type ${u}`);if(u==="bytes")return["bytes32",Dt.keccak(l)];if(u==="string")return typeof l=="string"&&(l=Buffer.from(l,"utf8")),["bytes32",Dt.keccak(l)];if(u.lastIndexOf("]")===u.length-1){const d=u.slice(0,u.lastIndexOf("[")),p=l.map(v=>o(a,d,v));return["bytes32",Dt.keccak(Ai.rawEncode(p.map(([v])=>v),p.map(([,v])=>v)))]}return[u,l]};for(const a of r[t]){const[u,l]=o(a.name,a.type,e[a.name]);i.push(u),s.push(l)}}else for(const o of r[t]){let a=e[o.name];if(a!==void 0)if(o.type==="bytes")i.push("bytes32"),a=Dt.keccak(a),s.push(a);else if(o.type==="string")i.push("bytes32"),typeof a=="string"&&(a=Buffer.from(a,"utf8")),a=Dt.keccak(a),s.push(a);else if(r[o.type]!==void 0)i.push("bytes32"),a=Dt.keccak(this.encodeData(o.type,a,r,n)),s.push(a);else{if(o.type.lastIndexOf("]")===o.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");i.push(o.type),s.push(a)}}return Ai.rawEncode(i,s)},encodeType(t,e){let r="",n=this.findTypeDependencies(t,e).filter(i=>i!==t);n=[t].concat(n.sort());for(const i of n){if(!e[i])throw new Error("No type definition specified: "+i);r+=i+"("+e[i].map(({name:o,type:a})=>a+" "+o).join(",")+")"}return r},findTypeDependencies(t,e,r=[]){if(t=t.match(/^\w*/)[0],r.includes(t)||e[t]===void 0)return r;r.push(t);for(const n of e[t])for(const i of this.findTypeDependencies(n.type,e,r))!r.includes(i)&&r.push(i);return r},hashStruct(t,e,r,n=!0){return Dt.keccak(this.encodeData(t,e,r,n))},hashType(t,e){return Dt.keccak(this.encodeType(t,e))},sanitizeData(t){const e={};for(const r in hf.properties)t[r]&&(e[r]=t[r]);return e.types&&(e.types=Object.assign({EIP712Domain:[]},e.types)),e},hash(t,e=!0){const r=this.sanitizeData(t),n=[Buffer.from("1901","hex")];return n.push(this.hashStruct("EIP712Domain",r.domain,r.types,e)),r.primaryType!=="EIP712Domain"&&n.push(this.hashStruct(r.primaryType,r.message,r.types,e)),Dt.keccak(Buffer.concat(n))}};var Gv={TYPED_MESSAGE_SCHEMA:hf,TypedDataUtils:ca,hashForSignTypedDataLegacy:function(t){return Jv(t.data)},hashForSignTypedData_v3:function(t){return ca.hash(t.data,!1)},hashForSignTypedData_v4:function(t){return ca.hash(t.data)}};function Jv(t){const e=new Error("Expect argument to be non-empty array");if(typeof t!="object"||!t.length)throw e;const r=t.map(function(s){return s.type==="bytes"?Dt.toBuffer(s.value):s.value}),n=t.map(function(s){return s.type}),i=t.map(function(s){if(!s.name)throw e;return s.type+" "+s.name});return Ai.soliditySHA3(["bytes32","bytes32"],[Ai.soliditySHA3(new Array(t.length).fill("string"),i),Ai.soliditySHA3(n,r)])}var zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.filterFromParam=zn.FilterPolyfill=void 0;const kn=Hi,gt=$,Zv=5*60*1e3,zr={jsonrpc:"2.0",id:0};class Qv{constructor(e){this.logFilters=new Map,this.blockFilters=new Set,this.pendingTransactionFilters=new Set,this.cursors=new Map,this.timeouts=new Map,this.nextFilterId=(0,kn.IntNumber)(1),this.provider=e}async newFilter(e){const r=ff(e),n=this.makeFilterId(),i=await this.setInitialCursorPosition(n,r.fromBlock);return console.log(`Installing new log filter(${n}):`,r,"initial cursor position:",i),this.logFilters.set(n,r),this.setFilterTimeout(n),(0,gt.hexStringFromIntNumber)(n)}async newBlockFilter(){const e=this.makeFilterId(),r=await this.setInitialCursorPosition(e,"latest");return console.log(`Installing new block filter (${e}) with initial cursor position:`,r),this.blockFilters.add(e),this.setFilterTimeout(e),(0,gt.hexStringFromIntNumber)(e)}async newPendingTransactionFilter(){const e=this.makeFilterId(),r=await this.setInitialCursorPosition(e,"latest");return console.log(`Installing new block filter (${e}) with initial cursor position:`,r),this.pendingTransactionFilters.add(e),this.setFilterTimeout(e),(0,gt.hexStringFromIntNumber)(e)}uninstallFilter(e){const r=(0,gt.intNumberFromHexString)(e);return console.log(`Uninstalling filter (${r})`),this.deleteFilter(r),!0}getFilterChanges(e){const r=(0,gt.intNumberFromHexString)(e);return this.timeouts.has(r)&&this.setFilterTimeout(r),this.logFilters.has(r)?this.getLogFilterChanges(r):this.blockFilters.has(r)?this.getBlockFilterChanges(r):this.pendingTransactionFilters.has(r)?this.getPendingTransactionFilterChanges(r):Promise.resolve(fs())}async getFilterLogs(e){const r=(0,gt.intNumberFromHexString)(e),n=this.logFilters.get(r);return n?this.sendAsyncPromise(Object.assign(Object.assign({},zr),{method:"eth_getLogs",params:[Uu(n)]})):fs()}makeFilterId(){return(0,kn.IntNumber)(++this.nextFilterId)}sendAsyncPromise(e){return new Promise((r,n)=>{this.provider.sendAsync(e,(i,s)=>{if(i)return n(i);if(Array.isArray(s)||s==null)return n(new Error(`unexpected response received: ${JSON.stringify(s)}`));r(s)})})}deleteFilter(e){console.log(`Deleting filter (${e})`),this.logFilters.delete(e),this.blockFilters.delete(e),this.pendingTransactionFilters.delete(e),this.cursors.delete(e),this.timeouts.delete(e)}async getLogFilterChanges(e){const r=this.logFilters.get(e),n=this.cursors.get(e);if(!n||!r)return fs();const i=await this.getCurrentBlockHeight(),s=r.toBlock==="latest"?i:r.toBlock;if(n>i||n>r.toBlock)return ds();console.log(`Fetching logs from ${n} to ${s} for filter ${e}`);const o=await this.sendAsyncPromise(Object.assign(Object.assign({},zr),{method:"eth_getLogs",params:[Uu(Object.assign(Object.assign({},r),{fromBlock:n,toBlock:s}))]}));if(Array.isArray(o.result)){const a=o.result.map(l=>(0,gt.intNumberFromHexString)(l.blockNumber||"0x0")),u=Math.max(...a);if(u&&u>n){const l=(0,kn.IntNumber)(u+1);console.log(`Moving cursor position for filter (${e}) from ${n} to ${l}`),this.cursors.set(e,l)}}return o}async getBlockFilterChanges(e){const r=this.cursors.get(e);if(!r)return fs();const n=await this.getCurrentBlockHeight();if(r>n)return ds();console.log(`Fetching blocks from ${r} to ${n} for filter (${e})`);const i=(await Promise.all((0,gt.range)(r,n+1).map(o=>this.getBlockHashByNumber((0,kn.IntNumber)(o))))).filter(o=>!!o),s=(0,kn.IntNumber)(r+i.length);return console.log(`Moving cursor position for filter (${e}) from ${r} to ${s}`),this.cursors.set(e,s),Object.assign(Object.assign({},zr),{result:i})}async getPendingTransactionFilterChanges(e){return Promise.resolve(ds())}async setInitialCursorPosition(e,r){const n=await this.getCurrentBlockHeight(),i=typeof r=="number"&&r>n?r:n;return this.cursors.set(e,i),i}setFilterTimeout(e){const r=this.timeouts.get(e);r&&window.clearTimeout(r);const n=window.setTimeout(()=>{console.log(`Filter (${e}) timed out`),this.deleteFilter(e)},Zv);this.timeouts.set(e,n)}async getCurrentBlockHeight(){const{result:e}=await this.sendAsyncPromise(Object.assign(Object.assign({},zr),{method:"eth_blockNumber",params:[]}));return(0,gt.intNumberFromHexString)((0,gt.ensureHexString)(e))}async getBlockHashByNumber(e){const r=await this.sendAsyncPromise(Object.assign(Object.assign({},zr),{method:"eth_getBlockByNumber",params:[(0,gt.hexStringFromIntNumber)(e),!1]}));return r.result&&typeof r.result.hash=="string"?(0,gt.ensureHexString)(r.result.hash):null}}zn.FilterPolyfill=Qv;function ff(t){return{fromBlock:qu(t.fromBlock),toBlock:qu(t.toBlock),addresses:t.address===void 0?null:Array.isArray(t.address)?t.address:[t.address],topics:t.topics||[]}}zn.filterFromParam=ff;function Uu(t){const e={fromBlock:Gu(t.fromBlock),toBlock:Gu(t.toBlock),topics:t.topics};return t.addresses!==null&&(e.address=t.addresses),e}function qu(t){if(t===void 0||t==="latest"||t==="pending")return"latest";if(t==="earliest")return(0,kn.IntNumber)(0);if((0,gt.isHexString)(t))return(0,gt.intNumberFromHexString)(t);throw new Error(`Invalid block option: ${String(t)}`)}function Gu(t){return t==="latest"?t:(0,gt.hexStringFromIntNumber)(t)}function fs(){return Object.assign(Object.assign({},zr),{error:{code:-32e3,message:"filter not found"}})}function ds(){return Object.assign(Object.assign({},zr),{result:[]})}var df={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.JSONRPCMethod=void 0,function(e){e.eth_accounts="eth_accounts",e.eth_coinbase="eth_coinbase",e.net_version="net_version",e.eth_chainId="eth_chainId",e.eth_uninstallFilter="eth_uninstallFilter",e.eth_requestAccounts="eth_requestAccounts",e.eth_sign="eth_sign",e.eth_ecRecover="eth_ecRecover",e.personal_sign="personal_sign",e.personal_ecRecover="personal_ecRecover",e.eth_signTransaction="eth_signTransaction",e.eth_sendRawTransaction="eth_sendRawTransaction",e.eth_sendTransaction="eth_sendTransaction",e.eth_signTypedData_v1="eth_signTypedData_v1",e.eth_signTypedData_v2="eth_signTypedData_v2",e.eth_signTypedData_v3="eth_signTypedData_v3",e.eth_signTypedData_v4="eth_signTypedData_v4",e.eth_signTypedData="eth_signTypedData",e.cbWallet_arbitrary="walletlink_arbitrary",e.wallet_addEthereumChain="wallet_addEthereumChain",e.wallet_switchEthereumChain="wallet_switchEthereumChain",e.wallet_watchAsset="wallet_watchAsset",e.eth_subscribe="eth_subscribe",e.eth_unsubscribe="eth_unsubscribe",e.eth_newFilter="eth_newFilter",e.eth_newBlockFilter="eth_newBlockFilter",e.eth_newPendingTransactionFilter="eth_newPendingTransactionFilter",e.eth_getFilterChanges="eth_getFilterChanges",e.eth_getFilterLogs="eth_getFilterLogs"}(t.JSONRPCMethod||(t.JSONRPCMethod={}))})(df);var eo={},pf={},to={},mc=Yv;function Yv(t){t=t||{};var e=t.max||Number.MAX_SAFE_INTEGER,r=typeof t.start<"u"?t.start:Math.floor(Math.random()*e);return function(){return r=r%e,r++}}const Ju=(t,e)=>function(){const r=e.promiseModule,n=new Array(arguments.length);for(let i=0;i<arguments.length;i++)n[i]=arguments[i];return new r((i,s)=>{e.errorFirst?n.push(function(o,a){if(e.multiArgs){const u=new Array(arguments.length-1);for(let l=1;l<arguments.length;l++)u[l-1]=arguments[l];o?(u.unshift(o),s(u)):i(u)}else o?s(o):i(a)}):n.push(function(o){if(e.multiArgs){const a=new Array(arguments.length-1);for(let u=0;u<arguments.length;u++)a[u]=arguments[u];i(a)}else i(o)}),t.apply(this,n)})};var Kv=(t,e)=>{e=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},e);const r=i=>{const s=o=>typeof o=="string"?i===o:o.test(i);return e.include?e.include.some(s):!e.exclude.some(s)};let n;typeof t=="function"?n=function(){return e.excludeMain?t.apply(this,arguments):Ju(t,e).apply(this,arguments)}:n=Object.create(Object.getPrototypeOf(t));for(const i in t){const s=t[i];n[i]=typeof s=="function"&&r(i)?Ju(s,e):s}return n},qi={},Xv=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qi,"__esModule",{value:!0});qi.BaseBlockTracker=void 0;const ey=Xv(sn),ty=1e3,ry=(t,e)=>t+e,Zu=["sync","latest"];class ny extends ey.default{constructor(e){super(),this._blockResetDuration=e.blockResetDuration||20*ty,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}async destroy(){this._cancelBlockResetTimeout(),await this._maybeEnd(),super.removeAllListeners()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){return this._currentBlock?this._currentBlock:await new Promise(r=>this.once("latest",r))}removeAllListeners(e){return e?super.removeAllListeners(e):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener(),this}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(e){Zu.includes(e)&&this._maybeStart()}_onRemoveListener(){this._getBlockTrackerEventCount()>0||this._maybeEnd()}async _maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),await this._start(),this.emit("_started"))}async _maybeEnd(){this._isRunning&&(this._isRunning=!1,this._setupBlockResetTimeout(),await this._end(),this.emit("_ended"))}_getBlockTrackerEventCount(){return Zu.map(e=>this.listenerCount(e)).reduce(ry)}_newPotentialLatest(e){const r=this._currentBlock;r&&Qu(e)<=Qu(r)||this._setCurrentBlock(e)}_setCurrentBlock(e){const r=this._currentBlock;this._currentBlock=e,this.emit("latest",e),this.emit("sync",{oldBlock:r,newBlock:e})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){this._blockResetTimeout&&clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}qi.BaseBlockTracker=ny;function Qu(t){return Number.parseInt(t,16)}var gf={},vf={},lt={};class yf extends TypeError{constructor(e,r){let n;const{message:i,explanation:s,...o}=e,{path:a}=e,u=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??u),s!=null&&(this.cause=u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}}function iy(t){return Nt(t)&&typeof t[Symbol.iterator]=="function"}function Nt(t){return typeof t=="object"&&t!=null}function Yu(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function rt(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function sy(t){const{done:e,value:r}=t.next();return e?void 0:r}function oy(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=r,{refinement:a,message:u=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${rt(n)}\``}=t;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:u}}function*Va(t,e,r,n){iy(t)||(t=[t]);for(const i of t){const s=oy(i,e,r,n);s&&(yield s)}}function*bc(t,e,r={}){const{path:n=[],branch:i=[t],coerce:s=!1,mask:o=!1}=r,a={path:n,branch:i};if(s&&(t=e.coercer(t,a),o&&e.type!=="type"&&Nt(e.schema)&&Nt(t)&&!Array.isArray(t)))for(const l in t)e.schema[l]===void 0&&delete t[l];let u="valid";for(const l of e.validator(t,a))l.explanation=r.message,u="not_valid",yield[l,void 0];for(let[l,d,p]of e.entries(t,a)){const v=bc(d,p,{path:l===void 0?n:[...n,l],branch:l===void 0?i:[...i,d],coerce:s,mask:o,message:r.message});for(const S of v)S[0]?(u=S[0].refinement!=null?"not_refined":"not_valid",yield[S[0],void 0]):s&&(d=S[1],l===void 0?t=d:t instanceof Map?t.set(l,d):t instanceof Set?t.add(d):Nt(t)&&(d!==void 0||l in t)&&(t[l]=d))}if(u!=="not_valid")for(const l of e.refiner(t,a))l.explanation=r.message,u="not_refined",yield[l,void 0];u==="valid"&&(yield[void 0,t])}class Ke{constructor(e){const{type:r,schema:n,validator:i,refiner:s,coercer:o=u=>u,entries:a=function*(){}}=e;this.type=r,this.schema=n,this.entries=a,this.coercer=o,i?this.validator=(u,l)=>{const d=i(u,l);return Va(d,l,this,u)}:this.validator=()=>[],s?this.refiner=(u,l)=>{const d=s(u,l);return Va(d,l,this,u)}:this.refiner=()=>[]}assert(e,r){return mf(e,this,r)}create(e,r){return bf(e,this,r)}is(e){return wc(e,this)}mask(e,r){return wf(e,this,r)}validate(e,r={}){return oi(e,this,r)}}function mf(t,e,r){const n=oi(t,e,{message:r});if(n[0])throw n[0]}function bf(t,e,r){const n=oi(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function wf(t,e,r){const n=oi(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function wc(t,e){return!oi(t,e)[0]}function oi(t,e,r={}){const n=bc(t,e,r),i=sy(n);return i[0]?[new yf(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function ay(...t){const e=t[0].type==="type",r=t.map(i=>i.schema),n=Object.assign({},...r);return e?Sc(n):Gi(n)}function _t(t,e){return new Ke({type:t,schema:null,validator:e})}function cy(t,e){return new Ke({...t,refiner:(r,n)=>r===void 0||t.refiner(r,n),validator(r,n){return r===void 0?!0:(e(r,n),t.validator(r,n))}})}function uy(t){return new Ke({type:"dynamic",schema:null,*entries(e,r){yield*t(e,r).entries(e,r)},validator(e,r){return t(e,r).validator(e,r)},coercer(e,r){return t(e,r).coercer(e,r)},refiner(e,r){return t(e,r).refiner(e,r)}})}function ly(t){let e;return new Ke({type:"lazy",schema:null,*entries(r,n){e??(e=t()),yield*e.entries(r,n)},validator(r,n){return e??(e=t()),e.validator(r,n)},coercer(r,n){return e??(e=t()),e.coercer(r,n)},refiner(r,n){return e??(e=t()),e.refiner(r,n)}})}function hy(t,e){const{schema:r}=t,n={...r};for(const i of e)delete n[i];switch(t.type){case"type":return Sc(n);default:return Gi(n)}}function fy(t){const e=t instanceof Ke?{...t.schema}:{...t};for(const r in e)e[r]=_f(e[r]);return Gi(e)}function dy(t,e){const{schema:r}=t,n={};for(const i of e)n[i]=r[i];return Gi(n)}function py(t,e){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),_t(t,e)}function gy(){return _t("any",()=>!0)}function vy(t){return new Ke({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${rt(e)}`}})}function yy(){return _t("bigint",t=>typeof t=="bigint")}function my(){return _t("boolean",t=>typeof t=="boolean")}function by(){return _t("date",t=>t instanceof Date&&!isNaN(t.getTime())||`Expected a valid \`Date\` object, but received: ${rt(t)}`)}function wy(t){const e={},r=t.map(n=>rt(n)).join();for(const n of t)e[n]=n;return new Ke({type:"enums",schema:e,validator(n){return t.includes(n)||`Expected one of \`${r}\`, but received: ${rt(n)}`}})}function _y(){return _t("func",t=>typeof t=="function"||`Expected a function, but received: ${rt(t)}`)}function Sy(t){return _t("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${rt(e)}`)}function Ey(){return _t("integer",t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${rt(t)}`)}function My(t){return new Ke({type:"intersection",schema:null,*entries(e,r){for(const n of t)yield*n.entries(e,r)},*validator(e,r){for(const n of t)yield*n.validator(e,r)},*refiner(e,r){for(const n of t)yield*n.refiner(e,r)}})}function Cy(t){const e=rt(t),r=typeof t;return new Ke({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${rt(n)}`}})}function xy(t,e){return new Ke({type:"map",schema:null,*entries(r){if(t&&e&&r instanceof Map)for(const[n,i]of r.entries())yield[n,n,t],yield[n,i,e]},coercer(r){return r instanceof Map?new Map(r):r},validator(r){return r instanceof Map||`Expected a \`Map\` object, but received: ${rt(r)}`}})}function _c(){return _t("never",()=>!1)}function Iy(t){return new Ke({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function Ry(){return _t("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${rt(t)}`)}function Gi(t){const e=t?Object.keys(t):[],r=_c();return new Ke({type:"object",schema:t||null,*entries(n){if(t&&Nt(n)){const i=new Set(Object.keys(n));for(const s of e)i.delete(s),yield[s,n[s],t[s]];for(const s of i)yield[s,n[s],r]}},validator(n){return Nt(n)||`Expected an object, but received: ${rt(n)}`},coercer(n){return Nt(n)?{...n}:n}})}function _f(t){return new Ke({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function Ay(t,e){return new Ke({type:"record",schema:null,*entries(r){if(Nt(r))for(const n in r){const i=r[n];yield[n,n,t],yield[n,i,e]}},validator(r){return Nt(r)||`Expected an object, but received: ${rt(r)}`}})}function ky(){return _t("regexp",t=>t instanceof RegExp)}function Oy(t){return new Ke({type:"set",schema:null,*entries(e){if(t&&e instanceof Set)for(const r of e)yield[r,r,t]},coercer(e){return e instanceof Set?new Set(e):e},validator(e){return e instanceof Set||`Expected a \`Set\` object, but received: ${rt(e)}`}})}function Sf(){return _t("string",t=>typeof t=="string"||`Expected a string, but received: ${rt(t)}`)}function Ty(t){const e=_c();return new Ke({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],t[i]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${rt(r)}`}})}function Sc(t){const e=Object.keys(t);return new Ke({type:"type",schema:t,*entries(r){if(Nt(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return Nt(r)||`Expected an object, but received: ${rt(r)}`},coercer(r){return Nt(r)?{...r}:r}})}function Ny(t){const e=t.map(r=>r.type).join(" | ");return new Ke({type:"union",schema:null,coercer(r){for(const n of t){const[i,s]=n.validate(r,{coerce:!0});if(!i)return s}return r},validator(r,n){const i=[];for(const s of t){const[...o]=bc(r,s,n),[a]=o;if(a[0])for(const[u]of o)u&&i.push(u);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${rt(r)}`,...i]}})}function Ef(){return _t("unknown",()=>!0)}function Ec(t,e,r){return new Ke({...t,coercer:(n,i)=>wc(n,e)?t.coercer(r(n,i),i):t.coercer(n,i)})}function Ly(t,e,r={}){return Ec(t,Ef(),n=>{const i=typeof e=="function"?e():e;if(n===void 0)return i;if(!r.strict&&Yu(n)&&Yu(i)){const s={...n};let o=!1;for(const a in i)s[a]===void 0&&(s[a]=i[a],o=!0);if(o)return s}return n})}function Py(t){return Ec(t,Sf(),e=>e.trim())}function $y(t){return an(t,"empty",e=>{const r=Mf(e);return r===0||`Expected an empty ${t.type} but received one with a size of \`${r}\``})}function Mf(t){return t instanceof Map||t instanceof Set?t.size:t.length}function Dy(t,e,r={}){const{exclusive:n}=r;return an(t,"max",i=>n?i<e:i<=e||`Expected a ${t.type} less than ${n?"":"or equal to "}${e} but received \`${i}\``)}function jy(t,e,r={}){const{exclusive:n}=r;return an(t,"min",i=>n?i>e:i>=e||`Expected a ${t.type} greater than ${n?"":"or equal to "}${e} but received \`${i}\``)}function Fy(t){return an(t,"nonempty",e=>Mf(e)>0||`Expected a nonempty ${t.type} but received an empty one`)}function By(t,e){return an(t,"pattern",r=>e.test(r)||`Expected a ${t.type} matching \`/${e.source}/\` but received "${r}"`)}function Vy(t,e,r=e){const n=`Expected a ${t.type}`,i=e===r?`of \`${e}\``:`between \`${e}\` and \`${r}\``;return an(t,"size",s=>{if(typeof s=="number"||s instanceof Date)return e<=s&&s<=r||`${n} ${i} but received \`${s}\``;if(s instanceof Map||s instanceof Set){const{size:o}=s;return e<=o&&o<=r||`${n} with a size ${i} but received one with a size of \`${o}\``}else{const{length:o}=s;return e<=o&&o<=r||`${n} with a length ${i} but received one with a length of \`${o}\``}})}function an(t,e,r){return new Ke({...t,*refiner(n,i){yield*t.refiner(n,i);const s=r(n,i),o=Va(s,i,t,n);for(const a of o)yield{...a,refinement:e}}})}const Wy=Object.freeze(Object.defineProperty({__proto__:null,Struct:Ke,StructError:yf,any:gy,array:vy,assert:mf,assign:ay,bigint:yy,boolean:my,coerce:Ec,create:bf,date:by,defaulted:Ly,define:_t,deprecated:cy,dynamic:uy,empty:$y,enums:wy,func:_y,instance:Sy,integer:Ey,intersection:My,is:wc,lazy:ly,literal:Cy,map:xy,mask:wf,max:Dy,min:jy,never:_c,nonempty:Fy,nullable:Iy,number:Ry,object:Gi,omit:hy,optional:_f,partial:fy,pattern:By,pick:dy,record:Ay,refine:an,regexp:ky,set:Oy,size:Vy,string:Sf,struct:py,trimmed:Py,tuple:Ty,type:Sc,union:Ny,unknown:Ef,validate:oi},Symbol.toStringTag,{value:"Module"})),cn=nn(Wy);Object.defineProperty(lt,"__esModule",{value:!0});lt.assertExhaustive=lt.assertStruct=lt.assert=lt.AssertionError=void 0;const Hy=cn;function zy(t){return typeof t=="object"&&t!==null&&"message"in t}function Uy(t){var e,r;return typeof((r=(e=t?.prototype)===null||e===void 0?void 0:e.constructor)===null||r===void 0?void 0:r.name)=="string"}function qy(t){const e=zy(t)?t.message:String(t);return e.endsWith(".")?e.slice(0,-1):e}function Cf(t,e){return Uy(t)?new t({message:e}):t({message:e})}class Mc extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}lt.AssertionError=Mc;function Gy(t,e="Assertion failed.",r=Mc){if(!t)throw e instanceof Error?e:Cf(r,e)}lt.assert=Gy;function Jy(t,e,r="Assertion failed",n=Mc){try{(0,Hy.assert)(t,e)}catch(i){throw Cf(n,`${r}: ${qy(i)}.`)}}lt.assertStruct=Jy;function Zy(t){throw new Error("Invalid branch reached. Should be detected during compilation.")}lt.assertExhaustive=Zy;var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.base64=void 0;const Qy=cn,Yy=lt,Ky=(t,e={})=>{var r,n;const i=(r=e.paddingRequired)!==null&&r!==void 0?r:!1,s=(n=e.characterSet)!==null&&n!==void 0?n:"base64";let o;s==="base64"?o=String.raw`[A-Za-z0-9+\/]`:((0,Yy.assert)(s==="base64url"),o=String.raw`[-_A-Za-z0-9]`);let a;return i?a=new RegExp(`^(?:${o}{4})*(?:${o}{3}=|${o}{2}==)?$`,"u"):a=new RegExp(`^(?:${o}{4})*(?:${o}{2,3}|${o}{3}=|${o}{2}==)?$`,"u"),(0,Qy.pattern)(t,a)};Ji.base64=Ky;var te={},Zi={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.remove0x=t.add0x=t.assertIsStrictHexString=t.assertIsHexString=t.isStrictHexString=t.isHexString=t.StrictHexStruct=t.HexStruct=void 0;const e=cn,r=lt;t.HexStruct=(0,e.pattern)((0,e.string)(),/^(?:0x)?[0-9a-f]+$/iu),t.StrictHexStruct=(0,e.pattern)((0,e.string)(),/^0x[0-9a-f]+$/iu);function n(l){return(0,e.is)(l,t.HexStruct)}t.isHexString=n;function i(l){return(0,e.is)(l,t.StrictHexStruct)}t.isStrictHexString=i;function s(l){(0,r.assert)(n(l),"Value must be a hexadecimal string.")}t.assertIsHexString=s;function o(l){(0,r.assert)(i(l),'Value must be a hexadecimal string, starting with "0x".')}t.assertIsStrictHexString=o;function a(l){return l.startsWith("0x")?l:l.startsWith("0X")?`0x${l.substring(2)}`:`0x${l}`}t.add0x=a;function u(l){return l.startsWith("0x")||l.startsWith("0X")?l.substring(2):l}t.remove0x=u})(Zi);Object.defineProperty(te,"__esModule",{value:!0});te.createDataView=te.concatBytes=te.valueToBytes=te.stringToBytes=te.numberToBytes=te.signedBigIntToBytes=te.bigIntToBytes=te.hexToBytes=te.bytesToString=te.bytesToNumber=te.bytesToSignedBigInt=te.bytesToBigInt=te.bytesToHex=te.assertIsBytes=te.isBytes=void 0;const Et=lt,Wa=Zi,Ku=48,Xu=58,el=87;function Xy(){const t=[];return()=>{if(t.length===0)for(let e=0;e<256;e++)t.push(e.toString(16).padStart(2,"0"));return t}}const em=Xy();function Cc(t){return t instanceof Uint8Array}te.isBytes=Cc;function ai(t){(0,Et.assert)(Cc(t),"Value must be a Uint8Array.")}te.assertIsBytes=ai;function xf(t){if(ai(t),t.length===0)return"0x";const e=em(),r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=e[t[n]];return(0,Wa.add0x)(r.join(""))}te.bytesToHex=xf;function If(t){ai(t);const e=xf(t);return BigInt(e)}te.bytesToBigInt=If;function tm(t){ai(t);let e=BigInt(0);for(const r of t)e=(e<<BigInt(8))+BigInt(r);return BigInt.asIntN(t.length*8,e)}te.bytesToSignedBigInt=tm;function rm(t){ai(t);const e=If(t);return(0,Et.assert)(e<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(e)}te.bytesToNumber=rm;function nm(t){return ai(t),new TextDecoder().decode(t)}te.bytesToString=nm;function ro(t){var e;if(((e=t?.toLowerCase)===null||e===void 0?void 0:e.call(t))==="0x")return new Uint8Array;(0,Wa.assertIsHexString)(t);const r=(0,Wa.remove0x)(t).toLowerCase(),n=r.length%2===0?r:`0${r}`,i=new Uint8Array(n.length/2);for(let s=0;s<i.length;s++){const o=n.charCodeAt(s*2),a=n.charCodeAt(s*2+1),u=o-(o<Xu?Ku:el),l=a-(a<Xu?Ku:el);i[s]=u*16+l}return i}te.hexToBytes=ro;function Rf(t){(0,Et.assert)(typeof t=="bigint","Value must be a bigint."),(0,Et.assert)(t>=BigInt(0),"Value must be a non-negative bigint.");const e=t.toString(16);return ro(e)}te.bigIntToBytes=Rf;function im(t,e){(0,Et.assert)(e>0);const r=t>>BigInt(31);return!((~t&r)+(t&~r)>>BigInt(e*8+-1))}function sm(t,e){(0,Et.assert)(typeof t=="bigint","Value must be a bigint."),(0,Et.assert)(typeof e=="number","Byte length must be a number."),(0,Et.assert)(e>0,"Byte length must be greater than 0."),(0,Et.assert)(im(t,e),"Byte length is too small to represent the given value.");let r=t;const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()}te.signedBigIntToBytes=sm;function Af(t){(0,Et.assert)(typeof t=="number","Value must be a number."),(0,Et.assert)(t>=0,"Value must be a non-negative number."),(0,Et.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `bigIntToBytes` instead.");const e=t.toString(16);return ro(e)}te.numberToBytes=Af;function kf(t){return(0,Et.assert)(typeof t=="string","Value must be a string."),new TextEncoder().encode(t)}te.stringToBytes=kf;function Of(t){if(typeof t=="bigint")return Rf(t);if(typeof t=="number")return Af(t);if(typeof t=="string")return t.startsWith("0x")?ro(t):kf(t);if(Cc(t))return t;throw new TypeError(`Unsupported value type: "${typeof t}".`)}te.valueToBytes=Of;function om(t){const e=new Array(t.length);let r=0;for(let i=0;i<t.length;i++){const s=Of(t[i]);e[i]=s,r+=s.length}const n=new Uint8Array(r);for(let i=0,s=0;i<e.length;i++)n.set(e[i],s),s+=e[i].length;return n}te.concatBytes=om;function am(t){if(typeof Buffer<"u"&&t instanceof Buffer){const e=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);return new DataView(e)}return new DataView(t.buffer,t.byteOffset,t.byteLength)}te.createDataView=am;var no={};Object.defineProperty(no,"__esModule",{value:!0});no.ChecksumStruct=void 0;const tl=cn,cm=Ji;no.ChecksumStruct=(0,tl.size)((0,cm.base64)((0,tl.string)(),{paddingRequired:!0}),44,44);var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.createHex=Yt.createBytes=Yt.createBigInt=Yt.createNumber=void 0;const Ge=cn,um=lt,Tf=te,io=Zi,Nf=(0,Ge.union)([(0,Ge.number)(),(0,Ge.bigint)(),(0,Ge.string)(),io.StrictHexStruct]),lm=(0,Ge.coerce)((0,Ge.number)(),Nf,Number),hm=(0,Ge.coerce)((0,Ge.bigint)(),Nf,BigInt);(0,Ge.union)([io.StrictHexStruct,(0,Ge.instance)(Uint8Array)]);const fm=(0,Ge.coerce)((0,Ge.instance)(Uint8Array),(0,Ge.union)([io.StrictHexStruct]),Tf.hexToBytes),dm=(0,Ge.coerce)(io.StrictHexStruct,(0,Ge.instance)(Uint8Array),Tf.bytesToHex);function pm(t){try{const e=(0,Ge.create)(t,lm);return(0,um.assert)(Number.isFinite(e),`Expected a number-like value, got "${t}".`),e}catch(e){throw e instanceof Ge.StructError?new Error(`Expected a number-like value, got "${t}".`):e}}Yt.createNumber=pm;function gm(t){try{return(0,Ge.create)(t,hm)}catch(e){throw e instanceof Ge.StructError?new Error(`Expected a number-like value, got "${String(e.value)}".`):e}}Yt.createBigInt=gm;function vm(t){if(typeof t=="string"&&t.toLowerCase()==="0x")return new Uint8Array;try{return(0,Ge.create)(t,fm)}catch(e){throw e instanceof Ge.StructError?new Error(`Expected a bytes-like value, got "${String(e.value)}".`):e}}Yt.createBytes=vm;function ym(t){if(t instanceof Uint8Array&&t.length===0||typeof t=="string"&&t.toLowerCase()==="0x")return"0x";try{return(0,Ge.create)(t,dm)}catch(e){throw e instanceof Ge.StructError?new Error(`Expected a bytes-like value, got "${String(e.value)}".`):e}}Yt.createHex=ym;var Un={},Lf=F&&F.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},vt=F&&F.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Pt,zt;Object.defineProperty(Un,"__esModule",{value:!0});Un.FrozenSet=Un.FrozenMap=void 0;class xc{constructor(e){Pt.set(this,void 0),Lf(this,Pt,new Map(e),"f"),Object.freeze(this)}get size(){return vt(this,Pt,"f").size}[(Pt=new WeakMap,Symbol.iterator)](){return vt(this,Pt,"f")[Symbol.iterator]()}entries(){return vt(this,Pt,"f").entries()}forEach(e,r){return vt(this,Pt,"f").forEach((n,i,s)=>e.call(r,n,i,this))}get(e){return vt(this,Pt,"f").get(e)}has(e){return vt(this,Pt,"f").has(e)}keys(){return vt(this,Pt,"f").keys()}values(){return vt(this,Pt,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([e,r])=>`${String(e)} => ${String(r)}`).join(", ")} `:""}}`}}Un.FrozenMap=xc;class Ic{constructor(e){zt.set(this,void 0),Lf(this,zt,new Set(e),"f"),Object.freeze(this)}get size(){return vt(this,zt,"f").size}[(zt=new WeakMap,Symbol.iterator)](){return vt(this,zt,"f")[Symbol.iterator]()}entries(){return vt(this,zt,"f").entries()}forEach(e,r){return vt(this,zt,"f").forEach((n,i,s)=>e.call(r,n,i,this))}has(e){return vt(this,zt,"f").has(e)}keys(){return vt(this,zt,"f").keys()}values(){return vt(this,zt,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(e=>String(e)).join(", ")} `:""}}`}}Un.FrozenSet=Ic;Object.freeze(xc);Object.freeze(xc.prototype);Object.freeze(Ic);Object.freeze(Ic.prototype);var Pf={},Rc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateNumberSize=t.calculateStringSize=t.isASCII=t.isPlainObject=t.ESCAPE_CHARACTERS_REGEXP=t.JsonSize=t.hasProperty=t.isObject=t.isNullOrUndefined=t.isNonEmptyArray=void 0;function e(l){return Array.isArray(l)&&l.length>0}t.isNonEmptyArray=e;function r(l){return l==null}t.isNullOrUndefined=r;function n(l){return!!l&&typeof l=="object"&&!Array.isArray(l)}t.isObject=n;const i=(l,d)=>Object.hasOwnProperty.call(l,d);t.hasProperty=i,function(l){l[l.Null=4]="Null",l[l.Comma=1]="Comma",l[l.Wrapper=1]="Wrapper",l[l.True=4]="True",l[l.False=5]="False",l[l.Quote=1]="Quote",l[l.Colon=1]="Colon",l[l.Date=24]="Date"}(t.JsonSize||(t.JsonSize={})),t.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function s(l){if(typeof l!="object"||l===null)return!1;try{let d=l;for(;Object.getPrototypeOf(d)!==null;)d=Object.getPrototypeOf(d);return Object.getPrototypeOf(l)===d}catch{return!1}}t.isPlainObject=s;function o(l){return l.charCodeAt(0)<=127}t.isASCII=o;function a(l){var d;return l.split("").reduce((v,S)=>o(S)?v+1:v+2,0)+((d=l.match(t.ESCAPE_CHARACTERS_REGEXP))!==null&&d!==void 0?d:[]).length}t.calculateStringSize=a;function u(l){return l.toString().length}t.calculateNumberSize=u})(Rc);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateJsonAndGetSize=t.getJsonRpcIdValidator=t.assertIsJsonRpcError=t.isJsonRpcError=t.assertIsJsonRpcFailure=t.isJsonRpcFailure=t.assertIsJsonRpcSuccess=t.isJsonRpcSuccess=t.assertIsJsonRpcResponse=t.isJsonRpcResponse=t.assertIsPendingJsonRpcResponse=t.isPendingJsonRpcResponse=t.JsonRpcResponseStruct=t.JsonRpcFailureStruct=t.JsonRpcSuccessStruct=t.PendingJsonRpcResponseStruct=t.assertIsJsonRpcRequest=t.isJsonRpcRequest=t.assertIsJsonRpcNotification=t.isJsonRpcNotification=t.JsonRpcNotificationStruct=t.JsonRpcRequestStruct=t.JsonRpcParamsStruct=t.JsonRpcErrorStruct=t.JsonRpcIdStruct=t.JsonRpcVersionStruct=t.jsonrpc2=t.isValidJson=t.JsonStruct=void 0;const e=cn,r=lt,n=Rc;t.JsonStruct=(0,e.define)("Json",k=>{const[P]=N(k,!0);return P?!0:"Expected a valid JSON-serializable value"});function i(k){return(0,e.is)(k,t.JsonStruct)}t.isValidJson=i,t.jsonrpc2="2.0",t.JsonRpcVersionStruct=(0,e.literal)(t.jsonrpc2),t.JsonRpcIdStruct=(0,e.nullable)((0,e.union)([(0,e.number)(),(0,e.string)()])),t.JsonRpcErrorStruct=(0,e.object)({code:(0,e.integer)(),message:(0,e.string)(),data:(0,e.optional)(t.JsonStruct),stack:(0,e.optional)((0,e.string)())}),t.JsonRpcParamsStruct=(0,e.optional)((0,e.union)([(0,e.record)((0,e.string)(),t.JsonStruct),(0,e.array)(t.JsonStruct)])),t.JsonRpcRequestStruct=(0,e.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,method:(0,e.string)(),params:t.JsonRpcParamsStruct}),t.JsonRpcNotificationStruct=(0,e.omit)(t.JsonRpcRequestStruct,["id"]);function s(k){return(0,e.is)(k,t.JsonRpcNotificationStruct)}t.isJsonRpcNotification=s;function o(k,P){(0,r.assertStruct)(k,t.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",P)}t.assertIsJsonRpcNotification=o;function a(k){return(0,e.is)(k,t.JsonRpcRequestStruct)}t.isJsonRpcRequest=a;function u(k,P){(0,r.assertStruct)(k,t.JsonRpcRequestStruct,"Invalid JSON-RPC request",P)}t.assertIsJsonRpcRequest=u,t.PendingJsonRpcResponseStruct=(0,e.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:(0,e.optional)((0,e.unknown)()),error:(0,e.optional)(t.JsonRpcErrorStruct)}),t.JsonRpcSuccessStruct=(0,e.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:t.JsonStruct}),t.JsonRpcFailureStruct=(0,e.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,error:t.JsonRpcErrorStruct}),t.JsonRpcResponseStruct=(0,e.union)([t.JsonRpcSuccessStruct,t.JsonRpcFailureStruct]);function l(k){return(0,e.is)(k,t.PendingJsonRpcResponseStruct)}t.isPendingJsonRpcResponse=l;function d(k,P){(0,r.assertStruct)(k,t.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",P)}t.assertIsPendingJsonRpcResponse=d;function p(k){return(0,e.is)(k,t.JsonRpcResponseStruct)}t.isJsonRpcResponse=p;function v(k,P){(0,r.assertStruct)(k,t.JsonRpcResponseStruct,"Invalid JSON-RPC response",P)}t.assertIsJsonRpcResponse=v;function S(k){return(0,e.is)(k,t.JsonRpcSuccessStruct)}t.isJsonRpcSuccess=S;function M(k,P){(0,r.assertStruct)(k,t.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",P)}t.assertIsJsonRpcSuccess=M;function x(k){return(0,e.is)(k,t.JsonRpcFailureStruct)}t.isJsonRpcFailure=x;function O(k,P){(0,r.assertStruct)(k,t.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",P)}t.assertIsJsonRpcFailure=O;function I(k){return(0,e.is)(k,t.JsonRpcErrorStruct)}t.isJsonRpcError=I;function R(k,P){(0,r.assertStruct)(k,t.JsonRpcErrorStruct,"Invalid JSON-RPC error",P)}t.assertIsJsonRpcError=R;function T(k){const{permitEmptyString:P,permitFractions:W,permitNull:ee}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},k);return z=>!!(typeof z=="number"&&(W||Number.isInteger(z))||typeof z=="string"&&(P||z.length>0)||ee&&z===null)}t.getJsonRpcIdValidator=T;function N(k,P=!1){const W=new Set;function ee(D,z){if(D===void 0)return[!1,0];if(D===null)return[!0,z?0:n.JsonSize.Null];const U=typeof D;try{if(U==="function")return[!1,0];if(U==="string"||D instanceof String)return[!0,z?0:(0,n.calculateStringSize)(D)+n.JsonSize.Quote*2];if(U==="boolean"||D instanceof Boolean)return z?[!0,0]:[!0,D==!0?n.JsonSize.True:n.JsonSize.False];if(U==="number"||D instanceof Number)return z?[!0,0]:[!0,(0,n.calculateNumberSize)(D)];if(D instanceof Date)return z?[!0,0]:[!0,isNaN(D.getDate())?n.JsonSize.Null:n.JsonSize.Date+n.JsonSize.Quote*2]}catch{return[!1,0]}if(!(0,n.isPlainObject)(D)&&!Array.isArray(D))return[!1,0];if(W.has(D))return[!1,0];W.add(D);try{return[!0,Object.entries(D).reduce((q,[m,c],f,g)=>{let[y,w]=ee(c,z);if(!y)throw new Error("JSON validation did not pass. Validation process stopped.");if(W.delete(D),z)return 0;const E=Array.isArray(D)?0:m.length+n.JsonSize.Comma+n.JsonSize.Colon*2,C=f<g.length-1?n.JsonSize.Comma:0;return q+E+w+C},z?0:n.JsonSize.Wrapper*2)]}catch{return[!1,0]}}return ee(k,P)}t.validateJsonAndGetSize=N})(Pf);var qn={},Ha={exports:{}},ua,rl;function mm(){if(rl)return ua;rl=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,s=n*365.25;ua=function(d,p){p=p||{};var v=typeof d;if(v==="string"&&d.length>0)return o(d);if(v==="number"&&isFinite(d))return p.long?u(d):a(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(p){var v=parseFloat(p[1]),S=(p[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return v*s;case"weeks":case"week":case"w":return v*i;case"days":case"day":case"d":return v*n;case"hours":case"hour":case"hrs":case"hr":case"h":return v*r;case"minutes":case"minute":case"mins":case"min":case"m":return v*e;case"seconds":case"second":case"secs":case"sec":case"s":return v*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return v;default:return}}}}function a(d){var p=Math.abs(d);return p>=n?Math.round(d/n)+"d":p>=r?Math.round(d/r)+"h":p>=e?Math.round(d/e)+"m":p>=t?Math.round(d/t)+"s":d+"ms"}function u(d){var p=Math.abs(d);return p>=n?l(d,p,n,"day"):p>=r?l(d,p,r,"hour"):p>=e?l(d,p,e,"minute"):p>=t?l(d,p,t,"second"):d+" ms"}function l(d,p,v,S){var M=p>=v*1.5;return Math.round(d/v)+" "+S+(M?"s":"")}return ua}function bm(t){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=i,r.enabled=o,r.humanize=mm(),r.destroy=l,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let p=0;for(let v=0;v<d.length;v++)p=(p<<5)-p+d.charCodeAt(v),p|=0;return r.colors[Math.abs(p)%r.colors.length]}r.selectColor=e;function r(d){let p,v=null,S,M;function x(...O){if(!x.enabled)return;const I=x,R=Number(new Date),T=R-(p||R);I.diff=T,I.prev=p,I.curr=R,p=R,O[0]=r.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let N=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(P,W)=>{if(P==="%%")return"%";N++;const ee=r.formatters[W];if(typeof ee=="function"){const D=O[N];P=ee.call(I,D),O.splice(N,1),N--}return P}),r.formatArgs.call(I,O),(I.log||r.log).apply(I,O)}return x.namespace=d,x.useColors=r.useColors(),x.color=r.selectColor(d),x.extend=n,x.destroy=r.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>v!==null?v:(S!==r.namespaces&&(S=r.namespaces,M=r.enabled(d)),M),set:O=>{v=O}}),typeof r.init=="function"&&r.init(x),x}function n(d,p){const v=r(this.namespace+(typeof p>"u"?":":p)+d);return v.log=this.log,v}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let p;const v=(typeof d=="string"?d:"").split(/[\s,]+/),S=v.length;for(p=0;p<S;p++)v[p]&&(d=v[p].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function s(){const d=[...r.names.map(a),...r.skips.map(a).map(p=>"-"+p)].join(",");return r.enable(""),d}function o(d){if(d[d.length-1]==="*")return!0;let p,v;for(p=0,v=r.skips.length;p<v;p++)if(r.skips[p].test(d))return!1;for(p=0,v=r.names.length;p<v;p++)if(r.names[p].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function u(d){return d instanceof Error?d.stack||d.message:d}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var wm=bm;(function(t,e){e.formatArgs=n,e.save=i,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;u.splice(1,0,l,"color: inherit");let d=0,p=0;u[0].replace(/%[a-zA-Z%]/g,v=>{v!=="%%"&&(d++,v==="%c"&&(p=d))}),u.splice(p,0,l)}e.log=console.debug||console.log||(()=>{});function i(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function s(){let u;try{u=e.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u={}.DEBUG),u}function o(){try{return localStorage}catch{}}t.exports=wm(e);const{formatters:a}=t.exports;a.j=function(u){try{return JSON.stringify(u)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(Ha,Ha.exports);var _m=Ha.exports,Sm=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qn,"__esModule",{value:!0});qn.createModuleLogger=qn.createProjectLogger=void 0;const Em=Sm(_m),Mm=(0,Em.default)("metamask");function Cm(t){return Mm.extend(t)}qn.createProjectLogger=Cm;function xm(t,e){return t.extend(e)}qn.createModuleLogger=xm;var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.hexToBigInt=Kt.hexToNumber=Kt.bigIntToHex=Kt.numberToHex=void 0;const $n=lt,$i=Zi,Im=t=>((0,$n.assert)(typeof t=="number","Value must be a number."),(0,$n.assert)(t>=0,"Value must be a non-negative number."),(0,$n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,$i.add0x)(t.toString(16)));Kt.numberToHex=Im;const Rm=t=>((0,$n.assert)(typeof t=="bigint","Value must be a bigint."),(0,$n.assert)(t>=0,"Value must be a non-negative bigint."),(0,$i.add0x)(t.toString(16)));Kt.bigIntToHex=Rm;const Am=t=>{(0,$i.assertIsHexString)(t);const e=parseInt(t,16);return(0,$n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `hexToBigInt` instead."),e};Kt.hexToNumber=Am;const km=t=>((0,$i.assertIsHexString)(t),BigInt((0,$i.add0x)(t)));Kt.hexToBigInt=km;var $f={};Object.defineProperty($f,"__esModule",{value:!0});var Df={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.timeSince=t.inMilliseconds=t.Duration=void 0,function(s){s[s.Millisecond=1]="Millisecond",s[s.Second=1e3]="Second",s[s.Minute=6e4]="Minute",s[s.Hour=36e5]="Hour",s[s.Day=864e5]="Day",s[s.Week=6048e5]="Week",s[s.Year=31536e6]="Year"}(t.Duration||(t.Duration={}));const e=s=>Number.isInteger(s)&&s>=0,r=(s,o)=>{if(!e(s))throw new Error(`"${o}" must be a non-negative integer. Received: "${s}".`)};function n(s,o){return r(s,"count"),s*o}t.inMilliseconds=n;function i(s){return r(s,"timestamp"),Date.now()-s}t.timeSince=i})(Df);var jf={},za={exports:{}};const Om="2.0.0",Ff=256,Tm=Number.MAX_SAFE_INTEGER||9007199254740991,Nm=16,Lm=Ff-6,Pm=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var so={MAX_LENGTH:Ff,MAX_SAFE_COMPONENT_LENGTH:Nm,MAX_SAFE_BUILD_LENGTH:Lm,MAX_SAFE_INTEGER:Tm,RELEASE_TYPES:Pm,SEMVER_SPEC_VERSION:Om,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const $m=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var oo=$m;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=so,s=oo;e=t.exports={};const o=e.re=[],a=e.safeRe=[],u=e.src=[],l=e.t={};let d=0;const p="[a-zA-Z0-9-]",v=[["\\s",1],["\\d",i],[p,n]],S=x=>{for(const[O,I]of v)x=x.split(`${O}*`).join(`${O}{0,${I}}`).split(`${O}+`).join(`${O}{1,${I}}`);return x},M=(x,O,I)=>{const R=S(O),T=d++;s(x,T,O),l[x]=T,u[T]=O,o[T]=new RegExp(O,I?"g":void 0),a[T]=new RegExp(R,I?"g":void 0)};M("NUMERICIDENTIFIER","0|[1-9]\\d*"),M("NUMERICIDENTIFIERLOOSE","\\d+"),M("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),M("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),M("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),M("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),M("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),M("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),M("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),M("BUILDIDENTIFIER",`${p}+`),M("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),M("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),M("FULL",`^${u[l.FULLPLAIN]}$`),M("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),M("LOOSE",`^${u[l.LOOSEPLAIN]}$`),M("GTLT","((?:<|>)?=?)"),M("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),M("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),M("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),M("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),M("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),M("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),M("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),M("COERCERTL",u[l.COERCE],!0),M("LONETILDE","(?:~>?)"),M("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",M("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),M("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),M("LONECARET","(?:\\^)"),M("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",M("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),M("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),M("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),M("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),M("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",M("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),M("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),M("STAR","(<|>)?=?\\s*\\*"),M("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),M("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(za,za.exports);var Qi=za.exports;const Dm=Object.freeze({loose:!0}),jm=Object.freeze({}),Fm=t=>t?typeof t!="object"?Dm:t:jm;var Ac=Fm;const nl=/^[0-9]+$/,Bf=(t,e)=>{const r=nl.test(t),n=nl.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},Bm=(t,e)=>Bf(e,t);var Vf={compareIdentifiers:Bf,rcompareIdentifiers:Bm};const ps=oo,{MAX_LENGTH:il,MAX_SAFE_INTEGER:gs}=so,{safeRe:sl,t:ol}=Qi,Vm=Ac,{compareIdentifiers:Mn}=Vf;let Wm=class qt{constructor(e,r){if(r=Vm(r),e instanceof qt){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>il)throw new TypeError(`version is longer than ${il} characters`);ps("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=e.trim().match(r.loose?sl[ol.LOOSE]:sl[ol.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>gs||this.major<0)throw new TypeError("Invalid major version");if(this.minor>gs||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>gs||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<gs)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ps("SemVer.compare",this.version,this.options,e),!(e instanceof qt)){if(typeof e=="string"&&e===this.version)return 0;e=new qt(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof qt||(e=new qt(e,this.options)),Mn(this.major,e.major)||Mn(this.minor,e.minor)||Mn(this.patch,e.patch)}comparePre(e){if(e instanceof qt||(e=new qt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],i=e.prerelease[r];if(ps("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Mn(n,i)}while(++r)}compareBuild(e){e instanceof qt||(e=new qt(e,this.options));let r=0;do{const n=this.build[r],i=e.build[r];if(ps("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Mn(n,i)}while(++r)}inc(e,r,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),Mn(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var bt=Wm;const al=bt,Hm=(t,e,r=!1)=>{if(t instanceof al)return t;try{return new al(t,e)}catch(n){if(!r)return null;throw n}};var ci=Hm;const zm=ci,Um=(t,e)=>{const r=zm(t,e);return r?r.version:null};var qm=Um;const Gm=ci,Jm=(t,e)=>{const r=Gm(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};var Zm=Jm;const cl=bt,Qm=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new cl(t instanceof cl?t.version:t,r).inc(e,n,i).version}catch{return null}};var Ym=Qm;const ul=ci,Km=(t,e)=>{const r=ul(t,null,!0),n=ul(e,null,!0),i=r.compare(n);if(i===0)return null;const s=i>0,o=s?r:n,a=s?n:r,u=!!o.prerelease.length;if(!!a.prerelease.length&&!u)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";const d=u?"pre":"";return r.major!==n.major?d+"major":r.minor!==n.minor?d+"minor":r.patch!==n.patch?d+"patch":"prerelease"};var Xm=Km;const eb=bt,tb=(t,e)=>new eb(t,e).major;var rb=tb;const nb=bt,ib=(t,e)=>new nb(t,e).minor;var sb=ib;const ob=bt,ab=(t,e)=>new ob(t,e).patch;var cb=ab;const ub=ci,lb=(t,e)=>{const r=ub(t,e);return r&&r.prerelease.length?r.prerelease:null};var hb=lb;const ll=bt,fb=(t,e,r)=>new ll(t,r).compare(new ll(e,r));var Vt=fb;const db=Vt,pb=(t,e,r)=>db(e,t,r);var gb=pb;const vb=Vt,yb=(t,e)=>vb(t,e,!0);var mb=yb;const hl=bt,bb=(t,e,r)=>{const n=new hl(t,r),i=new hl(e,r);return n.compare(i)||n.compareBuild(i)};var kc=bb;const wb=kc,_b=(t,e)=>t.sort((r,n)=>wb(r,n,e));var Sb=_b;const Eb=kc,Mb=(t,e)=>t.sort((r,n)=>Eb(n,r,e));var Cb=Mb;const xb=Vt,Ib=(t,e,r)=>xb(t,e,r)>0;var ao=Ib;const Rb=Vt,Ab=(t,e,r)=>Rb(t,e,r)<0;var Oc=Ab;const kb=Vt,Ob=(t,e,r)=>kb(t,e,r)===0;var Wf=Ob;const Tb=Vt,Nb=(t,e,r)=>Tb(t,e,r)!==0;var Hf=Nb;const Lb=Vt,Pb=(t,e,r)=>Lb(t,e,r)>=0;var Tc=Pb;const $b=Vt,Db=(t,e,r)=>$b(t,e,r)<=0;var Nc=Db;const jb=Wf,Fb=Hf,Bb=ao,Vb=Tc,Wb=Oc,Hb=Nc,zb=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return jb(t,r,n);case"!=":return Fb(t,r,n);case">":return Bb(t,r,n);case">=":return Vb(t,r,n);case"<":return Wb(t,r,n);case"<=":return Hb(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};var zf=zb;const Ub=bt,qb=ci,{safeRe:vs,t:ys}=Qi,Gb=(t,e)=>{if(t instanceof Ub)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(vs[ys.COERCE]);else{let n;for(;(n=vs[ys.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),vs[ys.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;vs[ys.COERCERTL].lastIndex=-1}return r===null?null:qb(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};var Jb=Gb,la,fl;function Zb(){return fl||(fl=1,la=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),la}var Qb=re;re.Node=en;re.create=re;function re(t){var e=this;if(e instanceof re||(e=new re),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}re.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};re.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};re.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};re.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Kb(this,arguments[t]);return this.length};re.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Xb(this,arguments[t]);return this.length};re.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};re.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};re.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};re.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};re.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};re.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};re.prototype.map=function(t,e){e=e||this;for(var r=new re,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};re.prototype.mapReverse=function(t,e){e=e||this;for(var r=new re,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};re.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};re.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};re.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};re.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};re.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new re;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};re.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new re;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};re.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=Yb(this,i,r[n]);return s};re.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function Yb(t,e,r){var n=e===t.head?new en(r,null,e,t):new en(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function Kb(t,e){t.tail=new en(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Xb(t,e){t.head=new en(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function en(t,e,r,n){if(!(this instanceof en))return new en(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Zb()(re)}catch{}const e1=Qb,Ur=Symbol("max"),sr=Symbol("length"),Cn=Symbol("lengthCalculator"),ki=Symbol("allowStale"),Zr=Symbol("maxAge"),rr=Symbol("dispose"),dl=Symbol("noDisposeOnSet"),it=Symbol("lruList"),jt=Symbol("cache"),Uf=Symbol("updateAgeOnGet"),ha=()=>1;class t1{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[Ur]=e.max||1/0;const r=e.length||ha;if(this[Cn]=typeof r!="function"?ha:r,this[ki]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Zr]=e.maxAge||0,this[rr]=e.dispose,this[dl]=e.noDisposeOnSet||!1,this[Uf]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Ur]=e||1/0,_i(this)}get max(){return this[Ur]}set allowStale(e){this[ki]=!!e}get allowStale(){return this[ki]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Zr]=e,_i(this)}get maxAge(){return this[Zr]}set lengthCalculator(e){typeof e!="function"&&(e=ha),e!==this[Cn]&&(this[Cn]=e,this[sr]=0,this[it].forEach(r=>{r.length=this[Cn](r.value,r.key),this[sr]+=r.length})),_i(this)}get lengthCalculator(){return this[Cn]}get length(){return this[sr]}get itemCount(){return this[it].length}rforEach(e,r){r=r||this;for(let n=this[it].tail;n!==null;){const i=n.prev;pl(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[it].head;n!==null;){const i=n.next;pl(this,e,n,r),n=i}}keys(){return this[it].toArray().map(e=>e.key)}values(){return this[it].toArray().map(e=>e.value)}reset(){this[rr]&&this[it]&&this[it].length&&this[it].forEach(e=>this[rr](e.key,e.value)),this[jt]=new Map,this[it]=new e1,this[sr]=0}dump(){return this[it].map(e=>Ps(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[it]}set(e,r,n){if(n=n||this[Zr],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const i=n?Date.now():0,s=this[Cn](r,e);if(this[jt].has(e)){if(s>this[Ur])return Dn(this,this[jt].get(e)),!1;const u=this[jt].get(e).value;return this[rr]&&(this[dl]||this[rr](e,u.value)),u.now=i,u.maxAge=n,u.value=r,this[sr]+=s-u.length,u.length=s,this.get(e),_i(this),!0}const o=new r1(e,r,s,i,n);return o.length>this[Ur]?(this[rr]&&this[rr](e,r),!1):(this[sr]+=o.length,this[it].unshift(o),this[jt].set(e,this[it].head),_i(this),!0)}has(e){if(!this[jt].has(e))return!1;const r=this[jt].get(e).value;return!Ps(this,r)}get(e){return fa(this,e,!0)}peek(e){return fa(this,e,!1)}pop(){const e=this[it].tail;return e?(Dn(this,e),e.value):null}del(e){Dn(this,this[jt].get(e))}load(e){this.reset();const r=Date.now();for(let n=e.length-1;n>=0;n--){const i=e[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-r;o>0&&this.set(i.k,i.v,o)}}}prune(){this[jt].forEach((e,r)=>fa(this,r,!1))}}const fa=(t,e,r)=>{const n=t[jt].get(e);if(n){const i=n.value;if(Ps(t,i)){if(Dn(t,n),!t[ki])return}else r&&(t[Uf]&&(n.value.now=Date.now()),t[it].unshiftNode(n));return i.value}},Ps=(t,e)=>{if(!e||!e.maxAge&&!t[Zr])return!1;const r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[Zr]&&r>t[Zr]},_i=t=>{if(t[sr]>t[Ur])for(let e=t[it].tail;t[sr]>t[Ur]&&e!==null;){const r=e.prev;Dn(t,e),e=r}},Dn=(t,e)=>{if(e){const r=e.value;t[rr]&&t[rr](r.key,r.value),t[sr]-=r.length,t[jt].delete(r.key),t[it].removeNode(e)}};class r1{constructor(e,r,n,i,s){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=s||0}}const pl=(t,e,r,n)=>{let i=r.value;Ps(t,i)&&(Dn(t,r),t[ki]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};var n1=t1,da,gl;function Wt(){if(gl)return da;gl=1;class t{constructor(c,f){if(f=n(f),c instanceof t)return c.loose===!!f.loose&&c.includePrerelease===!!f.includePrerelease?c:new t(c.raw,f);if(c instanceof i)return this.raw=c.value,this.set=[[c]],this.format(),this;if(this.options=f,this.loose=!!f.loose,this.includePrerelease=!!f.includePrerelease,this.raw=c.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(g=>this.parseRange(g.trim())).filter(g=>g.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const g=this.set[0];if(this.set=this.set.filter(y=>!M(y[0])),this.set.length===0)this.set=[g];else if(this.set.length>1){for(const y of this.set)if(y.length===1&&x(y[0])){this.set=[y];break}}}this.format()}format(){return this.range=this.set.map(c=>c.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(c){const g=((this.options.includePrerelease&&v)|(this.options.loose&&S))+":"+c,y=r.get(g);if(y)return y;const w=this.options.loose,E=w?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];c=c.replace(E,U(this.options.includePrerelease)),s("hyphen replace",c),c=c.replace(a[u.COMPARATORTRIM],l),s("comparator trim",c),c=c.replace(a[u.TILDETRIM],d),s("tilde trim",c),c=c.replace(a[u.CARETTRIM],p),s("caret trim",c);let C=c.split(" ").map(L=>I(L,this.options)).join(" ").split(/\s+/).map(L=>z(L,this.options));w&&(C=C.filter(L=>(s("loose invalid filter",L,this.options),!!L.match(a[u.COMPARATORLOOSE])))),s("range list",C);const b=new Map,h=C.map(L=>new i(L,this.options));for(const L of h){if(M(L))return[L];b.set(L.value,L)}b.size>1&&b.has("")&&b.delete("");const _=[...b.values()];return r.set(g,_),_}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Range is required");return this.set.some(g=>O(g,f)&&c.set.some(y=>O(y,f)&&g.every(w=>y.every(E=>w.intersects(E,f)))))}test(c){if(!c)return!1;if(typeof c=="string")try{c=new o(c,this.options)}catch{return!1}for(let f=0;f<this.set.length;f++)if(q(this.set[f],c,this.options))return!0;return!1}}da=t;const e=n1,r=new e({max:1e3}),n=Ac,i=co(),s=oo,o=bt,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:d,caretTrimReplace:p}=Qi,{FLAG_INCLUDE_PRERELEASE:v,FLAG_LOOSE:S}=so,M=m=>m.value==="<0.0.0-0",x=m=>m.value==="",O=(m,c)=>{let f=!0;const g=m.slice();let y=g.pop();for(;f&&g.length;)f=g.every(w=>y.intersects(w,c)),y=g.pop();return f},I=(m,c)=>(s("comp",m,c),m=k(m,c),s("caret",m),m=T(m,c),s("tildes",m),m=W(m,c),s("xrange",m),m=D(m,c),s("stars",m),m),R=m=>!m||m.toLowerCase()==="x"||m==="*",T=(m,c)=>m.trim().split(/\s+/).map(f=>N(f,c)).join(" "),N=(m,c)=>{const f=c.loose?a[u.TILDELOOSE]:a[u.TILDE];return m.replace(f,(g,y,w,E,C)=>{s("tilde",m,g,y,w,E,C);let b;return R(y)?b="":R(w)?b=`>=${y}.0.0 <${+y+1}.0.0-0`:R(E)?b=`>=${y}.${w}.0 <${y}.${+w+1}.0-0`:C?(s("replaceTilde pr",C),b=`>=${y}.${w}.${E}-${C} <${y}.${+w+1}.0-0`):b=`>=${y}.${w}.${E} <${y}.${+w+1}.0-0`,s("tilde return",b),b})},k=(m,c)=>m.trim().split(/\s+/).map(f=>P(f,c)).join(" "),P=(m,c)=>{s("caret",m,c);const f=c.loose?a[u.CARETLOOSE]:a[u.CARET],g=c.includePrerelease?"-0":"";return m.replace(f,(y,w,E,C,b)=>{s("caret",m,y,w,E,C,b);let h;return R(w)?h="":R(E)?h=`>=${w}.0.0${g} <${+w+1}.0.0-0`:R(C)?w==="0"?h=`>=${w}.${E}.0${g} <${w}.${+E+1}.0-0`:h=`>=${w}.${E}.0${g} <${+w+1}.0.0-0`:b?(s("replaceCaret pr",b),w==="0"?E==="0"?h=`>=${w}.${E}.${C}-${b} <${w}.${E}.${+C+1}-0`:h=`>=${w}.${E}.${C}-${b} <${w}.${+E+1}.0-0`:h=`>=${w}.${E}.${C}-${b} <${+w+1}.0.0-0`):(s("no pr"),w==="0"?E==="0"?h=`>=${w}.${E}.${C}${g} <${w}.${E}.${+C+1}-0`:h=`>=${w}.${E}.${C}${g} <${w}.${+E+1}.0-0`:h=`>=${w}.${E}.${C} <${+w+1}.0.0-0`),s("caret return",h),h})},W=(m,c)=>(s("replaceXRanges",m,c),m.split(/\s+/).map(f=>ee(f,c)).join(" ")),ee=(m,c)=>{m=m.trim();const f=c.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return m.replace(f,(g,y,w,E,C,b)=>{s("xRange",m,g,y,w,E,C,b);const h=R(w),_=h||R(E),L=_||R(C),j=L;return y==="="&&j&&(y=""),b=c.includePrerelease?"-0":"",h?y===">"||y==="<"?g="<0.0.0-0":g="*":y&&j?(_&&(E=0),C=0,y===">"?(y=">=",_?(w=+w+1,E=0,C=0):(E=+E+1,C=0)):y==="<="&&(y="<",_?w=+w+1:E=+E+1),y==="<"&&(b="-0"),g=`${y+w}.${E}.${C}${b}`):_?g=`>=${w}.0.0${b} <${+w+1}.0.0-0`:L&&(g=`>=${w}.${E}.0${b} <${w}.${+E+1}.0-0`),s("xRange return",g),g})},D=(m,c)=>(s("replaceStars",m,c),m.trim().replace(a[u.STAR],"")),z=(m,c)=>(s("replaceGTE0",m,c),m.trim().replace(a[c.includePrerelease?u.GTE0PRE:u.GTE0],"")),U=m=>(c,f,g,y,w,E,C,b,h,_,L,j,H)=>(R(g)?f="":R(y)?f=`>=${g}.0.0${m?"-0":""}`:R(w)?f=`>=${g}.${y}.0${m?"-0":""}`:E?f=`>=${f}`:f=`>=${f}${m?"-0":""}`,R(h)?b="":R(_)?b=`<${+h+1}.0.0-0`:R(L)?b=`<${h}.${+_+1}.0-0`:j?b=`<=${h}.${_}.${L}-${j}`:m?b=`<${h}.${_}.${+L+1}-0`:b=`<=${b}`,`${f} ${b}`.trim()),q=(m,c,f)=>{for(let g=0;g<m.length;g++)if(!m[g].test(c))return!1;if(c.prerelease.length&&!f.includePrerelease){for(let g=0;g<m.length;g++)if(s(m[g].semver),m[g].semver!==i.ANY&&m[g].semver.prerelease.length>0){const y=m[g].semver;if(y.major===c.major&&y.minor===c.minor&&y.patch===c.patch)return!0}return!1}return!0};return da}var pa,vl;function co(){if(vl)return pa;vl=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(d,p){if(p=r(p),d instanceof e){if(d.loose===!!p.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),o("comparator",d,p),this.options=p,this.loose=!!p.loose,this.parse(d),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(d){const p=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],v=d.match(p);if(!v)throw new TypeError(`Invalid comparator: ${d}`);this.operator=v[1]!==void 0?v[1]:"",this.operator==="="&&(this.operator=""),v[2]?this.semver=new a(v[2],this.options.loose):this.semver=t}toString(){return this.value}test(d){if(o("Comparator.test",d,this.options.loose),this.semver===t||d===t)return!0;if(typeof d=="string")try{d=new a(d,this.options)}catch{return!1}return s(d,this.operator,this.semver,this.options)}intersects(d,p){if(!(d instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(d.value,p).test(this.value):d.operator===""?d.value===""?!0:new u(this.value,p).test(d.semver):(p=r(p),p.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!p.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||s(this.semver,"<",d.semver,p)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||s(this.semver,">",d.semver,p)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}pa=e;const r=Ac,{safeRe:n,t:i}=Qi,s=zf,o=oo,a=bt,u=Wt();return pa}const i1=Wt(),s1=(t,e,r)=>{try{e=new i1(e,r)}catch{return!1}return e.test(t)};var uo=s1;const o1=Wt(),a1=(t,e)=>new o1(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var c1=a1;const u1=bt,l1=Wt(),h1=(t,e,r)=>{let n=null,i=null,s=null;try{s=new l1(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new u1(n,r))}),n};var f1=h1;const d1=bt,p1=Wt(),g1=(t,e,r)=>{let n=null,i=null,s=null;try{s=new p1(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new d1(n,r))}),n};var v1=g1;const ga=bt,y1=Wt(),yl=ao,m1=(t,e)=>{t=new y1(t,e);let r=new ga("0.0.0");if(t.test(r)||(r=new ga("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){const i=t.set[n];let s=null;i.forEach(o=>{const a=new ga(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||yl(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||yl(r,s))&&(r=s)}return r&&t.test(r)?r:null};var b1=m1;const w1=Wt(),_1=(t,e)=>{try{return new w1(t,e).range||"*"}catch{return null}};var S1=_1;const E1=bt,qf=co(),{ANY:M1}=qf,C1=Wt(),x1=uo,ml=ao,bl=Oc,I1=Nc,R1=Tc,A1=(t,e,r,n)=>{t=new E1(t,n),e=new C1(e,n);let i,s,o,a,u;switch(r){case">":i=ml,s=I1,o=bl,a=">",u=">=";break;case"<":i=bl,s=R1,o=ml,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(x1(t,e,n))return!1;for(let l=0;l<e.set.length;++l){const d=e.set[l];let p=null,v=null;if(d.forEach(S=>{S.semver===M1&&(S=new qf(">=0.0.0")),p=p||S,v=v||S,i(S.semver,p.semver,n)?p=S:o(S.semver,v.semver,n)&&(v=S)}),p.operator===a||p.operator===u||(!v.operator||v.operator===a)&&s(t,v.semver))return!1;if(v.operator===u&&o(t,v.semver))return!1}return!0};var Lc=A1;const k1=Lc,O1=(t,e,r)=>k1(t,e,">",r);var T1=O1;const N1=Lc,L1=(t,e,r)=>N1(t,e,"<",r);var P1=L1;const wl=Wt(),$1=(t,e,r)=>(t=new wl(t,r),e=new wl(e,r),t.intersects(e,r));var D1=$1;const j1=uo,F1=Vt;var B1=(t,e,r)=>{const n=[];let i=null,s=null;const o=t.sort((d,p)=>F1(d,p,r));for(const d of o)j1(d,e,r)?(s=d,i||(i=d)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);const a=[];for(const[d,p]of n)d===p?a.push(d):!p&&d===o[0]?a.push("*"):p?d===o[0]?a.push(`<=${p}`):a.push(`${d} - ${p}`):a.push(`>=${d}`);const u=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return u.length<l.length?u:e};const _l=Wt(),Pc=co(),{ANY:va}=Pc,Si=uo,$c=Vt,V1=(t,e,r={})=>{if(t===e)return!0;t=new _l(t,r),e=new _l(e,r);let n=!1;e:for(const i of t.set){for(const s of e.set){const o=H1(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},W1=[new Pc(">=0.0.0-0")],Sl=[new Pc(">=0.0.0")],H1=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===va){if(e.length===1&&e[0].semver===va)return!0;r.includePrerelease?t=W1:t=Sl}if(e.length===1&&e[0].semver===va){if(r.includePrerelease)return!0;e=Sl}const n=new Set;let i,s;for(const S of t)S.operator===">"||S.operator===">="?i=El(i,S,r):S.operator==="<"||S.operator==="<="?s=Ml(s,S,r):n.add(S.semver);if(n.size>1)return null;let o;if(i&&s){if(o=$c(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(const S of n){if(i&&!Si(S,String(i),r)||s&&!Si(S,String(s),r))return null;for(const M of e)if(!Si(S,String(M),r))return!1;return!0}let a,u,l,d,p=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,v=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&s.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(const S of e){if(d=d||S.operator===">"||S.operator===">=",l=l||S.operator==="<"||S.operator==="<=",i){if(v&&S.semver.prerelease&&S.semver.prerelease.length&&S.semver.major===v.major&&S.semver.minor===v.minor&&S.semver.patch===v.patch&&(v=!1),S.operator===">"||S.operator===">="){if(a=El(i,S,r),a===S&&a!==i)return!1}else if(i.operator===">="&&!Si(i.semver,String(S),r))return!1}if(s){if(p&&S.semver.prerelease&&S.semver.prerelease.length&&S.semver.major===p.major&&S.semver.minor===p.minor&&S.semver.patch===p.patch&&(p=!1),S.operator==="<"||S.operator==="<="){if(u=Ml(s,S,r),u===S&&u!==s)return!1}else if(s.operator==="<="&&!Si(s.semver,String(S),r))return!1}if(!S.operator&&(s||i)&&o!==0)return!1}return!(i&&l&&!s&&o!==0||s&&d&&!i&&o!==0||v||p)},El=(t,e,r)=>{if(!t)return e;const n=$c(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},Ml=(t,e,r)=>{if(!t)return e;const n=$c(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};var z1=V1;const ya=Qi,Cl=so,U1=bt,xl=Vf,q1=ci,G1=qm,J1=Zm,Z1=Ym,Q1=Xm,Y1=rb,K1=sb,X1=cb,ew=hb,tw=Vt,rw=gb,nw=mb,iw=kc,sw=Sb,ow=Cb,aw=ao,cw=Oc,uw=Wf,lw=Hf,hw=Tc,fw=Nc,dw=zf,pw=Jb,gw=co(),vw=Wt(),yw=uo,mw=c1,bw=f1,ww=v1,_w=b1,Sw=S1,Ew=Lc,Mw=T1,Cw=P1,xw=D1,Iw=B1,Rw=z1;var Aw={parse:q1,valid:G1,clean:J1,inc:Z1,diff:Q1,major:Y1,minor:K1,patch:X1,prerelease:ew,compare:tw,rcompare:rw,compareLoose:nw,compareBuild:iw,sort:sw,rsort:ow,gt:aw,lt:cw,eq:uw,neq:lw,gte:hw,lte:fw,cmp:dw,coerce:pw,Comparator:gw,Range:vw,satisfies:yw,toComparators:mw,maxSatisfying:bw,minSatisfying:ww,minVersion:_w,validRange:Sw,outside:Ew,gtr:Mw,ltr:Cw,intersects:xw,simplifyRange:Iw,subset:Rw,SemVer:U1,re:ya.re,src:ya.src,tokens:ya.t,SEMVER_SPEC_VERSION:Cl.SEMVER_SPEC_VERSION,RELEASE_TYPES:Cl.RELEASE_TYPES,compareIdentifiers:xl.compareIdentifiers,rcompareIdentifiers:xl.rcompareIdentifiers};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.satisfiesVersionRange=t.gtRange=t.gtVersion=t.assertIsSemVerRange=t.assertIsSemVerVersion=t.isValidSemVerRange=t.isValidSemVerVersion=t.VersionRangeStruct=t.VersionStruct=void 0;const e=Aw,r=cn,n=lt;t.VersionStruct=(0,r.refine)((0,r.string)(),"Version",p=>(0,e.valid)(p)===null?`Expected SemVer version, got "${p}"`:!0),t.VersionRangeStruct=(0,r.refine)((0,r.string)(),"Version range",p=>(0,e.validRange)(p)===null?`Expected SemVer range, got "${p}"`:!0);function i(p){return(0,r.is)(p,t.VersionStruct)}t.isValidSemVerVersion=i;function s(p){return(0,r.is)(p,t.VersionRangeStruct)}t.isValidSemVerRange=s;function o(p){(0,n.assertStruct)(p,t.VersionStruct)}t.assertIsSemVerVersion=o;function a(p){(0,n.assertStruct)(p,t.VersionRangeStruct)}t.assertIsSemVerRange=a;function u(p,v){return(0,e.gt)(p,v)}t.gtVersion=u;function l(p,v){return(0,e.gtr)(p,v)}t.gtRange=l;function d(p,v){return(0,e.satisfies)(p,v,{includePrerelease:!0})}t.satisfiesVersionRange=d})(jf);(function(t){var e=F&&F.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,a)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(lt,t),r(Ji,t),r(te,t),r(no,t),r(Yt,t),r(Un,t),r(Zi,t),r(Pf,t),r(qn,t),r(Rc,t),r(Kt,t),r($f,t),r(Df,t),r(jf,t)})(vf);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.createModuleLogger=t.projectLogger=void 0;const e=vf;Object.defineProperty(t,"createModuleLogger",{enumerable:!0,get:function(){return e.createModuleLogger}}),t.projectLogger=(0,e.createProjectLogger)("eth-block-tracker")})(gf);var Gf=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(to,"__esModule",{value:!0});to.PollingBlockTracker=void 0;const kw=Gf(mc),Ow=Gf(Kv),Tw=qi,Il=gf,Rl=(0,Il.createModuleLogger)(Il.projectLogger,"polling-block-tracker"),Nw=(0,kw.default)(),Lw=1e3;class Pw extends Tw.BaseBlockTracker{constructor(e={}){var r;if(!e.provider)throw new Error("PollingBlockTracker - no provider specified.");super({blockResetDuration:(r=e.blockResetDuration)!==null&&r!==void 0?r:e.pollingInterval}),this._provider=e.provider,this._pollingInterval=e.pollingInterval||20*Lw,this._retryTimeout=e.retryTimeout||this._pollingInterval/10,this._keepEventLoopActive=e.keepEventLoopActive===void 0?!0:e.keepEventLoopActive,this._setSkipCacheFlag=e.setSkipCacheFlag||!1}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}async _start(){this._synchronize()}async _end(){}async _synchronize(){for(var e;this._isRunning;)try{await this._updateLatestBlock();const r=Al(this._pollingInterval,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await r}catch(r){const n=new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:
${(e=r.stack)!==null&&e!==void 0?e:r}`);try{this.emit("error",n)}catch{console.error(n)}const i=Al(this._retryTimeout,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await i}}async _updateLatestBlock(){const e=await this._fetchLatestBlock();this._newPotentialLatest(e)}async _fetchLatestBlock(){const e={jsonrpc:"2.0",id:Nw(),method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(e.skipCache=!0),Rl("Making request",e);const r=await(0,Ow.default)(n=>this._provider.sendAsync(e,n))();if(Rl("Got response",r),r.error)throw new Error(`PollingBlockTracker - encountered error fetching block:
${r.error.message}`);return r.result}}to.PollingBlockTracker=Pw;function Al(t,e){return new Promise(r=>{const n=setTimeout(r,t);n.unref&&e&&n.unref()})}var lo={},$w=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lo,"__esModule",{value:!0});lo.SubscribeBlockTracker=void 0;const Dw=$w(mc),jw=qi,Fw=(0,Dw.default)();class Bw extends jw.BaseBlockTracker{constructor(e={}){if(!e.provider)throw new Error("SubscribeBlockTracker - no provider specified.");super(e),this._provider=e.provider,this._subscriptionId=null}async checkForLatestBlock(){return await this.getLatestBlock()}async _start(){if(this._subscriptionId===void 0||this._subscriptionId===null)try{const e=await this._call("eth_blockNumber");this._subscriptionId=await this._call("eth_subscribe","newHeads"),this._provider.on("data",this._handleSubData.bind(this)),this._newPotentialLatest(e)}catch(e){this.emit("error",e)}}async _end(){if(this._subscriptionId!==null&&this._subscriptionId!==void 0)try{await this._call("eth_unsubscribe",this._subscriptionId),this._subscriptionId=null}catch(e){this.emit("error",e)}}_call(e,...r){return new Promise((n,i)=>{this._provider.sendAsync({id:Fw(),method:e,params:r,jsonrpc:"2.0"},(s,o)=>{s?i(s):n(o.result)})})}_handleSubData(e,r){var n;r.method==="eth_subscription"&&((n=r.params)===null||n===void 0?void 0:n.subscription)===this._subscriptionId&&this._newPotentialLatest(r.params.result.number)}}lo.SubscribeBlockTracker=Bw;var Jf={};Object.defineProperty(Jf,"__esModule",{value:!0});(function(t){var e=F&&F.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(to,t),r(lo,t),r(Jf,t)})(pf);var Dc={},ho={},Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.getUniqueId=void 0;const Zf=4294967295;let ma=Math.floor(Math.random()*Zf);function Vw(){return ma=(ma+1)%Zf,ma}Yi.getUniqueId=Vw;Object.defineProperty(ho,"__esModule",{value:!0});ho.createIdRemapMiddleware=void 0;const Ww=Yi;function Hw(){return(t,e,r,n)=>{const i=t.id,s=Ww.getUniqueId();t.id=s,e.id=s,r(o=>{t.id=i,e.id=i,o()})}}ho.createIdRemapMiddleware=Hw;var fo={};Object.defineProperty(fo,"__esModule",{value:!0});fo.createAsyncMiddleware=void 0;function zw(t){return async(e,r,n,i)=>{let s;const o=new Promise(d=>{s=d});let a=null,u=!1;const l=async()=>{u=!0,n(d=>{a=d,s()}),await o};try{await t(e,r,l),u?(await o,a(null)):i(null)}catch(d){a?a(d):i(d)}}}fo.createAsyncMiddleware=zw;var po={};Object.defineProperty(po,"__esModule",{value:!0});po.createScaffoldMiddleware=void 0;function Uw(t){return(e,r,n,i)=>{const s=t[e.method];return s===void 0?n():typeof s=="function"?s(e,r,n,i):(r.result=s,i())}}po.createScaffoldMiddleware=Uw;var Ki={},qw=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.JsonRpcEngine=void 0;const Gw=qw(sn),It=oc;class nr extends Gw.default{constructor(){super(),this._middleware=[]}push(e){this._middleware.push(e)}handle(e,r){if(r&&typeof r!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?r?this._handleBatch(e,r):this._handleBatch(e):r?this._handle(e,r):this._promiseHandle(e)}asMiddleware(){return async(e,r,n,i)=>{try{const[s,o,a]=await nr._runAllMiddleware(e,r,this._middleware);return o?(await nr._runReturnHandlers(a),i(s)):n(async u=>{try{await nr._runReturnHandlers(a)}catch(l){return u(l)}return u()})}catch(s){return i(s)}}}async _handleBatch(e,r){try{const n=await Promise.all(e.map(this._promiseHandle.bind(this)));return r?r(null,n):n}catch(n){if(r)return r(n);throw n}}_promiseHandle(e){return new Promise(r=>{this._handle(e,(n,i)=>{r(i)})})}async _handle(e,r){if(!e||Array.isArray(e)||typeof e!="object"){const o=new It.EthereumRpcError(It.errorCodes.rpc.invalidRequest,`Requests must be plain objects. Received: ${typeof e}`,{request:e});return r(o,{id:void 0,jsonrpc:"2.0",error:o})}if(typeof e.method!="string"){const o=new It.EthereumRpcError(It.errorCodes.rpc.invalidRequest,`Must specify a string method. Received: ${typeof e.method}`,{request:e});return r(o,{id:e.id,jsonrpc:"2.0",error:o})}const n=Object.assign({},e),i={id:n.id,jsonrpc:n.jsonrpc};let s=null;try{await this._processRequest(n,i)}catch(o){s=o}return s&&(delete i.result,i.error||(i.error=It.serializeError(s))),r(s,i)}async _processRequest(e,r){const[n,i,s]=await nr._runAllMiddleware(e,r,this._middleware);if(nr._checkForCompletion(e,r,i),await nr._runReturnHandlers(s),n)throw n}static async _runAllMiddleware(e,r,n){const i=[];let s=null,o=!1;for(const a of n)if([s,o]=await nr._runMiddleware(e,r,a,i),o)break;return[s,o,i.reverse()]}static _runMiddleware(e,r,n,i){return new Promise(s=>{const o=u=>{const l=u||r.error;l&&(r.error=It.serializeError(l)),s([l,!0])},a=u=>{r.error?o(r.error):(u&&(typeof u!="function"&&o(new It.EthereumRpcError(It.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof u}" for request:
${ba(e)}`,{request:e})),i.push(u)),s([null,!1]))};try{n(e,r,a,o)}catch(u){o(u)}})}static async _runReturnHandlers(e){for(const r of e)await new Promise((n,i)=>{r(s=>s?i(s):n())})}static _checkForCompletion(e,r,n){if(!("result"in r)&&!("error"in r))throw new It.EthereumRpcError(It.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:
${ba(e)}`,{request:e});if(!n)throw new It.EthereumRpcError(It.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:
${ba(e)}`,{request:e})}}Ki.JsonRpcEngine=nr;function ba(t){return JSON.stringify(t,null,2)}var go={};Object.defineProperty(go,"__esModule",{value:!0});go.mergeMiddleware=void 0;const Jw=Ki;function Zw(t){const e=new Jw.JsonRpcEngine;return t.forEach(r=>e.push(r)),e.asMiddleware()}go.mergeMiddleware=Zw;(function(t){var e=F&&F.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ho,t),r(fo,t),r(po,t),r(Yi,t),r(Ki,t),r(go,t)})(Dc);var Qf={},jc={},Ua=function(t,e){return Ua=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Ua(t,e)};function Yf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ua(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var $s=function(){return $s=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},$s.apply(this,arguments)};function Kf(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Xf(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function ed(t,e){return function(r,n){e(r,n,t)}}function Qw(t,e,r,n,i,s){function o(I){if(I!==void 0&&typeof I!="function")throw new TypeError("Function expected");return I}for(var a=n.kind,u=a==="getter"?"get":a==="setter"?"set":"value",l=!e&&t?n.static?t:t.prototype:null,d=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),p,v=!1,S=r.length-1;S>=0;S--){var M={};for(var x in n)M[x]=x==="access"?{}:n[x];for(var x in n.access)M.access[x]=n.access[x];M.addInitializer=function(I){if(v)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(I||null))};var O=(0,r[S])(a==="accessor"?{get:d.get,set:d.set}:d[u],M);if(a==="accessor"){if(O===void 0)continue;if(O===null||typeof O!="object")throw new TypeError("Object expected");(p=o(O.get))&&(d.get=p),(p=o(O.set))&&(d.set=p),(p=o(O.init))&&i.unshift(p)}else(p=o(O))&&(a==="field"?i.unshift(p):d[u]=p)}l&&Object.defineProperty(l,n.name,d),v=!0}function Yw(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function Kw(t){return typeof t=="symbol"?t:"".concat(t)}function Xw(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function td(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function rd(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(d){try{l(n.next(d))}catch(p){o(p)}}function u(d){try{l(n.throw(d))}catch(p){o(p)}}function l(d){d.done?s(d.value):i(d.value).then(a,u)}l((n=n.apply(t,e||[])).next())})}function nd(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(d){return u([l,d])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var vo=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function id(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&vo(e,t,r)}function Ds(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fc(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function sd(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Fc(arguments[e]));return t}function od(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function ad(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function Gn(t){return this instanceof Gn?(this.v=t,this):new Gn(t)}function cd(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(v){n[v]&&(i[v]=function(S){return new Promise(function(M,x){s.push([v,S,M,x])>1||a(v,S)})})}function a(v,S){try{u(n[v](S))}catch(M){p(s[0][3],M)}}function u(v){v.value instanceof Gn?Promise.resolve(v.value.v).then(l,d):p(s[0][2],v)}function l(v){a("next",v)}function d(v){a("throw",v)}function p(v,S){v(S),s.shift(),s.length&&a(s[0][0],s[0][1])}}function ud(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Gn(t[i](o)),done:!1}:s?s(o):o}:s}}function ld(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Ds=="function"?Ds(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}function hd(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var e_=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function fd(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vo(e,t,r);return e_(e,t),e}function dd(t){return t&&t.__esModule?t:{default:t}}function pd(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function gd(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function vd(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function yd(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var t_=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function md(t){function e(n){t.error=t.hasError?new t_(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,function(s){return e(s),r()})}catch(s){e(s)}}if(t.hasError)throw t.error}return r()}const r_={__extends:Yf,__assign:$s,__rest:Kf,__decorate:Xf,__param:ed,__metadata:td,__awaiter:rd,__generator:nd,__createBinding:vo,__exportStar:id,__values:Ds,__read:Fc,__spread:sd,__spreadArrays:od,__spreadArray:ad,__await:Gn,__asyncGenerator:cd,__asyncDelegator:ud,__asyncValues:ld,__makeTemplateObject:hd,__importStar:fd,__importDefault:dd,__classPrivateFieldGet:pd,__classPrivateFieldSet:gd,__classPrivateFieldIn:vd,__addDisposableResource:yd,__disposeResources:md},n_=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:yd,get __assign(){return $s},__asyncDelegator:ud,__asyncGenerator:cd,__asyncValues:ld,__await:Gn,__awaiter:rd,__classPrivateFieldGet:pd,__classPrivateFieldIn:vd,__classPrivateFieldSet:gd,__createBinding:vo,__decorate:Xf,__disposeResources:md,__esDecorate:Qw,__exportStar:id,__extends:Yf,__generator:nd,__importDefault:dd,__importStar:fd,__makeTemplateObject:hd,__metadata:td,__param:ed,__propKey:Kw,__read:Fc,__rest:Kf,__runInitializers:Yw,__setFunctionName:Xw,__spread:sd,__spreadArray:ad,__spreadArrays:od,__values:Ds,default:r_},Symbol.toStringTag,{value:"Module"})),Bc=nn(n_);var yo={};Object.defineProperty(yo,"__esModule",{value:!0});var kl=Bc,i_=function(){function t(e){if(this._maxConcurrency=e,this._queue=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}return t.prototype.acquire=function(){var e=this,r=this.isLocked(),n=new Promise(function(i){return e._queue.push(i)});return r||this._dispatch(),n},t.prototype.runExclusive=function(e){return kl.__awaiter(this,void 0,void 0,function(){var r,n,i;return kl.__generator(this,function(s){switch(s.label){case 0:return[4,this.acquire()];case 1:r=s.sent(),n=r[0],i=r[1],s.label=2;case 2:return s.trys.push([2,,4,5]),[4,e(n)];case 3:return[2,s.sent()];case 4:return i(),[7];case 5:return[2]}})})},t.prototype.isLocked=function(){return this._value<=0},t.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var e=this._currentReleaser;this._currentReleaser=void 0,e()}},t.prototype._dispatch=function(){var e=this,r=this._queue.shift();if(r){var n=!1;this._currentReleaser=function(){n||(n=!0,e._value++,e._dispatch())},r([this._value--,this._currentReleaser])}},t}();yo.default=i_;Object.defineProperty(jc,"__esModule",{value:!0});var Ol=Bc,s_=yo,o_=function(){function t(){this._semaphore=new s_.default(1)}return t.prototype.acquire=function(){return Ol.__awaiter(this,void 0,void 0,function(){var e,r;return Ol.__generator(this,function(n){switch(n.label){case 0:return[4,this._semaphore.acquire()];case 1:return e=n.sent(),r=e[1],[2,r]}})})},t.prototype.runExclusive=function(e){return this._semaphore.runExclusive(function(){return e()})},t.prototype.isLocked=function(){return this._semaphore.isLocked()},t.prototype.release=function(){this._semaphore.release()},t}();jc.default=o_;var mo={};Object.defineProperty(mo,"__esModule",{value:!0});mo.withTimeout=void 0;var ms=Bc;function a_(t,e,r){var n=this;return r===void 0&&(r=new Error("timeout")),{acquire:function(){return new Promise(function(i,s){return ms.__awaiter(n,void 0,void 0,function(){var o,a,u;return ms.__generator(this,function(l){switch(l.label){case 0:return o=!1,setTimeout(function(){o=!0,s(r)},e),[4,t.acquire()];case 1:return a=l.sent(),o?(u=Array.isArray(a)?a[1]:a,u()):i(a),[2]}})})})},runExclusive:function(i){return ms.__awaiter(this,void 0,void 0,function(){var s,o;return ms.__generator(this,function(a){switch(a.label){case 0:s=function(){},a.label=1;case 1:return a.trys.push([1,,7,8]),[4,this.acquire()];case 2:return o=a.sent(),Array.isArray(o)?(s=o[1],[4,i(o[0])]):[3,4];case 3:return[2,a.sent()];case 4:return s=o,[4,i()];case 5:return[2,a.sent()];case 6:return[3,8];case 7:return s(),[7];case 8:return[2]}})})},release:function(){t.release()},isLocked:function(){return t.isLocked()}}}mo.withTimeout=a_;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.withTimeout=t.Semaphore=t.Mutex=void 0;var e=jc;Object.defineProperty(t,"Mutex",{enumerable:!0,get:function(){return e.default}});var r=yo;Object.defineProperty(t,"Semaphore",{enumerable:!0,get:function(){return r.default}});var n=mo;Object.defineProperty(t,"withTimeout",{enumerable:!0,get:function(){return n.withTimeout}})})(Qf);var c_=l_,u_=Object.prototype.hasOwnProperty;function l_(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)u_.call(r,n)&&(t[n]=r[n])}return t}const h_=c_,f_=mc();var d_=G;function G(t){const e=this;e.currentProvider=t}G.prototype.getBalance=Xi(2,"eth_getBalance");G.prototype.getCode=Xi(2,"eth_getCode");G.prototype.getTransactionCount=Xi(2,"eth_getTransactionCount");G.prototype.getStorageAt=Xi(3,"eth_getStorageAt");G.prototype.call=Xi(2,"eth_call");G.prototype.protocolVersion=Y("eth_protocolVersion");G.prototype.syncing=Y("eth_syncing");G.prototype.coinbase=Y("eth_coinbase");G.prototype.mining=Y("eth_mining");G.prototype.hashrate=Y("eth_hashrate");G.prototype.gasPrice=Y("eth_gasPrice");G.prototype.accounts=Y("eth_accounts");G.prototype.blockNumber=Y("eth_blockNumber");G.prototype.getBlockTransactionCountByHash=Y("eth_getBlockTransactionCountByHash");G.prototype.getBlockTransactionCountByNumber=Y("eth_getBlockTransactionCountByNumber");G.prototype.getUncleCountByBlockHash=Y("eth_getUncleCountByBlockHash");G.prototype.getUncleCountByBlockNumber=Y("eth_getUncleCountByBlockNumber");G.prototype.sign=Y("eth_sign");G.prototype.sendTransaction=Y("eth_sendTransaction");G.prototype.sendRawTransaction=Y("eth_sendRawTransaction");G.prototype.estimateGas=Y("eth_estimateGas");G.prototype.getBlockByHash=Y("eth_getBlockByHash");G.prototype.getBlockByNumber=Y("eth_getBlockByNumber");G.prototype.getTransactionByHash=Y("eth_getTransactionByHash");G.prototype.getTransactionByBlockHashAndIndex=Y("eth_getTransactionByBlockHashAndIndex");G.prototype.getTransactionByBlockNumberAndIndex=Y("eth_getTransactionByBlockNumberAndIndex");G.prototype.getTransactionReceipt=Y("eth_getTransactionReceipt");G.prototype.getUncleByBlockHashAndIndex=Y("eth_getUncleByBlockHashAndIndex");G.prototype.getUncleByBlockNumberAndIndex=Y("eth_getUncleByBlockNumberAndIndex");G.prototype.getCompilers=Y("eth_getCompilers");G.prototype.compileLLL=Y("eth_compileLLL");G.prototype.compileSolidity=Y("eth_compileSolidity");G.prototype.compileSerpent=Y("eth_compileSerpent");G.prototype.newFilter=Y("eth_newFilter");G.prototype.newBlockFilter=Y("eth_newBlockFilter");G.prototype.newPendingTransactionFilter=Y("eth_newPendingTransactionFilter");G.prototype.uninstallFilter=Y("eth_uninstallFilter");G.prototype.getFilterChanges=Y("eth_getFilterChanges");G.prototype.getFilterLogs=Y("eth_getFilterLogs");G.prototype.getLogs=Y("eth_getLogs");G.prototype.getWork=Y("eth_getWork");G.prototype.submitWork=Y("eth_submitWork");G.prototype.submitHashrate=Y("eth_submitHashrate");G.prototype.sendAsync=function(t,e){this.currentProvider.sendAsync(p_(t),function(n,i){if(!n&&i.error&&(n=new Error("EthQuery - RPC Error - "+i.error.message)),n)return e(n);e(null,i.result)})};function Y(t){return function(){const e=this;var r=[].slice.call(arguments),n=r.pop();e.sendAsync({method:t,params:r},n)}}function Xi(t,e){return function(){const r=this;var n=[].slice.call(arguments),i=n.pop();n.length<t&&n.push("latest"),r.sendAsync({method:e,params:n},i)}}function p_(t){return h_({id:f_(),jsonrpc:"2.0",params:[]},t)}const Tl=(t,e,r,n)=>function(...i){const s=e.promiseModule;return new s((o,a)=>{e.multiArgs?i.push((...l)=>{e.errorFirst?l[0]?a(l):(l.shift(),o(l)):o(l)}):e.errorFirst?i.push((l,d)=>{l?a(l):o(d)}):i.push(o),Reflect.apply(t,this===r?n:this,i)})},Nl=new WeakMap;var g_=(t,e)=>{e={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...e};const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const n=(o,a)=>{let u=Nl.get(o);if(u||(u={},Nl.set(o,u)),a in u)return u[a];const l=M=>typeof M=="string"||typeof a=="symbol"?a===M:M.test(a),d=Reflect.getOwnPropertyDescriptor(o,a),p=d===void 0||d.writable||d.configurable,S=(e.include?e.include.some(l):!e.exclude.some(l))&&p;return u[a]=S,S},i=new WeakMap,s=new Proxy(t,{apply(o,a,u){const l=i.get(o);if(l)return Reflect.apply(l,a,u);const d=e.excludeMain?o:Tl(o,e,s,o);return i.set(o,d),Reflect.apply(d,a,u)},get(o,a){const u=o[a];if(!n(o,a)||u===Function.prototype[a])return u;const l=i.get(u);if(l)return l;if(typeof u=="function"){const d=Tl(u,e,s,o);return i.set(u,d),d}return u}});return s};const v_=sn.default;let y_=class extends v_{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach(r=>this.emit("update",r))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}};var Vc=y_;const m_=Vc;let b_=class extends m_{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}};var w_=b_,es={minBlockRef:__,maxBlockRef:S_,sortBlockRefs:Wc,bnToHex:E_,blockRefIsNumber:M_,hexToInt:js,incrementHexInt:C_,intToHex:bd,unsafeRandomBytes:x_};function __(...t){return Wc(t)[0]}function S_(...t){const e=Wc(t);return e[e.length-1]}function Wc(t){return t.sort((e,r)=>e==="latest"||r==="earliest"?1:r==="latest"||e==="earliest"?-1:js(e)-js(r))}function E_(t){return"0x"+t.toString(16)}function M_(t){return t&&!["earliest","latest","pending"].includes(t)}function js(t){return t==null?t:Number.parseInt(t,16)}function C_(t){if(t==null)return t;const e=js(t);return bd(e+1)}function bd(t){if(t==null)return t;let e=t.toString(16);return e.length%2&&(e="0"+e),"0x"+e}function x_(t){let e="0x";for(let r=0;r<t;r++)e+=Ll(),e+=Ll();return e}function Ll(){return Math.floor(Math.random()*16).toString(16)}const I_=d_,R_=g_,A_=w_,{bnToHex:ZC,hexToInt:bs,incrementHexInt:k_,minBlockRef:O_,blockRefIsNumber:T_}=es;let N_=class extends A_{constructor({provider:e,params:r}){super(),this.type="log",this.ethQuery=new I_(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},r),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(n=>n.toLowerCase()))}async initialize({currentBlock:e}){let r=this.params.fromBlock;["latest","pending"].includes(r)&&(r=e),r==="earliest"&&(r="0x0"),this.params.fromBlock=r;const n=O_(this.params.toBlock,e),i=Object.assign({},this.params,{toBlock:n}),s=await this._fetchLogs(i);this.addInitialResults(s)}async update({oldBlock:e,newBlock:r}){const n=r;let i;e?i=k_(e):i=r;const s=Object.assign({},this.params,{fromBlock:i,toBlock:n}),a=(await this._fetchLogs(s)).filter(u=>this.matchLog(u));this.addResults(a)}async _fetchLogs(e){return await R_(n=>this.ethQuery.getLogs(e,n))()}matchLog(e){if(bs(this.params.fromBlock)>=bs(e.blockNumber)||T_(this.params.toBlock)&&bs(this.params.toBlock)<=bs(e.blockNumber))return!1;const r=e.address&&e.address.toLowerCase();return this.params.address&&r&&!this.params.address.includes(r)?!1:this.params.topics.every((i,s)=>{let o=e.topics[s];if(!o)return!1;o=o.toLowerCase();let a=Array.isArray(i)?i:[i];return a.includes(null)?!0:(a=a.map(d=>d.toLowerCase()),a.includes(o))})}};var L_=N_,Hc=P_;async function P_({provider:t,fromBlock:e,toBlock:r}){e||(e=r);const n=Pl(e),s=Pl(r)-n+1,o=Array(s).fill().map((u,l)=>n+l).map($_);return await Promise.all(o.map(u=>j_(t,"eth_getBlockByNumber",[u,!1])))}function Pl(t){return t==null?t:Number.parseInt(t,16)}function $_(t){return t==null?t:"0x"+t.toString(16)}function D_(t,e){return new Promise((r,n)=>{t.sendAsync(e,(i,s)=>{i?n(i):s.error?n(s.error):s.result?r(s.result):n(new Error("Result was empty"))})})}async function j_(t,e,r){for(let n=0;n<3;n++)try{return await D_(t,{id:1,jsonrpc:"2.0",method:e,params:r})}catch(i){console.error(`provider.sendAsync failed: ${i.stack||i.message||i}`)}throw new Error(`Block not found for params: ${JSON.stringify(r)}`)}const F_=Vc,B_=Hc,{incrementHexInt:V_}=es;let W_=class extends F_{constructor({provider:e,params:r}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:r}){const n=r,i=V_(e),o=(await B_({provider:this.provider,fromBlock:i,toBlock:n})).map(a=>a.hash);this.addResults(o)}};var H_=W_;const z_=Vc,U_=Hc,{incrementHexInt:q_}=es;let G_=class extends z_{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const r=e,n=q_(e),i=await U_({provider:this.provider,fromBlock:n,toBlock:r}),s=[];for(const o of i)s.push(...o.transactions);this.addResults(s)}};var J_=G_;const Z_=Qf.Mutex,{createAsyncMiddleware:Q_,createScaffoldMiddleware:Y_}=Dc,K_=L_,X_=H_,e2=J_,{intToHex:wd,hexToInt:wa}=es;var t2=r2;function r2({blockTracker:t,provider:e}){let r=0,n={};const i=new Z_,s=n2({mutex:i}),o=Y_({eth_newFilter:s(_a(u)),eth_newBlockFilter:s(_a(l)),eth_newPendingTransactionFilter:s(_a(d)),eth_uninstallFilter:s(Cs(S)),eth_getFilterChanges:s(Cs(p)),eth_getFilterLogs:s(Cs(v))}),a=async({oldBlock:R,newBlock:T})=>{if(n.length===0)return;const N=await i.acquire();try{await Promise.all(xn(n).map(async k=>{try{await k.update({oldBlock:R,newBlock:T})}catch(P){console.error(P)}}))}catch(k){console.error(k)}N()};return o.newLogFilter=u,o.newBlockFilter=l,o.newPendingTransactionFilter=d,o.uninstallFilter=S,o.getFilterChanges=p,o.getFilterLogs=v,o.destroy=()=>{O()},o;async function u(R){const T=new K_({provider:e,params:R});return await M(T),T}async function l(){const R=new X_({provider:e});return await M(R),R}async function d(){const R=new e2({provider:e});return await M(R),R}async function p(R){const T=wa(R),N=n[T];if(!N)throw new Error(`No filter for index "${T}"`);return N.getChangesAndClear()}async function v(R){const T=wa(R),N=n[T];if(!N)throw new Error(`No filter for index "${T}"`);let k=[];return N.type==="log"&&(k=N.getAllResults()),k}async function S(R){const T=wa(R),k=!!n[T];return k&&await x(T),k}async function M(R){const T=xn(n).length,N=await t.getLatestBlock();await R.initialize({currentBlock:N}),r++,n[r]=R,R.id=r,R.idHex=wd(r);const k=xn(n).length;return I({prevFilterCount:T,newFilterCount:k}),r}async function x(R){const T=xn(n).length;delete n[R];const N=xn(n).length;I({prevFilterCount:T,newFilterCount:N})}async function O(){const R=xn(n).length;n={},I({prevFilterCount:R,newFilterCount:0})}function I({prevFilterCount:R,newFilterCount:T}){if(R===0&&T>0){t.on("sync",a);return}if(R>0&&T===0){t.removeListener("sync",a);return}}}function _a(t){return Cs(async(...e)=>{const r=await t(...e);return wd(r.id)})}function Cs(t){return Q_(async(e,r)=>{const n=await t.apply(null,e.params);r.result=n})}function n2({mutex:t}){return e=>async(r,n,i,s)=>{(await t.acquire())(),e(r,n,i,s)}}function xn(t,e){const r=[];for(let n in t)r.push(t[n]);return r}const i2=sn.default,{createAsyncMiddleware:$l,createScaffoldMiddleware:s2}=Dc,o2=t2,{unsafeRandomBytes:a2,incrementHexInt:c2}=es,u2=Hc;var l2=h2;function h2({blockTracker:t,provider:e}){const r={},n=o2({blockTracker:t,provider:e});let i=!1;const s=new i2,o=s2({eth_subscribe:$l(a),eth_unsubscribe:$l(u)});return o.destroy=d,{events:s,middleware:o};async function a(p,v){if(i)throw new Error("SubscriptionManager - attempting to use after destroying");const S=p.params[0],M=a2(16);let x;switch(S){case"newHeads":x=O({subId:M});break;case"logs":const R=p.params[1],T=await n.newLogFilter(R);x=I({subId:M,filter:T});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${S}"`)}r[M]=x,v.result=M;return;function O({subId:R}){const T={type:S,destroy:async()=>{t.removeListener("sync",T.update)},update:async({oldBlock:N,newBlock:k})=>{const P=k,W=c2(N);(await u2({provider:e,fromBlock:W,toBlock:P})).map(f2).filter(z=>z!==null).forEach(z=>{l(R,z)})}};return t.on("sync",T.update),T}function I({subId:R,filter:T}){return T.on("update",k=>l(R,k)),{type:S,destroy:async()=>await n.uninstallFilter(T.idHex)}}}async function u(p,v){if(i)throw new Error("SubscriptionManager - attempting to use after destroying");const S=p.params[0],M=r[S];if(!M){v.result=!1;return}delete r[S],await M.destroy(),v.result=!0}function l(p,v){s.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:p,result:v}})}function d(){s.removeAllListeners();for(const p in r)r[p].destroy(),delete r[p];i=!0}}function f2(t){return t==null?null:{hash:t.hash,parentHash:t.parentHash,sha3Uncles:t.sha3Uncles,miner:t.miner,stateRoot:t.stateRoot,transactionsRoot:t.transactionsRoot,receiptsRoot:t.receiptsRoot,logsBloom:t.logsBloom,difficulty:t.difficulty,number:t.number,gasLimit:t.gasLimit,gasUsed:t.gasUsed,nonce:t.nonce,mixHash:t.mixHash,timestamp:t.timestamp,extraData:t.extraData}}Object.defineProperty(eo,"__esModule",{value:!0});eo.SubscriptionManager=void 0;const d2=pf,p2=l2,Dl=()=>{};class g2{constructor(e){const r=new d2.PollingBlockTracker({provider:e,pollingInterval:15e3,setSkipCacheFlag:!0}),{events:n,middleware:i}=p2({blockTracker:r,provider:e});this.events=n,this.subscriptionMiddleware=i}async handleRequest(e){const r={};return await this.subscriptionMiddleware(e,r,Dl,Dl),r}destroy(){this.subscriptionMiddleware.destroy()}}eo.SubscriptionManager=g2;var zc=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.CoinbaseWalletProvider=void 0;const v2=zc(sn),y2=zc(Zs),Sa=ti,se=Vi,jl=ni,Fl=Bt,Ea=Ys,m2=ce,Z=$,Ma=zc(Gv),b2=zn,ne=df,w2=eo,Bl="DefaultChainId",Vl="DefaultJsonRpcUrl";class _2 extends v2.default{constructor(e){var r,n;super(),this._filterPolyfill=new b2.FilterPolyfill(this),this._subscriptionManager=new w2.SubscriptionManager(this),this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1,this.setProviderInfo=this.setProviderInfo.bind(this),this.updateProviderInfo=this.updateProviderInfo.bind(this),this.getChainId=this.getChainId.bind(this),this.setAppInfo=this.setAppInfo.bind(this),this.enable=this.enable.bind(this),this.close=this.close.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this.request=this.request.bind(this),this._setAddresses=this._setAddresses.bind(this),this.scanQRCode=this.scanQRCode.bind(this),this.genericRequest=this.genericRequest.bind(this),this._chainIdFromOpts=e.chainId,this._jsonRpcUrlFromOpts=e.jsonRpcUrl,this._overrideIsMetaMask=e.overrideIsMetaMask,this._relayProvider=e.relayProvider,this._storage=e.storage,this._relayEventManager=e.relayEventManager,this.diagnostic=e.diagnosticLogger,this.reloadOnDisconnect=!0,this.isCoinbaseWallet=(r=e.overrideIsCoinbaseWallet)!==null&&r!==void 0?r:!0,this.isCoinbaseBrowser=(n=e.overrideIsCoinbaseBrowser)!==null&&n!==void 0?n:!1,this.qrUrl=e.qrUrl;const i=this.getChainId(),s=(0,Z.prepend0x)(i.toString(16));this.emit("connect",{chainIdStr:s});const o=this._storage.getItem(Fl.LOCAL_STORAGE_ADDRESSES_KEY);if(o){const a=o.split(" ");a[0]!==""&&(this._addresses=a.map(u=>(0,Z.ensureAddressString)(u)),this.emit("accountsChanged",a))}this._subscriptionManager.events.on("notification",a=>{this.emit("message",{type:a.method,data:a.params})}),this._isAuthorized()&&this.initializeRelay(),window.addEventListener("message",a=>{var u;if(!(a.origin!==location.origin||a.source!==window)&&a.data.type==="walletLinkMessage"){if(a.data.data.action==="dappChainSwitched"){const l=a.data.data.chainId,d=(u=a.data.data.jsonRpcUrl)!==null&&u!==void 0?u:this.jsonRpcUrl;this.updateProviderInfo(d,Number(l))}a.data.data.action==="addressChanged"&&this._setAddresses([a.data.data.address])}})}get selectedAddress(){return this._addresses[0]||void 0}get networkVersion(){return this.getChainId().toString(10)}get chainId(){return(0,Z.prepend0x)(this.getChainId().toString(16))}get isWalletLink(){return!0}get isMetaMask(){return this._overrideIsMetaMask}get host(){return this.jsonRpcUrl}get connected(){return!0}isConnected(){return!0}get jsonRpcUrl(){var e;return(e=this._storage.getItem(Vl))!==null&&e!==void 0?e:this._jsonRpcUrlFromOpts}set jsonRpcUrl(e){this._storage.setItem(Vl,e)}disableReloadOnDisconnect(){this.reloadOnDisconnect=!1}setProviderInfo(e,r){this.isCoinbaseBrowser||(this._chainIdFromOpts=r,this._jsonRpcUrlFromOpts=e),this.updateProviderInfo(this.jsonRpcUrl,this.getChainId())}updateProviderInfo(e,r){this.jsonRpcUrl=e;const n=this.getChainId();this._storage.setItem(Bl,r.toString(10)),((0,Z.ensureIntNumber)(r)!==n||!this.hasMadeFirstChainChangedEmission)&&(this.emit("chainChanged",this.getChainId()),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(e,r,n,i,s,o){return!!(await(await this.initializeRelay()).watchAsset(e,r,n,i,s,o?.toString()).promise).result}async addEthereumChain(e,r,n,i,s,o){var a,u;if((0,Z.ensureIntNumber)(e)===this.getChainId())return!1;const l=await this.initializeRelay(),d=l.inlineAddEthereumChain(e.toString());!this._isAuthorized()&&!d&&await l.requestEthereumAccounts().promise;const p=await l.addEthereumChain(e.toString(),r,s,n,i,o).promise;return((a=p.result)===null||a===void 0?void 0:a.isApproved)===!0&&this.updateProviderInfo(r[0],e),((u=p.result)===null||u===void 0?void 0:u.isApproved)===!0}async switchEthereumChain(e){const n=await(await this.initializeRelay()).switchEthereumChain(e.toString(10),this.selectedAddress||void 0).promise;if((0,m2.isErrorResponse)(n)&&n.errorCode)throw n.errorCode===se.standardErrorCodes.provider.unsupportedChain?se.standardErrors.provider.unsupportedChain(e):se.standardErrors.provider.custom({message:n.errorMessage,code:n.errorCode});const i=n.result;i.isApproved&&i.rpcUrl.length>0&&this.updateProviderInfo(i.rpcUrl,e)}setAppInfo(e,r){this.initializeRelay().then(n=>n.setAppInfo(e,r))}async enable(){var e;return(e=this.diagnostic)===null||e===void 0||e.log(Sa.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::enable",addresses_length:this._addresses.length,sessionIdHash:this._relay?jl.Session.hash(this._relay.session.id):void 0}),this._isAuthorized()?[...this._addresses]:await this.send(ne.JSONRPCMethod.eth_requestAccounts)}async close(){(await this.initializeRelay()).resetAndReload()}send(e,r){try{const n=this._send(e,r);if(n instanceof Promise)return n.catch(i=>{throw(0,se.serializeError)(i,e)})}catch(n){throw(0,se.serializeError)(n,e)}}_send(e,r){if(typeof e=="string"){const i=e,s=Array.isArray(r)?r:r!==void 0?[r]:[],o={jsonrpc:"2.0",id:0,method:i,params:s};return this._sendRequestAsync(o).then(a=>a.result)}if(typeof r=="function"){const i=e,s=r;return this._sendAsync(i,s)}if(Array.isArray(e))return e.map(s=>this._sendRequest(s));const n=e;return this._sendRequest(n)}async sendAsync(e,r){try{return this._sendAsync(e,r).catch(n=>{throw(0,se.serializeError)(n,e)})}catch(n){return Promise.reject((0,se.serializeError)(n,e))}}async _sendAsync(e,r){if(typeof r!="function")throw new Error("callback is required");if(Array.isArray(e)){const i=r;this._sendMultipleRequestsAsync(e).then(s=>i(null,s)).catch(s=>i(s,null));return}const n=r;return this._sendRequestAsync(e).then(i=>n(null,i)).catch(i=>n(i,null))}async request(e){try{return this._request(e).catch(r=>{throw(0,se.serializeError)(r,e.method)})}catch(r){return Promise.reject((0,se.serializeError)(r,e.method))}}async _request(e){if(!e||typeof e!="object"||Array.isArray(e))throw se.standardErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:e});const{method:r,params:n}=e;if(typeof r!="string"||r.length===0)throw se.standardErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:e});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw se.standardErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:e});const i=n===void 0?[]:n,s=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:r,params:i,jsonrpc:"2.0",id:s})).result}async scanQRCode(e){var r;const i=await(await this.initializeRelay()).scanQRCode((0,Z.ensureRegExpString)(e)).promise;if(typeof i.result!="string")throw(0,se.serializeError)((r=i.errorMessage)!==null&&r!==void 0?r:"result was not a string",Ea.Web3Method.scanQRCode);return i.result}async genericRequest(e,r){var n;const s=await(await this.initializeRelay()).genericRequest(e,r).promise;if(typeof s.result!="string")throw(0,se.serializeError)((n=s.errorMessage)!==null&&n!==void 0?n:"result was not a string",Ea.Web3Method.generic);return s.result}async selectProvider(e){var r;const i=await(await this.initializeRelay()).selectProvider(e).promise;if(typeof i.result!="string")throw(0,se.serializeError)((r=i.errorMessage)!==null&&r!==void 0?r:"result was not a string",Ea.Web3Method.selectProvider);return i.result}supportsSubscriptions(){return!1}subscribe(){throw new Error("Subscriptions are not supported")}unsubscribe(){throw new Error("Subscriptions are not supported")}disconnect(){return!0}_sendRequest(e){const r={jsonrpc:"2.0",id:e.id},{method:n}=e;if(r.result=this._handleSynchronousMethods(e),r.result===void 0)throw new Error(`Coinbase Wallet does not support calling ${n} synchronously without a callback. Please provide a callback parameter to call ${n} asynchronously.`);return r}_setAddresses(e,r){if(!Array.isArray(e))throw new Error("addresses is not an array");const n=e.map(i=>(0,Z.ensureAddressString)(i));JSON.stringify(n)!==JSON.stringify(this._addresses)&&(this._addresses=n,this.emit("accountsChanged",this._addresses),this._storage.setItem(Fl.LOCAL_STORAGE_ADDRESSES_KEY,n.join(" ")))}_sendRequestAsync(e){return new Promise((r,n)=>{try{const i=this._handleSynchronousMethods(e);if(i!==void 0)return r({jsonrpc:"2.0",id:e.id,result:i});const s=this._handleAsynchronousFilterMethods(e);if(s!==void 0){s.then(a=>r(Object.assign(Object.assign({},a),{id:e.id}))).catch(a=>n(a));return}const o=this._handleSubscriptionMethods(e);if(o!==void 0){o.then(a=>r({jsonrpc:"2.0",id:e.id,result:a.result})).catch(a=>n(a));return}}catch(i){return n(i)}this._handleAsynchronousMethods(e).then(i=>i&&r(Object.assign(Object.assign({},i),{id:e.id}))).catch(i=>n(i))})}_sendMultipleRequestsAsync(e){return Promise.all(e.map(r=>this._sendRequestAsync(r)))}_handleSynchronousMethods(e){const{method:r}=e,n=e.params||[];switch(r){case ne.JSONRPCMethod.eth_accounts:return this._eth_accounts();case ne.JSONRPCMethod.eth_coinbase:return this._eth_coinbase();case ne.JSONRPCMethod.eth_uninstallFilter:return this._eth_uninstallFilter(n);case ne.JSONRPCMethod.net_version:return this._net_version();case ne.JSONRPCMethod.eth_chainId:return this._eth_chainId();default:return}}async _handleAsynchronousMethods(e){const{method:r}=e,n=e.params||[];switch(r){case ne.JSONRPCMethod.eth_requestAccounts:return this._eth_requestAccounts();case ne.JSONRPCMethod.eth_sign:return this._eth_sign(n);case ne.JSONRPCMethod.eth_ecRecover:return this._eth_ecRecover(n);case ne.JSONRPCMethod.personal_sign:return this._personal_sign(n);case ne.JSONRPCMethod.personal_ecRecover:return this._personal_ecRecover(n);case ne.JSONRPCMethod.eth_signTransaction:return this._eth_signTransaction(n);case ne.JSONRPCMethod.eth_sendRawTransaction:return this._eth_sendRawTransaction(n);case ne.JSONRPCMethod.eth_sendTransaction:return this._eth_sendTransaction(n);case ne.JSONRPCMethod.eth_signTypedData_v1:return this._eth_signTypedData_v1(n);case ne.JSONRPCMethod.eth_signTypedData_v2:return this._throwUnsupportedMethodError();case ne.JSONRPCMethod.eth_signTypedData_v3:return this._eth_signTypedData_v3(n);case ne.JSONRPCMethod.eth_signTypedData_v4:case ne.JSONRPCMethod.eth_signTypedData:return this._eth_signTypedData_v4(n);case ne.JSONRPCMethod.cbWallet_arbitrary:return this._cbwallet_arbitrary(n);case ne.JSONRPCMethod.wallet_addEthereumChain:return this._wallet_addEthereumChain(n);case ne.JSONRPCMethod.wallet_switchEthereumChain:return this._wallet_switchEthereumChain(n);case ne.JSONRPCMethod.wallet_watchAsset:return this._wallet_watchAsset(n)}return(await this.initializeRelay()).makeEthereumJSONRPCRequest(e,this.jsonRpcUrl)}_handleAsynchronousFilterMethods(e){const{method:r}=e,n=e.params||[];switch(r){case ne.JSONRPCMethod.eth_newFilter:return this._eth_newFilter(n);case ne.JSONRPCMethod.eth_newBlockFilter:return this._eth_newBlockFilter();case ne.JSONRPCMethod.eth_newPendingTransactionFilter:return this._eth_newPendingTransactionFilter();case ne.JSONRPCMethod.eth_getFilterChanges:return this._eth_getFilterChanges(n);case ne.JSONRPCMethod.eth_getFilterLogs:return this._eth_getFilterLogs(n)}}_handleSubscriptionMethods(e){switch(e.method){case ne.JSONRPCMethod.eth_subscribe:case ne.JSONRPCMethod.eth_unsubscribe:return this._subscriptionManager.handleRequest(e)}}_isKnownAddress(e){try{const r=(0,Z.ensureAddressString)(e);return this._addresses.map(i=>(0,Z.ensureAddressString)(i)).includes(r)}catch{}return!1}_ensureKnownAddress(e){var r;if(!this._isKnownAddress(e))throw(r=this.diagnostic)===null||r===void 0||r.log(Sa.EVENTS.UNKNOWN_ADDRESS_ENCOUNTERED),new Error("Unknown Ethereum address")}_prepareTransactionParams(e){const r=e.from?(0,Z.ensureAddressString)(e.from):this.selectedAddress;if(!r)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(r);const n=e.to?(0,Z.ensureAddressString)(e.to):null,i=e.value!=null?(0,Z.ensureBN)(e.value):new y2.default(0),s=e.data?(0,Z.ensureBuffer)(e.data):Buffer.alloc(0),o=e.nonce!=null?(0,Z.ensureIntNumber)(e.nonce):null,a=e.gasPrice!=null?(0,Z.ensureBN)(e.gasPrice):null,u=e.maxFeePerGas!=null?(0,Z.ensureBN)(e.maxFeePerGas):null,l=e.maxPriorityFeePerGas!=null?(0,Z.ensureBN)(e.maxPriorityFeePerGas):null,d=e.gas!=null?(0,Z.ensureBN)(e.gas):null,p=this.getChainId();return{fromAddress:r,toAddress:n,weiValue:i,data:s,nonce:o,gasPriceInWei:a,maxFeePerGas:u,maxPriorityFeePerGas:l,gasLimit:d,chainId:p}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw se.standardErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw se.standardErrors.provider.unsupportedMethod({})}async _signEthereumMessage(e,r,n,i){this._ensureKnownAddress(r);try{return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).signEthereumMessage(e,r,n,i).promise).result}}catch(s){throw typeof s.message=="string"&&s.message.match(/(denied|rejected)/i)?se.standardErrors.provider.userRejectedRequest("User denied message signature"):s}}async _ethereumAddressFromSignedMessage(e,r,n){return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).ethereumAddressFromSignedMessage(e,r,n).promise).result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,Z.hexStringFromIntNumber)(this.getChainId())}getChainId(){const e=this._storage.getItem(Bl);if(!e)return(0,Z.ensureIntNumber)(this._chainIdFromOpts);const r=parseInt(e,10);return(0,Z.ensureIntNumber)(r)}async _eth_requestAccounts(){var e;if((e=this.diagnostic)===null||e===void 0||e.log(Sa.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::_eth_requestAccounts",addresses_length:this._addresses.length,sessionIdHash:this._relay?jl.Session.hash(this._relay.session.id):void 0}),this._isAuthorized())return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});let r;try{r=await(await this.initializeRelay()).requestEthereumAccounts().promise}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?se.standardErrors.provider.userRejectedRequest("User denied account authorization"):n}if(!r.result)throw new Error("accounts received is empty");return this._setAddresses(r.result),this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(e){this._requireAuthorization();const r=(0,Z.ensureAddressString)(e[0]),n=(0,Z.ensureBuffer)(e[1]);return this._signEthereumMessage(n,r,!1)}_eth_ecRecover(e){const r=(0,Z.ensureBuffer)(e[0]),n=(0,Z.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(r,n,!1)}_personal_sign(e){this._requireAuthorization();const r=(0,Z.ensureBuffer)(e[0]),n=(0,Z.ensureAddressString)(e[1]);return this._signEthereumMessage(r,n,!0)}_personal_ecRecover(e){const r=(0,Z.ensureBuffer)(e[0]),n=(0,Z.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(r,n,!0)}async _eth_signTransaction(e){this._requireAuthorization();const r=this._prepareTransactionParams(e[0]||{});try{return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).signEthereumTransaction(r).promise).result}}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?se.standardErrors.provider.userRejectedRequest("User denied transaction signature"):n}}async _eth_sendRawTransaction(e){const r=(0,Z.ensureBuffer)(e[0]);return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).submitEthereumTransaction(r,this.getChainId()).promise).result}}async _eth_sendTransaction(e){this._requireAuthorization();const r=this._prepareTransactionParams(e[0]||{});try{return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).signAndSubmitEthereumTransaction(r).promise).result}}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?se.standardErrors.provider.userRejectedRequest("User denied transaction signature"):n}}async _eth_signTypedData_v1(e){this._requireAuthorization();const r=(0,Z.ensureParsedJSONObject)(e[0]),n=(0,Z.ensureAddressString)(e[1]);this._ensureKnownAddress(n);const i=Ma.default.hashForSignTypedDataLegacy({data:r}),s=JSON.stringify(r,null,2);return this._signEthereumMessage(i,n,!1,s)}async _eth_signTypedData_v3(e){this._requireAuthorization();const r=(0,Z.ensureAddressString)(e[0]),n=(0,Z.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(r);const i=Ma.default.hashForSignTypedData_v3({data:n}),s=JSON.stringify(n,null,2);return this._signEthereumMessage(i,r,!1,s)}async _eth_signTypedData_v4(e){this._requireAuthorization();const r=(0,Z.ensureAddressString)(e[0]),n=(0,Z.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(r);const i=Ma.default.hashForSignTypedData_v4({data:n}),s=JSON.stringify(n,null,2);return this._signEthereumMessage(i,r,!1,s)}async _cbwallet_arbitrary(e){const r=e[0],n=e[1];if(typeof n!="string")throw new Error("parameter must be a string");if(typeof r!="object"||r===null)throw new Error("parameter must be an object");return{jsonrpc:"2.0",id:0,result:await this.genericRequest(r,n)}}async _wallet_addEthereumChain(e){var r,n,i,s;const o=e[0];if(((r=o.rpcUrls)===null||r===void 0?void 0:r.length)===0)return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!o.chainName||o.chainName.trim()==="")throw se.standardErrors.rpc.invalidParams("chainName is a required field");if(!o.nativeCurrency)throw se.standardErrors.rpc.invalidParams("nativeCurrency is a required field");const a=parseInt(o.chainId,16);return await this.addEthereumChain(a,(n=o.rpcUrls)!==null&&n!==void 0?n:[],(i=o.blockExplorerUrls)!==null&&i!==void 0?i:[],o.chainName,(s=o.iconUrls)!==null&&s!==void 0?s:[],o.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(e){const r=e[0];return await this.switchEthereumChain(parseInt(r.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(e){const r=Array.isArray(e)?e[0]:e;if(!r.type)throw se.standardErrors.rpc.invalidParams("Type is required");if(r?.type!=="ERC20")throw se.standardErrors.rpc.invalidParams(`Asset of type '${r.type}' is not supported`);if(!r?.options)throw se.standardErrors.rpc.invalidParams("Options are required");if(!r?.options.address)throw se.standardErrors.rpc.invalidParams("Address is required");const n=this.getChainId(),{address:i,symbol:s,image:o,decimals:a}=r.options;return{jsonrpc:"2.0",id:0,result:await this.watchAsset(r.type,i,s,a,o,n)}}_eth_uninstallFilter(e){const r=(0,Z.ensureHexString)(e[0]);return this._filterPolyfill.uninstallFilter(r)}async _eth_newFilter(e){const r=e[0];return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newFilter(r)}}async _eth_newBlockFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newBlockFilter()}}async _eth_newPendingTransactionFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newPendingTransactionFilter()}}_eth_getFilterChanges(e){const r=(0,Z.ensureHexString)(e[0]);return this._filterPolyfill.getFilterChanges(r)}_eth_getFilterLogs(e){const r=(0,Z.ensureHexString)(e[0]);return this._filterPolyfill.getFilterLogs(r)}initializeRelay(){return this._relay?Promise.resolve(this._relay):this._relayProvider().then(e=>(e.setAccountsCallback((r,n)=>this._setAddresses(r,n)),e.setChainCallback((r,n)=>{this.updateProviderInfo(n,parseInt(r,10))}),e.setDappDefaultChainCallback(this._chainIdFromOpts),this._relay=e,e))}}Bn.CoinbaseWalletProvider=_2;var bo={},wo={},ts,J,_d,Sd,qr,Wl,Ed,qa,Md,jn={},Cd=[],S2=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,_o=Array.isArray;function or(t,e){for(var r in e)t[r]=e[r];return t}function xd(t){var e=t.parentNode;e&&e.removeChild(t)}function Ga(t,e,r){var n,i,s,o={};for(s in e)s=="key"?n=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?ts.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]===void 0&&(o[s]=t.defaultProps[s]);return Oi(t,o,n,i,null)}function Oi(t,e,r,n,i){var s={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++_d};return i==null&&J.vnode!=null&&J.vnode(s),s}function E2(){return{current:null}}function rs(t){return t.children}function Ti(t,e){this.props=t,this.context=e}function Di(t,e){if(e==null)return t.__?Di(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__d||r.__e;return typeof t.type=="function"?Di(t):null}function Id(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Id(t)}}function Ja(t){(!t.__d&&(t.__d=!0)&&qr.push(t)&&!Fs.__r++||Wl!==J.debounceRendering)&&((Wl=J.debounceRendering)||Ed)(Fs)}function Fs(){var t,e,r,n,i,s,o,a,u;for(qr.sort(qa);t=qr.shift();)t.__d&&(e=qr.length,n=void 0,i=void 0,s=void 0,a=(o=(r=t).__v).__e,(u=r.__P)&&(n=[],i=[],(s=or({},o)).__v=o.__v+1,Uc(u,o,s,r.__n,u.ownerSVGElement!==void 0,o.__h!=null?[a]:null,n,a??Di(o),o.__h,i),Td(n,o,i),o.__e!=a&&Id(o)),qr.length>e&&qr.sort(qa));Fs.__r=0}function Rd(t,e,r,n,i,s,o,a,u,l,d){var p,v,S,M,x,O,I,R,T,N=0,k=n&&n.__k||Cd,P=k.length,W=P,ee=e.length;for(r.__k=[],p=0;p<ee;p++)(M=r.__k[p]=(M=e[p])==null||typeof M=="boolean"||typeof M=="function"?null:typeof M=="string"||typeof M=="number"||typeof M=="bigint"?Oi(null,M,null,null,M):_o(M)?Oi(rs,{children:M},null,null,null):M.__b>0?Oi(M.type,M.props,M.key,M.ref?M.ref:null,M.__v):M)!=null?(M.__=r,M.__b=r.__b+1,(R=M2(M,k,I=p+N,W))===-1?S=jn:(S=k[R]||jn,k[R]=void 0,W--),Uc(t,M,S,i,s,o,a,u,l,d),x=M.__e,(v=M.ref)&&S.ref!=v&&(S.ref&&qc(S.ref,null,M),d.push(v,M.__c||x,M)),x!=null&&(O==null&&(O=x),(T=S===jn||S.__v===null)?R==-1&&N--:R!==I&&(R===I+1?N++:R>I?W>ee-I?N+=R-I:N--:N=R<I&&R==I-1?R-I:0),I=p+N,typeof M.type!="function"||R===I&&S.__k!==M.__k?typeof M.type=="function"||R===I&&!T?M.__d!==void 0?(u=M.__d,M.__d=void 0):u=x.nextSibling:u=Od(t,x,u):u=Ad(M,u,t),typeof r.type=="function"&&(r.__d=u))):(S=k[p])&&S.key==null&&S.__e&&(S.__e==u&&(S.__=n,u=Di(S)),Za(S,S,!1),k[p]=null);for(r.__e=O,p=P;p--;)k[p]!=null&&(typeof r.type=="function"&&k[p].__e!=null&&k[p].__e==r.__d&&(r.__d=k[p].__e.nextSibling),Za(k[p],k[p]))}function Ad(t,e,r){for(var n,i=t.__k,s=0;i&&s<i.length;s++)(n=i[s])&&(n.__=t,e=typeof n.type=="function"?Ad(n,e,r):Od(r,n.__e,e));return e}function kd(t,e){return e=e||[],t==null||typeof t=="boolean"||(_o(t)?t.some(function(r){kd(r,e)}):e.push(t)),e}function Od(t,e,r){return r==null||r.parentNode!==t?t.insertBefore(e,null):e==r&&e.parentNode!=null||t.insertBefore(e,r),e.nextSibling}function M2(t,e,r,n){var i=t.key,s=t.type,o=r-1,a=r+1,u=e[r];if(u===null||u&&i==u.key&&s===u.type)return r;if(n>(u!=null?1:0))for(;o>=0||a<e.length;){if(o>=0){if((u=e[o])&&i==u.key&&s===u.type)return o;o--}if(a<e.length){if((u=e[a])&&i==u.key&&s===u.type)return a;a++}}return-1}function C2(t,e,r,n,i){var s;for(s in r)s==="children"||s==="key"||s in e||Bs(t,s,null,r[s],n);for(s in e)i&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||r[s]===e[s]||Bs(t,s,e[s],r[s],n)}function Hl(t,e,r){e[0]==="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||S2.test(e)?r:r+"px"}function Bs(t,e,r,n,i){var s;e:if(e==="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||Hl(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||Hl(t.style,e,r[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=r,r?n?r.u=n.u:(r.u=Date.now(),t.addEventListener(e,s?Ul:zl,s)):t.removeEventListener(e,s?Ul:zl,s);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,r))}}function zl(t){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(J.event?J.event(t):t)}function Ul(t){return this.l[t.type+!0](J.event?J.event(t):t)}function Uc(t,e,r,n,i,s,o,a,u,l){var d,p,v,S,M,x,O,I,R,T,N,k,P,W,ee,D=e.type;if(e.constructor!==void 0)return null;r.__h!=null&&(u=r.__h,a=e.__e=r.__e,e.__h=null,s=[a]),(d=J.__b)&&d(e);e:if(typeof D=="function")try{if(I=e.props,R=(d=D.contextType)&&n[d.__c],T=d?R?R.props.value:d.__:n,r.__c?O=(p=e.__c=r.__c).__=p.__E:("prototype"in D&&D.prototype.render?e.__c=p=new D(I,T):(e.__c=p=new Ti(I,T),p.constructor=D,p.render=I2),R&&R.sub(p),p.props=I,p.state||(p.state={}),p.context=T,p.__n=n,v=p.__d=!0,p.__h=[],p._sb=[]),p.__s==null&&(p.__s=p.state),D.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=or({},p.__s)),or(p.__s,D.getDerivedStateFromProps(I,p.__s))),S=p.props,M=p.state,p.__v=e,v)D.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(D.getDerivedStateFromProps==null&&I!==S&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(I,T),!p.__e&&(p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(I,p.__s,T)===!1||e.__v===r.__v)){for(e.__v!==r.__v&&(p.props=I,p.state=p.__s,p.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.forEach(function(z){z&&(z.__=e)}),N=0;N<p._sb.length;N++)p.__h.push(p._sb[N]);p._sb=[],p.__h.length&&o.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(I,p.__s,T),p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(S,M,x)})}if(p.context=T,p.props=I,p.__P=t,p.__e=!1,k=J.__r,P=0,"prototype"in D&&D.prototype.render){for(p.state=p.__s,p.__d=!1,k&&k(e),d=p.render(p.props,p.state,p.context),W=0;W<p._sb.length;W++)p.__h.push(p._sb[W]);p._sb=[]}else do p.__d=!1,k&&k(e),d=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++P<25);p.state=p.__s,p.getChildContext!=null&&(n=or(or({},n),p.getChildContext())),v||p.getSnapshotBeforeUpdate==null||(x=p.getSnapshotBeforeUpdate(S,M)),Rd(t,_o(ee=d!=null&&d.type===rs&&d.key==null?d.props.children:d)?ee:[ee],e,r,n,i,s,o,a,u,l),p.base=e.__e,e.__h=null,p.__h.length&&o.push(p),O&&(p.__E=p.__=null)}catch(z){e.__v=null,(u||s!=null)&&(e.__e=a,e.__h=!!u,s[s.indexOf(a)]=null),J.__e(z,e,r)}else s==null&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=x2(r.__e,e,r,n,i,s,o,u,l);(d=J.diffed)&&d(e)}function Td(t,e,r){for(var n=0;n<r.length;n++)qc(r[n],r[++n],r[++n]);J.__c&&J.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(s){s.call(i)})}catch(s){J.__e(s,i.__v)}})}function x2(t,e,r,n,i,s,o,a,u){var l,d,p,v=r.props,S=e.props,M=e.type,x=0;if(M==="svg"&&(i=!0),s!=null){for(;x<s.length;x++)if((l=s[x])&&"setAttribute"in l==!!M&&(M?l.localName===M:l.nodeType===3)){t=l,s[x]=null;break}}if(t==null){if(M===null)return document.createTextNode(S);t=i?document.createElementNS("http://www.w3.org/2000/svg",M):document.createElement(M,S.is&&S),s=null,a=!1}if(M===null)v===S||a&&t.data===S||(t.data=S);else{if(s=s&&ts.call(t.childNodes),d=(v=r.props||jn).dangerouslySetInnerHTML,p=S.dangerouslySetInnerHTML,!a){if(s!=null)for(v={},x=0;x<t.attributes.length;x++)v[t.attributes[x].name]=t.attributes[x].value;(p||d)&&(p&&(d&&p.__html==d.__html||p.__html===t.innerHTML)||(t.innerHTML=p&&p.__html||""))}if(C2(t,S,v,i,a),p)e.__k=[];else if(Rd(t,_o(x=e.props.children)?x:[x],e,r,n,i&&M!=="foreignObject",s,o,s?s[0]:r.__k&&Di(r,0),a,u),s!=null)for(x=s.length;x--;)s[x]!=null&&xd(s[x]);a||("value"in S&&(x=S.value)!==void 0&&(x!==t.value||M==="progress"&&!x||M==="option"&&x!==v.value)&&Bs(t,"value",x,v.value,!1),"checked"in S&&(x=S.checked)!==void 0&&x!==t.checked&&Bs(t,"checked",x,v.checked,!1))}return t}function qc(t,e,r){try{typeof t=="function"?t(e):t.current=e}catch(n){J.__e(n,r)}}function Za(t,e,r){var n,i;if(J.unmount&&J.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||qc(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){J.__e(s,e)}n.base=n.__P=null,t.__c=void 0}if(n=t.__k)for(i=0;i<n.length;i++)n[i]&&Za(n[i],e,r||typeof t.type!="function");r||t.__e==null||xd(t.__e),t.__=t.__e=t.__d=void 0}function I2(t,e,r){return this.constructor(t,r)}function Nd(t,e,r){var n,i,s,o;J.__&&J.__(t,e),i=(n=typeof r=="function")?null:r&&r.__k||e.__k,s=[],o=[],Uc(e,t=(!n&&r||e).__k=Ga(rs,null,[t]),i||jn,jn,e.ownerSVGElement!==void 0,!n&&r?[r]:i?null:e.firstChild?ts.call(e.childNodes):null,s,!n&&r?r:i?i.__e:e.firstChild,n,o),Td(s,t,o)}function Ld(t,e){Nd(t,e,Ld)}function R2(t,e,r){var n,i,s,o,a=or({},t.props);for(s in t.type&&t.type.defaultProps&&(o=t.type.defaultProps),e)s=="key"?n=e[s]:s=="ref"?i=e[s]:a[s]=e[s]===void 0&&o!==void 0?o[s]:e[s];return arguments.length>2&&(a.children=arguments.length>3?ts.call(arguments,2):r),Oi(t.type,a,n||t.key,i||t.ref,null)}function A2(t,e){var r={__c:e="__cC"+Md++,__:t,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,s;return this.getChildContext||(i=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.some(function(a){a.__e=!0,Ja(a)})},this.sub=function(o){i.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){i.splice(i.indexOf(o),1),a&&a.call(o)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r}ts=Cd.slice,J={__e:function(t,e,r,n){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,n||{}),o=i.__d),o)return i.__E=i}catch(a){t=a}throw t}},_d=0,Sd=function(t){return t!=null&&t.constructor===void 0},Ti.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=or({},this.state),typeof t=="function"&&(t=t(or({},r),this.props)),t&&or(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),Ja(this))},Ti.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ja(this))},Ti.prototype.render=rs,qr=[],Ed=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,qa=function(t,e){return t.__v.__b-e.__v.__b},Fs.__r=0,Md=0;const k2=Object.freeze(Object.defineProperty({__proto__:null,Component:Ti,Fragment:rs,cloneElement:R2,createContext:A2,createElement:Ga,createRef:E2,h:Ga,hydrate:Ld,get isValidElement(){return Sd},get options(){return J},render:Nd,toChildArray:kd},Symbol.toStringTag,{value:"Module"})),Ct=nn(k2);function Jn(t){return typeof t=="function"}var ql=!1,At={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;""+e.stack}ql=t},get useDeprecatedSynchronousErrorHandling(){return ql}};function On(t){setTimeout(function(){throw t},0)}var Vs={closed:!0,next:function(t){},error:function(t){if(At.useDeprecatedSynchronousErrorHandling)throw t;On(t)},complete:function(){}},yt=function(){return Array.isArray||function(t){return t&&typeof t.length=="number"}}();function Gc(t){return t!==null&&typeof t=="object"}var O2=function(){function t(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t}(),Ni=O2,Je=function(){function t(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this,n=r._parentOrParents,i=r._ctorUnsubscribe,s=r._unsubscribe,o=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(n!==null)for(var a=0;a<n.length;++a){var u=n[a];u.remove(this)}if(Jn(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(p){e=p instanceof Ni?Gl(p.errors):[p]}}if(yt(o))for(var a=-1,l=o.length;++a<l;){var d=o[a];if(Gc(d))try{d.unsubscribe()}catch(v){e=e||[],v instanceof Ni?e=e.concat(Gl(v.errors)):e.push(v)}}if(e)throw new Ni(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||typeof r.unsubscribe!="function")return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;r=new t,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=r._parentOrParents;if(i===null)r._parentOrParents=this;else if(i instanceof t){if(i===this)return r;r._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return r;var s=this._subscriptions;return s===null?this._subscriptions=[r]:s.push(r),r},t.prototype.remove=function(e){var r=this._subscriptions;if(r){var n=r.indexOf(e);n!==-1&&r.splice(n,1)}},t.EMPTY=function(e){return e.closed=!0,e}(new t),t}();function Gl(t){return t.reduce(function(e,r){return e.concat(r instanceof Ni?r.errors:r)},[])}var Ws=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),B=function(t){A(e,t);function e(r,n,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=Vs;break;case 1:if(!r){s.destination=Vs;break}if(typeof r=="object"){r instanceof e?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new Jl(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new Jl(s,r,n,i);break}return s}return e.prototype[Ws]=function(){return this},e.create=function(r,n,i){var s=new e(r,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this},e}(Je),Jl=function(t){A(e,t);function e(r,n,i,s){var o=t.call(this)||this;o._parentSubscriber=r;var a,u=o;return Jn(n)?a=n:n&&(a=n.next,i=n.error,s=n.complete,n!==Vs&&(u=Object.create(n),Jn(u.unsubscribe)&&o.add(u.unsubscribe.bind(u)),u.unsubscribe=o.unsubscribe.bind(o))),o._context=u,o._next=a,o._error=i,o._complete=s,o}return e.prototype.next=function(r){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!At.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,r):this.__tryOrSetError(n,this._next,r)&&this.unsubscribe()}},e.prototype.error=function(r){if(!this.isStopped){var n=this._parentSubscriber,i=At.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,r),this.unsubscribe()):(this.__tryOrSetError(n,this._error,r),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=r,n.syncErrorThrown=!0):On(r),this.unsubscribe();else{if(this.unsubscribe(),i)throw r;On(r)}}},e.prototype.complete=function(){var r=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return r._complete.call(r._context)};!At.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(r,n){try{r.call(this._context,n)}catch(i){if(this.unsubscribe(),At.useDeprecatedSynchronousErrorHandling)throw i;On(i)}},e.prototype.__tryOrSetError=function(r,n,i){if(!At.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(s){return At.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=s,r.syncErrorThrown=!0,!0):(On(s),!0)}return!1},e.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},e}(B);function Jc(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;n&&n instanceof B?t=n:t=null}return!0}function T2(t,e,r){if(t){if(t instanceof B)return t;if(t[Ws])return t[Ws]()}return!t&&!e&&!r?new B(Vs):new B(t,e,r)}var ui=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function _r(t){return t}function Qa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Pd(t)}function Pd(t){return t.length===0?_r:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var Q=function(){function t(e){this._isScalar=!1,e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this.operator,s=T2(e,r,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||At.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),At.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){At.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=r),Jc(e)?e.error(r):console.warn(r)}},t.prototype.forEach=function(e,r){var n=this;return r=Zl(r),new r(function(i,s){var o;o=n.subscribe(function(a){try{e(a)}catch(u){s(u),o&&o.unsubscribe()}},s,i)})},t.prototype._subscribe=function(e){var r=this.source;return r&&r.subscribe(e)},t.prototype[ui]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length===0?this:Pd(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=Zl(e),new e(function(n,i){var s;r.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},t.create=function(e){return new t(e)},t}();function Zl(t){if(t||(t=At.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var N2=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),vr=N2,$d=function(t){A(e,t);function e(r,n){var i=t.call(this)||this;return i.subject=r,i.subscriber=n,i.closed=!1,i}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var r=this.subject,n=r.observers;if(this.subject=null,!(!n||n.length===0||r.isStopped||r.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},e}(Je),Dd=function(t){A(e,t);function e(r){var n=t.call(this,r)||this;return n.destination=r,n}return e}(B),at=function(t){A(e,t);function e(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype[Ws]=function(){return new Dd(this)},e.prototype.lift=function(r){var n=new Ql(this,this);return n.operator=r,n},e.prototype.next=function(r){if(this.closed)throw new vr;if(!this.isStopped)for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].next(r)},e.prototype.error=function(r){if(this.closed)throw new vr;this.hasError=!0,this.thrownError=r,this.isStopped=!0;for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].error(r);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new vr;this.isStopped=!0;for(var r=this.observers,n=r.length,i=r.slice(),s=0;s<n;s++)i[s].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(r){if(this.closed)throw new vr;return t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){if(this.closed)throw new vr;return this.hasError?(r.error(this.thrownError),Je.EMPTY):this.isStopped?(r.complete(),Je.EMPTY):(this.observers.push(r),new $d(this,r))},e.prototype.asObservable=function(){var r=new Q;return r.source=this,r},e.create=function(r,n){return new Ql(r,n)},e}(Q),Ql=function(t){A(e,t);function e(r,n){var i=t.call(this)||this;return i.destination=r,i.source=n,i}return e.prototype.next=function(r){var n=this.destination;n&&n.next&&n.next(r)},e.prototype.error=function(r){var n=this.destination;n&&n.error&&this.destination.error(r)},e.prototype.complete=function(){var r=this.destination;r&&r.complete&&this.destination.complete()},e.prototype._subscribe=function(r){var n=this.source;return n?this.source.subscribe(r):Je.EMPTY},e}(at);function Zc(){return function(e){return e.lift(new L2(e))}}var L2=function(){function t(e){this.connectable=e}return t.prototype.call=function(e,r){var n=this.connectable;n._refCount++;var i=new P2(e,n),s=r.subscribe(i);return i.closed||(i.connection=n.connect()),s},t}(),P2=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._unsubscribe=function(){var r=this.connectable;if(!r){this.connection=null;return}this.connectable=null;var n=r._refCount;if(n<=0){this.connection=null;return}if(r._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,s=r._connection;this.connection=null,s&&(!i||s===i)&&s.unsubscribe()},e}(B),jd=function(t){A(e,t);function e(r,n){var i=t.call(this)||this;return i.source=r,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return e.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},e.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var r=this._connection;return r||(this._isComplete=!1,r=this._connection=new Je,r.add(this.source.subscribe(new D2(this.getSubject(),this))),r.closed&&(this._connection=null,r=Je.EMPTY)),r},e.prototype.refCount=function(){return Zc()(this)},e}(Q),$2=function(){var t=jd.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),D2=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._error=function(r){this._unsubscribe(),t.prototype._error.call(this,r)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var r=this.connectable;if(r){this.connectable=null;var n=r._connection;r._refCount=0,r._subject=null,r._connection=null,n&&n.unsubscribe()}},e}(Dd);function j2(t,e,r,n){return function(i){return i.lift(new F2(t,e,r,n))}}var F2=function(){function t(e,r,n,i){this.keySelector=e,this.elementSelector=r,this.durationSelector=n,this.subjectSelector=i}return t.prototype.call=function(e,r){return r.subscribe(new B2(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),B2=function(t){A(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.keySelector=n,a.elementSelector=i,a.durationSelector=s,a.subjectSelector=o,a.groups=null,a.attemptedToUnsubscribe=!1,a.count=0,a}return e.prototype._next=function(r){var n;try{n=this.keySelector(r)}catch(i){this.error(i);return}this._group(r,n)},e.prototype._group=function(r,n){var i=this.groups;i||(i=this.groups=new Map);var s=i.get(n),o;if(this.elementSelector)try{o=this.elementSelector(r)}catch(l){this.error(l)}else o=r;if(!s){s=this.subjectSelector?this.subjectSelector():new at,i.set(n,s);var a=new Ya(n,s,this);if(this.destination.next(a),this.durationSelector){var u=void 0;try{u=this.durationSelector(new Ya(n,s))}catch(l){this.error(l);return}this.add(u.subscribe(new V2(n,s,this)))}}s.closed||s.next(o)},e.prototype._error=function(r){var n=this.groups;n&&(n.forEach(function(i,s){i.error(r)}),n.clear()),this.destination.error(r)},e.prototype._complete=function(){var r=this.groups;r&&(r.forEach(function(n,i){n.complete()}),r.clear()),this.destination.complete()},e.prototype.removeGroup=function(r){this.groups.delete(r)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&t.prototype.unsubscribe.call(this))},e}(B),V2=function(t){A(e,t);function e(r,n,i){var s=t.call(this,n)||this;return s.key=r,s.group=n,s.parent=i,s}return e.prototype._next=function(r){this.complete()},e.prototype._unsubscribe=function(){var r=this,n=r.parent,i=r.key;this.key=this.parent=null,n&&n.removeGroup(i)},e}(B),Ya=function(t){A(e,t);function e(r,n,i){var s=t.call(this)||this;return s.key=r,s.groupSubject=n,s.refCountSubscription=i,s}return e.prototype._subscribe=function(r){var n=new Je,i=this,s=i.refCountSubscription,o=i.groupSubject;return s&&!s.closed&&n.add(new W2(s)),n.add(o.subscribe(r)),n},e}(Q),W2=function(t){A(e,t);function e(r){var n=t.call(this)||this;return n.parent=r,r.count++,n}return e.prototype.unsubscribe=function(){var r=this.parent;!r.closed&&!this.closed&&(t.prototype.unsubscribe.call(this),r.count-=1,r.count===0&&r.attemptedToUnsubscribe&&r.unsubscribe())},e}(Je),Fd=function(t){A(e,t);function e(r){var n=t.call(this)||this;return n._value=r,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(r){var n=t.prototype._subscribe.call(this,r);return n&&!n.closed&&r.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new vr;return this._value},e.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},e}(at),H2=function(t){A(e,t);function e(r,n){return t.call(this)||this}return e.prototype.schedule=function(r,n){return this},e}(Je),ns=function(t){A(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),this.closed)return this;this.state=r;var i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(s,this.id,n),this},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),setInterval(r.flush.bind(r,this),i)},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return n;clearInterval(n)},e.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,n){var i=!1,s=void 0;try{this.work(r)}catch(o){i=!0,s=!!o&&o||new Error(o)}if(i)return this.unsubscribe(),s},e.prototype._unsubscribe=function(){var r=this.id,n=this.scheduler,i=n.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,s!==-1&&i.splice(s,1),r!=null&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null},e}(H2),z2=function(t){A(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.schedule=function(r,n){return n===void 0&&(n=0),n>0?t.prototype.schedule.call(this,r,n):(this.delay=n,this.state=r,this.scheduler.flush(this),this)},e.prototype.execute=function(r,n){return n>0||this.closed?t.prototype.execute.call(this,r,n):this._execute(r,n)},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?t.prototype.requestAsyncId.call(this,r,n,i):r.flush(this)},e}(ns),Ka=function(){function t(e,r){r===void 0&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(e,r,n){return r===void 0&&(r=0),new this.SchedulerAction(this,e).schedule(n,r)},t.now=function(){return Date.now()},t}(),is=function(t){A(e,t);function e(r,n){n===void 0&&(n=Ka.now);var i=t.call(this,r,function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return e.prototype.schedule=function(r,n,i){return n===void 0&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,i):t.prototype.schedule.call(this,r,n,i)},e.prototype.flush=function(r){var n=this.actions;if(this.active){n.push(r);return}var i;this.active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this.active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},e}(Ka),U2=function(t){A(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(is),Bd=new U2(z2),Vd=Bd,Zn=new Q(function(t){return t.complete()});function li(t){return t?q2(t):Zn}function q2(t){return new Q(function(e){return t.schedule(function(){return e.complete()})})}function Mt(t){return t&&typeof t.schedule=="function"}var Wd=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.complete()}};function Qc(t,e){return new Q(function(r){var n=new Je,i=0;return n.add(e.schedule(function(){if(i===t.length){r.complete();return}r.next(t[i++]),r.closed||n.add(this.schedule())})),n})}function ss(t,e){return e?Qc(t,e):new Q(Wd(t))}function So(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return Mt(r)?(t.pop(),Qc(t,r)):ss(t)}function Yc(t,e){return e?new Q(function(r){return e.schedule(G2,0,{error:t,subscriber:r})}):new Q(function(r){return r.error(t)})}function G2(t){var e=t.error,r=t.subscriber;r.error(e)}var Xa;Xa||(Xa={});var ar=function(){function t(e,r,n){this.kind=e,this.value=r,this.error=n,this.hasValue=e==="N"}return t.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},t.prototype.do=function(e,r,n){var i=this.kind;switch(i){case"N":return e&&e(this.value);case"E":return r&&r(this.error);case"C":return n&&n()}},t.prototype.accept=function(e,r,n){return e&&typeof e.next=="function"?this.observe(e):this.do(e,r,n)},t.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return So(this.value);case"E":return Yc(this.error);case"C":return li()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return typeof e<"u"?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();function J2(t,e){return e===void 0&&(e=0),function(n){return n.lift(new Z2(t,e))}}var Z2=function(){function t(e,r){r===void 0&&(r=0),this.scheduler=e,this.delay=r}return t.prototype.call=function(e,r){return r.subscribe(new Hd(e,this.scheduler,this.delay))},t}(),Hd=function(t){A(e,t);function e(r,n,i){i===void 0&&(i=0);var s=t.call(this,r)||this;return s.scheduler=n,s.delay=i,s}return e.dispatch=function(r){var n=r.notification,i=r.destination;n.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(r){var n=this.destination;n.add(this.scheduler.schedule(e.dispatch,this.delay,new Q2(r,this.destination)))},e.prototype._next=function(r){this.scheduleMessage(ar.createNext(r))},e.prototype._error=function(r){this.scheduleMessage(ar.createError(r)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(ar.createComplete()),this.unsubscribe()},e}(B),Q2=function(){function t(e,r){this.notification=e,this.destination=r}return t}(),Kc=function(t){A(e,t);function e(r,n,i){r===void 0&&(r=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var s=t.call(this)||this;return s.scheduler=i,s._events=[],s._infiniteTimeWindow=!1,s._bufferSize=r<1?1:r,s._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(s._infiniteTimeWindow=!0,s.next=s.nextInfiniteTimeWindow):s.next=s.nextTimeWindow,s}return e.prototype.nextInfiniteTimeWindow=function(r){if(!this.isStopped){var n=this._events;n.push(r),n.length>this._bufferSize&&n.shift()}t.prototype.next.call(this,r)},e.prototype.nextTimeWindow=function(r){this.isStopped||(this._events.push(new Y2(this._getNow(),r)),this._trimBufferThenGetEvents()),t.prototype.next.call(this,r)},e.prototype._subscribe=function(r){var n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,o=i.length,a;if(this.closed)throw new vr;if(this.isStopped||this.hasError?a=Je.EMPTY:(this.observers.push(r),a=new $d(this,r)),s&&r.add(r=new Hd(r,s)),n)for(var u=0;u<o&&!r.closed;u++)r.next(i[u]);else for(var u=0;u<o&&!r.closed;u++)r.next(i[u].value);return this.hasError?r.error(this.thrownError):this.isStopped&&r.complete(),a},e.prototype._getNow=function(){return(this.scheduler||Vd).now()},e.prototype._trimBufferThenGetEvents=function(){for(var r=this._getNow(),n=this._bufferSize,i=this._windowTime,s=this._events,o=s.length,a=0;a<o&&!(r-s[a].time<i);)a++;return o>n&&(a=Math.max(a,o-n)),a>0&&s.splice(0,a),s},e}(at),Y2=function(){function t(e,r){this.time=e,this.value=r}return t}(),hi=function(t){A(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.value=null,r.hasNext=!1,r.hasCompleted=!1,r}return e.prototype._subscribe=function(r){return this.hasError?(r.error(this.thrownError),Je.EMPTY):this.hasCompleted&&this.hasNext?(r.next(this.value),r.complete(),Je.EMPTY):t.prototype._subscribe.call(this,r)},e.prototype.next=function(r){this.hasCompleted||(this.value=r,this.hasNext=!0)},e.prototype.error=function(r){this.hasCompleted||t.prototype.error.call(this,r)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(at),K2=1,X2=function(){return Promise.resolve()}(),ec={};function Yl(t){return t in ec?(delete ec[t],!0):!1}var Kl={setImmediate:function(t){var e=K2++;return ec[e]=!0,X2.then(function(){return Yl(e)&&t()}),e},clearImmediate:function(t){Yl(t)}},eS=function(t){A(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?t.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r.scheduled||(r.scheduled=Kl.setImmediate(r.flush.bind(r,null))))},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return t.prototype.recycleAsyncId.call(this,r,n,i);r.actions.length===0&&(Kl.clearImmediate(n),r.scheduled=void 0)},e}(ns),tS=function(t){A(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.flush=function(r){this.active=!0,this.scheduled=void 0;var n=this.actions,i,s=-1,o=n.length;r=r||n.shift();do if(i=r.execute(r.state,r.delay))break;while(++s<o&&(r=n.shift()));if(this.active=!1,i){for(;++s<o&&(r=n.shift());)r.unsubscribe();throw i}},e}(is),zd=new tS(eS),xs=zd,Ud=new is(ns),mt=Ud,rS=function(t){A(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?t.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r.scheduled||(r.scheduled=requestAnimationFrame(function(){return r.flush(null)})))},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return t.prototype.recycleAsyncId.call(this,r,n,i);r.actions.length===0&&(cancelAnimationFrame(n),r.scheduled=void 0)},e}(ns),nS=function(t){A(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.flush=function(r){this.active=!0,this.scheduled=void 0;var n=this.actions,i,s=-1,o=n.length;r=r||n.shift();do if(i=r.execute(r.state,r.delay))break;while(++s<o&&(r=n.shift()));if(this.active=!1,i){for(;++s<o&&(r=n.shift());)r.unsubscribe();throw i}},e}(is),qd=new nS(rS),iS=qd,sS=function(t){A(e,t);function e(r,n){r===void 0&&(r=Gd),n===void 0&&(n=Number.POSITIVE_INFINITY);var i=t.call(this,r,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return e.prototype.flush=function(){for(var r=this,n=r.actions,i=r.maxFrames,s,o;(o=n[0])&&o.delay<=i&&(n.shift(),this.frame=o.delay,!(s=o.execute(o.state,o.delay))););if(s){for(;o=n.shift();)o.unsubscribe();throw s}},e.frameTimeFactor=10,e}(is),Gd=function(t){A(e,t);function e(r,n,i){i===void 0&&(i=r.index+=1);var s=t.call(this,r,n)||this;return s.scheduler=r,s.work=n,s.index=i,s.active=!0,s.index=r.index=i,s}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),!this.id)return t.prototype.schedule.call(this,r,n);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(r,n)},e.prototype.requestAsyncId=function(r,n,i){i===void 0&&(i=0),this.delay=r.frame+i;var s=r.actions;return s.push(this),s.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(r,n,i){},e.prototype._execute=function(r,n){if(this.active===!0)return t.prototype._execute.call(this,r,n)},e.sortActions=function(r,n){return r.delay===n.delay?r.index===n.index?0:r.index>n.index?1:-1:r.delay>n.delay?1:-1},e}(ns);function Jt(){}function oS(t){return!!t&&(t instanceof Q||typeof t.lift=="function"&&typeof t.subscribe=="function")}var aS=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),Qn=aS,cS=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),os=cS,uS=function(){function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t}(),Jd=uS;function Lt(t,e){return function(n){if(typeof t!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new lS(t,e))}}var lS=function(){function t(e,r){this.project=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new hS(e,this.project,this.thisArg))},t}(),hS=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.project=n,s.count=0,s.thisArg=i||s,s}return e.prototype._next=function(r){var n;try{n=this.project.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(B);function Zd(t,e,r){if(e)if(Mt(e))r=e;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Zd(t,r).apply(void 0,n).pipe(Lt(function(s){return yt(s)?e.apply(void 0,s):e(s)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=this,o,a={context:s,subject:o,callbackFunc:t,scheduler:r};return new Q(function(u){if(r){var d={args:n,subscriber:u,params:a};return r.schedule(fS,0,d)}else{if(!o){o=new hi;var l=function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];o.next(p.length<=1?p[0]:p),o.complete()};try{t.apply(s,n.concat([l]))}catch(p){Jc(o)?o.error(p):console.warn(p)}}return o.subscribe(u)}})}}function fS(t){var e=this,r=t.args,n=t.subscriber,i=t.params,s=i.callbackFunc,o=i.context,a=i.scheduler,u=i.subject;if(!u){u=i.subject=new hi;var l=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];var v=d.length<=1?d[0]:d;e.add(a.schedule(dS,0,{value:v,subject:u}))};try{s.apply(o,r.concat([l]))}catch(d){u.error(d)}}this.add(u.subscribe(n))}function dS(t){var e=t.value,r=t.subject;r.next(e),r.complete()}function Qd(t,e,r){if(e)if(Mt(e))r=e;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Qd(t,r).apply(void 0,n).pipe(Lt(function(s){return yt(s)?e.apply(void 0,s):e(s)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s={subject:void 0,args:n,callbackFunc:t,scheduler:r,context:this};return new Q(function(o){var a=s.context,u=s.subject;if(r)return r.schedule(pS,0,{params:s,subscriber:o,context:a});if(!u){u=s.subject=new hi;var l=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];var v=d.shift();if(v){u.error(v);return}u.next(d.length<=1?d[0]:d),u.complete()};try{t.apply(a,n.concat([l]))}catch(d){Jc(u)?u.error(d):console.warn(d)}}return u.subscribe(o)})}}function pS(t){var e=this,r=t.params,n=t.subscriber,i=t.context,s=r.callbackFunc,o=r.args,a=r.scheduler,u=r.subject;if(!u){u=r.subject=new hi;var l=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];var v=d.shift();if(v)e.add(a.schedule(Xl,0,{err:v,subject:u}));else{var S=d.length<=1?d[0]:d;e.add(a.schedule(gS,0,{value:S,subject:u}))}};try{s.apply(i,o.concat([l]))}catch(d){this.add(a.schedule(Xl,0,{err:d,subject:u}))}}this.add(u.subscribe(n))}function gS(t){var e=t.value,r=t.subject;r.next(e),r.complete()}function Xl(t){var e=t.err,r=t.subject;r.error(e)}var un=function(t){A(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r,n,i,s,o){this.destination.next(n)},e.prototype.notifyError=function(r,n){this.destination.error(r)},e.prototype.notifyComplete=function(r){this.destination.complete()},e}(B),vS=function(t){A(e,t);function e(r,n,i){var s=t.call(this)||this;return s.parent=r,s.outerValue=n,s.outerIndex=i,s.index=0,s}return e.prototype._next=function(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this.index++,this)},e.prototype._error=function(r){this.parent.notifyError(r,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(B),yS=function(t){return function(e){return t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,On),e}};function mS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Sr=mS(),bS=function(t){return function(e){var r=t[Sr]();do{var n=void 0;try{n=r.next()}catch(i){return e.error(i),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}while(!0);return typeof r.return=="function"&&e.add(function(){r.return&&r.return()}),e}},wS=function(t){return function(e){var r=t[ui]();if(typeof r.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(e)}},Yd=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Kd(t){return!!t&&typeof t.subscribe!="function"&&typeof t.then=="function"}var ji=function(t){if(t&&typeof t[ui]=="function")return wS(t);if(Yd(t))return Wd(t);if(Kd(t))return yS(t);if(t&&typeof t[Sr]=="function")return bS(t);var e=Gc(t)?"an invalid object":"'"+t+"'",r="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(r)};function cr(t,e,r,n,i){if(i===void 0&&(i=new vS(t,r,n)),!i.closed)return e instanceof Q?e.subscribe(i):ji(e)(i)}var eh={};function _S(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=void 0,n=void 0;return Mt(t[t.length-1])&&(n=t.pop()),typeof t[t.length-1]=="function"&&(r=t.pop()),t.length===1&&yt(t[0])&&(t=t[0]),ss(t,n).lift(new Xc(r))}var Xc=function(){function t(e){this.resultSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new SS(e,this.resultSelector))},t}(),SS=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return e.prototype._next=function(r){this.values.push(eh),this.observables.push(r)},e.prototype._complete=function(){var r=this.observables,n=r.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var i=0;i<n;i++){var s=r[i];this.add(cr(this,s,void 0,i))}}},e.prototype.notifyComplete=function(r){(this.active-=1)===0&&this.destination.complete()},e.prototype.notifyNext=function(r,n,i){var s=this.values,o=s[i],a=this.toRespond?o===eh?--this.toRespond:this.toRespond:0;s[i]=n,a===0&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))},e.prototype._tryResultSelector=function(r){var n;try{n=this.resultSelector.apply(this,r)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(un);function ES(t,e){return new Q(function(r){var n=new Je;return n.add(e.schedule(function(){var i=t[ui]();n.add(i.subscribe({next:function(s){n.add(e.schedule(function(){return r.next(s)}))},error:function(s){n.add(e.schedule(function(){return r.error(s)}))},complete:function(){n.add(e.schedule(function(){return r.complete()}))}}))})),n})}function MS(t,e){return new Q(function(r){var n=new Je;return n.add(e.schedule(function(){return t.then(function(i){n.add(e.schedule(function(){r.next(i),n.add(e.schedule(function(){return r.complete()}))}))},function(i){n.add(e.schedule(function(){return r.error(i)}))})})),n})}function CS(t,e){if(!t)throw new Error("Iterable cannot be null");return new Q(function(r){var n=new Je,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(e.schedule(function(){i=t[Sr](),n.add(e.schedule(function(){if(!r.closed){var s,o;try{var a=i.next();s=a.value,o=a.done}catch(u){r.error(u);return}o?r.complete():(r.next(s),this.schedule())}}))})),n})}function xS(t){return t&&typeof t[ui]=="function"}function IS(t){return t&&typeof t[Sr]=="function"}function Xd(t,e){if(t!=null){if(xS(t))return ES(t,e);if(Kd(t))return MS(t,e);if(Yd(t))return Qc(t,e);if(IS(t)||typeof t=="string")return CS(t,e)}throw new TypeError((t!==null&&typeof t||t)+" is not observable")}function lr(t,e){return e?Xd(t,e):t instanceof Q?t:new Q(ji(t))}var Ze=function(t){A(e,t);function e(r){var n=t.call(this)||this;return n.parent=r,n}return e.prototype._next=function(r){this.parent.notifyNext(r)},e.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(B),Qe=function(t){A(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyError=function(r){this.destination.error(r)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(B);function Ye(t,e){if(!e.closed){if(t instanceof Q)return t.subscribe(e);var r;try{r=ji(t)(e)}catch(n){e.error(n)}return r}}function tn(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),typeof e=="function"?function(n){return n.pipe(tn(function(i,s){return lr(t(i,s)).pipe(Lt(function(o,a){return e(i,o,s,a)}))},r))}:(typeof e=="number"&&(r=e),function(n){return n.lift(new RS(t,r))})}var RS=function(){function t(e,r){r===void 0&&(r=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=r}return t.prototype.call=function(e,r){return r.subscribe(new AS(e,this.project,this.concurrent))},t}(),AS=function(t){A(e,t);function e(r,n,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var s=t.call(this,r)||this;return s.project=n,s.concurrent=i,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return e.prototype._next=function(r){this.active<this.concurrent?this._tryNext(r):this.buffer.push(r)},e.prototype._tryNext=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this.active++,this._innerSub(n)},e.prototype._innerSub=function(r){var n=new Ze(this),i=this.destination;i.add(n);var s=Ye(r,n);s!==n&&i.add(s)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r.length>0?this._next(r.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(Qe),kS=tn;function eu(t){return t===void 0&&(t=Number.POSITIVE_INFINITY),tn(_r,t)}function ep(){return eu(1)}function Fi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ep()(So.apply(void 0,t))}function tu(t){return new Q(function(e){var r;try{r=t()}catch(i){e.error(i);return}var n=r?lr(r):li();return n.subscribe(e)})}function OS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length===1){var r=t[0];if(yt(r))return ws(r,null);if(Gc(r)&&Object.getPrototypeOf(r)===Object.prototype){var n=Object.keys(r);return ws(n.map(function(s){return r[s]}),n)}}if(typeof t[t.length-1]=="function"){var i=t.pop();return t=t.length===1&&yt(t[0])?t[0]:t,ws(t,null).pipe(Lt(function(s){return i.apply(void 0,s)}))}return ws(t,null)}function ws(t,e){return new Q(function(r){var n=t.length;if(n===0){r.complete();return}for(var i=new Array(n),s=0,o=0,a=function(l){var d=lr(t[l]),p=!1;r.add(d.subscribe({next:function(v){p||(p=!0,o++),i[l]=v},error:function(v){return r.error(v)},complete:function(){s++,(s===n||!p)&&(o===n&&r.next(e?e.reduce(function(v,S,M){return v[S]=i[M],v},{}):i),r.complete())}}))},u=0;u<n;u++)a(u)})}function tp(t,e,r,n){return Jn(r)&&(n=r,r=void 0),n?tp(t,e,r).pipe(Lt(function(i){return yt(i)?n.apply(void 0,i):n(i)})):new Q(function(i){function s(o){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(o)}rp(t,e,s,i,r)})}function rp(t,e,r,n,i){var s;if(LS(t)){var o=t;t.addEventListener(e,r,i),s=function(){return o.removeEventListener(e,r,i)}}else if(NS(t)){var a=t;t.on(e,r),s=function(){return a.off(e,r)}}else if(TS(t)){var u=t;t.addListener(e,r),s=function(){return u.removeListener(e,r)}}else if(t&&t.length)for(var l=0,d=t.length;l<d;l++)rp(t[l],e,r,n,i);else throw new TypeError("Invalid event target");n.add(s)}function TS(t){return t&&typeof t.addListener=="function"&&typeof t.removeListener=="function"}function NS(t){return t&&typeof t.on=="function"&&typeof t.off=="function"}function LS(t){return t&&typeof t.addEventListener=="function"&&typeof t.removeEventListener=="function"}function np(t,e,r){return r?np(t,e).pipe(Lt(function(n){return yt(n)?r.apply(void 0,n):r(n)})):new Q(function(n){var i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return n.next(o.length===1?o[0]:o)},s;try{s=t(i)}catch(o){n.error(o);return}if(Jn(e))return function(){return e(i,s)}})}function PS(t,e,r,n,i){var s,o;if(arguments.length==1){var a=t;o=a.initialState,e=a.condition,r=a.iterate,s=a.resultSelector||_r,i=a.scheduler}else n===void 0||Mt(n)?(o=t,s=_r,i=n):(o=t,s=n);return new Q(function(u){var l=o;if(i)return i.schedule($S,0,{subscriber:u,iterate:r,condition:e,resultSelector:s,state:l});do{if(e){var d=void 0;try{d=e(l)}catch(v){u.error(v);return}if(!d){u.complete();break}}var p=void 0;try{p=s(l)}catch(v){u.error(v);return}if(u.next(p),u.closed)break;try{l=r(l)}catch(v){u.error(v);return}}while(!0)})}function $S(t){var e=t.subscriber,r=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(s){e.error(s);return}else t.needIterate=!0;if(r){var n=void 0;try{n=r(t.state)}catch(s){e.error(s);return}if(!n){e.complete();return}if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(s){e.error(s);return}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function DS(t,e,r){return e===void 0&&(e=Zn),r===void 0&&(r=Zn),tu(function(){return t()?e:r})}function Yn(t){return!yt(t)&&t-parseFloat(t)+1>=0}function jS(t,e){return t===void 0&&(t=0),e===void 0&&(e=mt),(!Yn(t)||t<0)&&(t=0),(!e||typeof e.schedule!="function")&&(e=mt),new Q(function(r){return r.add(e.schedule(FS,t,{subscriber:r,counter:0,period:t})),r})}function FS(t){var e=t.subscriber,r=t.counter,n=t.period;e.next(r),this.schedule({subscriber:e,counter:r+1,period:n},n)}function ip(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return Mt(i)?(n=t.pop(),t.length>1&&typeof t[t.length-1]=="number"&&(r=t.pop())):typeof i=="number"&&(r=t.pop()),n===null&&t.length===1&&t[0]instanceof Q?t[0]:eu(r)(ss(t,n))}var sp=new Q(Jt);function BS(){return sp}function tc(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length===0)return Zn;var r=t[0],n=t.slice(1);return t.length===1&&yt(r)?tc.apply(void 0,r):new Q(function(i){var s=function(){return i.add(tc.apply(void 0,n).subscribe(i))};return lr(r).subscribe({next:function(o){i.next(o)},error:s,complete:s})})}function VS(t,e){return e?new Q(function(r){var n=Object.keys(t),i=new Je;return i.add(e.schedule(WS,0,{keys:n,index:0,subscriber:r,subscription:i,obj:t})),i}):new Q(function(r){for(var n=Object.keys(t),i=0;i<n.length&&!r.closed;i++){var s=n[i];t.hasOwnProperty(s)&&r.next([s,t[s]])}r.complete()})}function WS(t){var e=t.keys,r=t.index,n=t.subscriber,i=t.subscription,s=t.obj;if(!n.closed)if(r<e.length){var o=e[r];n.next([o,s[o]]),i.add(this.schedule({keys:e,index:r+1,subscriber:n,subscription:i,obj:s}))}else n.complete()}function op(t,e){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=t,r.thisArg=e,r}function Er(t,e){return function(n){return n.lift(new HS(t,e))}}var HS=function(){function t(e,r){this.predicate=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new zS(e,this.predicate,this.thisArg))},t}(),zS=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.thisArg=i,s.count=0,s}return e.prototype._next=function(r){var n;try{n=this.predicate.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(r)},e}(B);function US(t,e,r){return[Er(e,r)(new Q(ji(t))),Er(op(e,r))(new Q(ji(t)))]}function ap(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length===1)if(yt(t[0]))t=t[0];else return t[0];return ss(t,void 0).lift(new qS)}var qS=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new GS(e))},t}(),GS=function(t){A(e,t);function e(r){var n=t.call(this,r)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return e.prototype._next=function(r){this.observables.push(r)},e.prototype._complete=function(){var r=this.observables,n=r.length;if(n===0)this.destination.complete();else{for(var i=0;i<n&&!this.hasFirst;i++){var s=r[i],o=cr(this,s,void 0,i);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}},e.prototype.notifyNext=function(r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var s=0;s<this.subscriptions.length;s++)if(s!==i){var o=this.subscriptions[s];o.unsubscribe(),this.remove(o)}this.subscriptions=null}this.destination.next(n)},e}(un);function JS(t,e,r){return t===void 0&&(t=0),new Q(function(n){e===void 0&&(e=t,t=0);var i=0,s=t;if(r)return r.schedule(ZS,0,{index:i,count:e,start:t,subscriber:n});do{if(i++>=e){n.complete();break}if(n.next(s++),n.closed)break}while(!0)})}function ZS(t){var e=t.start,r=t.index,n=t.count,i=t.subscriber;if(r>=n){i.complete();return}i.next(e),!i.closed&&(t.index=r+1,t.start=e+1,this.schedule(t))}function cp(t,e,r){t===void 0&&(t=0);var n=-1;return Yn(e)?n=Number(e)<1&&1||Number(e):Mt(e)&&(r=e),Mt(r)||(r=mt),new Q(function(i){var s=Yn(t)?t:+t-r.now();return r.schedule(QS,s,{index:0,period:n,subscriber:i})})}function QS(t){var e=t.index,r=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(r===-1)return n.complete();t.index=e+1,this.schedule(t,r)}}function YS(t,e){return new Q(function(r){var n;try{n=t()}catch(a){r.error(a);return}var i;try{i=e(n)}catch(a){r.error(a);return}var s=i?lr(i):Zn,o=s.subscribe(r);return function(){o.unsubscribe(),n&&n.unsubscribe()}})}function up(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return typeof r=="function"&&t.pop(),ss(t,void 0).lift(new lp(r))}var lp=function(){function t(e){this.resultSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new KS(e,this.resultSelector))},t}(),KS=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.resultSelector=n,s.iterators=[],s.active=0,s.resultSelector=typeof n=="function"?n:void 0,s}return e.prototype._next=function(r){var n=this.iterators;yt(r)?n.push(new eE(r)):typeof r[Sr]=="function"?n.push(new XS(r[Sr]())):n.push(new tE(this.destination,this,r))},e.prototype._complete=function(){var r=this.iterators,n=r.length;if(this.unsubscribe(),n===0){this.destination.complete();return}this.active=n;for(var i=0;i<n;i++){var s=r[i];if(s.stillUnsubscribed){var o=this.destination;o.add(s.subscribe())}else this.active--}},e.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},e.prototype.checkIterators=function(){for(var r=this.iterators,n=r.length,i=this.destination,s=0;s<n;s++){var o=r[s];if(typeof o.hasValue=="function"&&!o.hasValue())return}for(var a=!1,u=[],s=0;s<n;s++){var o=r[s],l=o.next();if(o.hasCompleted()&&(a=!0),l.done){i.complete();return}u.push(l.value)}this.resultSelector?this._tryresultSelector(u):i.next(u),a&&i.complete()},e.prototype._tryresultSelector=function(r){var n;try{n=this.resultSelector.apply(this,r)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(B),XS=function(){function t(e){this.iterator=e,this.nextResult=e.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},t.prototype.hasCompleted=function(){var e=this.nextResult;return!!(e&&e.done)},t}(),eE=function(){function t(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return t.prototype[Sr]=function(){return this},t.prototype.next=function(e){var r=this.index++,n=this.array;return r<this.length?{value:n[r],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),tE=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.parent=n,s.observable=i,s.stillUnsubscribed=!0,s.buffer=[],s.isComplete=!1,s}return e.prototype[Sr]=function(){return this},e.prototype.next=function(){var r=this.buffer;return r.length===0&&this.isComplete?{value:null,done:!0}:{value:r.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(r){this.buffer.push(r),this.parent.checkIterators()},e.prototype.subscribe=function(){return Ye(this.observable,new Ze(this))},e}(Qe);const rE=Object.freeze(Object.defineProperty({__proto__:null,ArgumentOutOfRangeError:Qn,AsyncSubject:hi,BehaviorSubject:Fd,ConnectableObservable:jd,EMPTY:Zn,EmptyError:os,GroupedObservable:Ya,NEVER:sp,Notification:ar,get NotificationKind(){return Xa},ObjectUnsubscribedError:vr,Observable:Q,ReplaySubject:Kc,Scheduler:Ka,Subject:at,Subscriber:B,Subscription:Je,TimeoutError:Jd,UnsubscriptionError:Ni,VirtualAction:Gd,VirtualTimeScheduler:sS,animationFrame:iS,animationFrameScheduler:qd,asap:xs,asapScheduler:zd,async:mt,asyncScheduler:Ud,bindCallback:Zd,bindNodeCallback:Qd,combineLatest:_S,concat:Fi,config:At,defer:tu,empty:li,forkJoin:OS,from:lr,fromEvent:tp,fromEventPattern:np,generate:PS,identity:_r,iif:DS,interval:jS,isObservable:oS,merge:ip,never:BS,noop:Jt,observable:ui,of:So,onErrorResumeNext:tc,pairs:VS,partition:US,pipe:Qa,queue:Vd,queueScheduler:Bd,race:ap,range:JS,scheduled:Xd,throwError:Yc,timer:cp,using:YS,zip:up},Symbol.toStringTag,{value:"Module"})),Eo=nn(rE);var Mo={};function hp(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=hp(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function th(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=hp(t))&&(n&&(n+=" "),n+=e);return n}const nE=Object.freeze(Object.defineProperty({__proto__:null,clsx:th,default:th},Symbol.toStringTag,{value:"Module"})),Co=nn(nE);var ur,oe,Ca,rh,Kn=0,fp=[],Is=[],nh=J.__b,ih=J.__r,sh=J.diffed,oh=J.__c,ah=J.unmount;function ln(t,e){J.__h&&J.__h(oe,t,Kn||e),Kn=0;var r=oe.__H||(oe.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({__V:Is}),r.__[t]}function dp(t){return Kn=1,pp(vp,t)}function pp(t,e,r){var n=ln(ur++,2);if(n.t=t,!n.__c&&(n.__=[r?r(e):vp(void 0,e),function(a){var u=n.__N?n.__N[0]:n.__[0],l=n.t(u,a);u!==l&&(n.__N=[l,n.__[1]],n.__c.setState({}))}],n.__c=oe,!oe.u)){var i=function(a,u,l){if(!n.__c.__H)return!0;var d=n.__c.__H.__.filter(function(v){return v.__c});if(d.every(function(v){return!v.__N}))return!s||s.call(this,a,u,l);var p=!1;return d.forEach(function(v){if(v.__N){var S=v.__[0];v.__=v.__N,v.__N=void 0,S!==v.__[0]&&(p=!0)}}),!(!p&&n.__c.props===a)&&(!s||s.call(this,a,u,l))};oe.u=!0;var s=oe.shouldComponentUpdate,o=oe.componentWillUpdate;oe.componentWillUpdate=function(a,u,l){if(this.__e){var d=s;s=void 0,i(a,u,l),s=d}o&&o.call(this,a,u,l)},oe.shouldComponentUpdate=i}return n.__N||n.__}function iE(t,e){var r=ln(ur++,3);!J.__s&&nu(r.__H,e)&&(r.__=t,r.i=e,oe.__H.__h.push(r))}function gp(t,e){var r=ln(ur++,4);!J.__s&&nu(r.__H,e)&&(r.__=t,r.i=e,oe.__h.push(r))}function sE(t){return Kn=5,ru(function(){return{current:t}},[])}function oE(t,e,r){Kn=6,gp(function(){return typeof t=="function"?(t(e()),function(){return t(null)}):t?(t.current=e(),function(){return t.current=null}):void 0},r==null?r:r.concat(t))}function ru(t,e){var r=ln(ur++,7);return nu(r.__H,e)?(r.__V=t(),r.i=e,r.__h=t,r.__V):r.__}function aE(t,e){return Kn=8,ru(function(){return t},e)}function cE(t){var e=oe.context[t.__c],r=ln(ur++,9);return r.c=t,e?(r.__==null&&(r.__=!0,e.sub(oe)),e.props.value):t.__}function uE(t,e){J.useDebugValue&&J.useDebugValue(e?e(t):t)}function lE(t){var e=ln(ur++,10),r=dp();return e.__=t,oe.componentDidCatch||(oe.componentDidCatch=function(n,i){e.__&&e.__(n,i),r[1](n)}),[r[0],function(){r[1](void 0)}]}function hE(){var t=ln(ur++,11);if(!t.__){for(var e=oe.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var r=e.__m||(e.__m=[0,0]);t.__="P"+r[0]+"-"+r[1]++}return t.__}function fE(){for(var t;t=fp.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Rs),t.__H.__h.forEach(rc),t.__H.__h=[]}catch(e){t.__H.__h=[],J.__e(e,t.__v)}}J.__b=function(t){oe=null,nh&&nh(t)},J.__r=function(t){ih&&ih(t),ur=0;var e=(oe=t.__c).__H;e&&(Ca===oe?(e.__h=[],oe.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=Is,r.__N=r.i=void 0})):(e.__h.forEach(Rs),e.__h.forEach(rc),e.__h=[],ur=0)),Ca=oe},J.diffed=function(t){sh&&sh(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(fp.push(e)!==1&&rh===J.requestAnimationFrame||((rh=J.requestAnimationFrame)||dE)(fE)),e.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==Is&&(r.__=r.__V),r.i=void 0,r.__V=Is})),Ca=oe=null},J.__c=function(t,e){e.some(function(r){try{r.__h.forEach(Rs),r.__h=r.__h.filter(function(n){return!n.__||rc(n)})}catch(n){e.some(function(i){i.__h&&(i.__h=[])}),e=[],J.__e(n,r.__v)}}),oh&&oh(t,e)},J.unmount=function(t){ah&&ah(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{Rs(n)}catch(i){e=i}}),r.__H=void 0,e&&J.__e(e,r.__v))};var ch=typeof requestAnimationFrame=="function";function dE(t){var e,r=function(){clearTimeout(n),ch&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,100);ch&&(e=requestAnimationFrame(r))}function Rs(t){var e=oe,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),oe=e}function rc(t){var e=oe;t.__c=t.__(),oe=e}function nu(t,e){return!t||t.length!==e.length||e.some(function(r,n){return r!==t[n]})}function vp(t,e){return typeof e=="function"?e(t):e}const pE=Object.freeze(Object.defineProperty({__proto__:null,useCallback:aE,useContext:cE,useDebugValue:uE,useEffect:iE,useErrorBoundary:lE,useId:hE,useImperativeHandle:oE,useLayoutEffect:gp,useMemo:ru,useReducer:pp,useRef:sE,useState:dp},Symbol.toStringTag,{value:"Module"})),as=nn(pE);var Xt={},xo={};Object.defineProperty(xo,"__esModule",{value:!0});xo.CloseIcon=void 0;const uh=Ct;function gE(t){return(0,uh.h)("svg",Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),(0,uh.h)("path",{d:"M13.7677 13L12.3535 14.4142L18.3535 20.4142L12.3535 26.4142L13.7677 27.8284L19.7677 21.8284L25.7677 27.8284L27.1819 26.4142L21.1819 20.4142L27.1819 14.4142L25.7677 13L19.7677 19L13.7677 13Z"}))}xo.CloseIcon=gE;var iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMTQiIGZpbGw9IiMwMDUyRkYiLz48cGF0aCBkPSJNMTQuMDM3IDE4LjkyNmMtMi43NSAwLTQuOTA3LTIuMjA1LTQuOTA3LTQuOTI2IDAtMi43MiAyLjIzLTQuOTI2IDQuOTA3LTQuOTI2YTQuODY2IDQuODY2IDAgMCAxIDQuODMzIDQuMTE4aDQuOTgyYy0uNDQ2LTUuMDczLTQuNjg0LTkuMDQ0LTkuODE1LTkuMDQ0QzguNjEgNC4xNDggNC4xNDkgOC41NiA0LjE0OSAxNHM0LjM4NyA5Ljg1MiA5Ljg5IDkuODUyYzUuMjA0IDAgOS4zNjgtMy45NyA5LjgxNC05LjA0M0gxOC44N2E0Ljg2NiA0Ljg2NiAwIDAgMS00LjgzMyA0LjExN1oiIGZpbGw9IiNmZmYiLz48L3N2Zz4=";var su={};Object.defineProperty(su,"__esModule",{value:!0});su.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMTQiIGZpbGw9IiMwMDUyRkYiLz48cGF0aCBkPSJNMjMuODUyIDE0QTkuODM0IDkuODM0IDAgMCAxIDE0IDIzLjg1MiA5LjgzNCA5LjgzNCAwIDAgMSA0LjE0OCAxNCA5LjgzNCA5LjgzNCAwIDAgMSAxNCA0LjE0OCA5LjgzNCA5LjgzNCAwIDAgMSAyMy44NTIgMTRaIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTExLjE4NSAxMi41MDRjMC0uNDU2IDAtLjcxLjA5OC0uODYyLjA5OC0uMTUyLjE5Ni0uMzA0LjM0My0uMzU1LjE5Ni0uMTAyLjM5Mi0uMTAyLjg4MS0uMTAyaDIuOTg2Yy40OSAwIC42ODYgMCAuODgyLjEwMi4xNDYuMTAxLjI5My4yMDMuMzQyLjM1NS4wOTguMjAzLjA5OC40MDYuMDk4Ljg2MnYyLjk5MmMwIC40NTcgMCAuNzEtLjA5OC44NjMtLjA5OC4xNTItLjE5NS4zMDQtLjM0Mi4zNTUtLjE5Ni4xMDEtLjM5Mi4xMDEtLjg4Mi4xMDFoLTIuOTg2Yy0uNDkgMC0uNjg1IDAtLjg4LS4xMDEtLjE0OC0uMTAyLS4yOTUtLjIwMy0uMzQ0LS4zNTUtLjA5OC0uMjAzLS4wOTgtLjQwNi0uMDk4LS44NjN2LTIuOTkyWiIgZmlsbD0iIzAwNTJGRiIvPjwvc3ZnPg==";var Io={};Object.defineProperty(Io,"__esModule",{value:!0});Io.QRCodeIcon=void 0;const Ut=Ct;function vE(t){return(0,Ut.h)("svg",Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},t),(0,Ut.h)("path",{d:"M8.2271 1.77124L7.0271 1.77124V2.97124H8.2271V1.77124Z"}),(0,Ut.h)("path",{d:"M5.44922 0.199219L5.44922 4.54922L9.79922 4.54922V0.199219L5.44922 0.199219ZM8.89922 3.64922L6.34922 3.64922L6.34922 1.09922L8.89922 1.09922V3.64922Z"}),(0,Ut.h)("path",{d:"M2.97124 1.77124L1.77124 1.77124L1.77124 2.97124H2.97124V1.77124Z"}),(0,Ut.h)("path",{d:"M0.199219 4.54922L4.54922 4.54922L4.54922 0.199219L0.199219 0.199219L0.199219 4.54922ZM1.09922 1.09922L3.64922 1.09922L3.64922 3.64922L1.09922 3.64922L1.09922 1.09922Z"}),(0,Ut.h)("path",{d:"M2.97124 7.0271H1.77124L1.77124 8.2271H2.97124V7.0271Z"}),(0,Ut.h)("path",{d:"M0.199219 9.79922H4.54922L4.54922 5.44922L0.199219 5.44922L0.199219 9.79922ZM1.09922 6.34922L3.64922 6.34922L3.64922 8.89922H1.09922L1.09922 6.34922Z"}),(0,Ut.h)("path",{d:"M8.89922 7.39912H7.99922V5.40112H5.44922L5.44922 9.79912H6.34922L6.34922 6.30112H7.09922V8.29912H9.79922V5.40112H8.89922V7.39912Z"}),(0,Ut.h)("path",{d:"M7.99912 8.89917H7.09912V9.79917H7.99912V8.89917Z"}),(0,Ut.h)("path",{d:"M9.79917 8.89917H8.89917V9.79917H9.79917V8.89917Z"}))}Io.QRCodeIcon=vE;var ou={};Object.defineProperty(ou,"__esModule",{value:!0});const yE=`
    <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M50 100C77.6142 100 100 77.6142 100 50C100 22.3858 77.6142 0 50 0C22.3858 0 0 22.3858 0 50C0 77.6142 22.3858 100 50 100Z" fill="white"/>
        <path d="M50.512 94C74.2907 94 93.5673 74.5244 93.5673 50.5C93.5673 26.4756 74.2907 7 50.512 7C26.7332 7 7.45667 26.4756 7.45667 50.5C7.45667 74.5244 26.7332 94 50.512 94Z" fill="#0052FF"/>
        <path d="M50.6248 65.4335C42.3697 65.4335 35.8996 58.7469 35.8996 50.5C35.8996 42.2531 42.5928 35.5664 50.6248 35.5664C57.9873 35.5664 64.0111 40.9157 65.1267 48.0481H80.0749C78.7363 32.6688 66.0191 20.6328 50.6248 20.6328C34.3379 20.6328 20.9514 34.0062 20.9514 50.5C20.9514 66.9936 34.1148 80.3671 50.6248 80.3671C66.2422 80.3671 78.7363 68.331 80.0749 52.9516H65.1267C64.0111 60.0841 57.9873 65.4335 50.6248 65.4335Z" fill="white"/>
    </svg>
`;ou.default=yE;var au={};Object.defineProperty(au,"__esModule",{value:!0});au.default=`
    <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="50" fill="white"/>
        <circle cx="49.9996" cy="49.9996" r="43.6363" fill="#1B53E4"/>
        <circle cx="49.9996" cy="49.9996" r="43.6363" stroke="white"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M19.3379 49.9484C19.3379 66.8508 33.04 80.553 49.9425 80.553C66.8449 80.553 80.5471 66.8508 80.5471 49.9484C80.5471 33.0459 66.8449 19.3438 49.9425 19.3438C33.04 19.3438 19.3379 33.0459 19.3379 49.9484ZM44.0817 40.0799C41.8725 40.0799 40.0817 41.8708 40.0817 44.0799V55.8029C40.0817 58.012 41.8725 59.8029 44.0817 59.8029H55.8046C58.0138 59.8029 59.8046 58.012 59.8046 55.8029V44.0799C59.8046 41.8708 58.0138 40.0799 55.8046 40.0799H44.0817Z" fill="white"/>
    </svg>
`;var Ro={};Object.defineProperty(Ro,"__esModule",{value:!0});Ro.StatusDotIcon=void 0;const lh=Ct;function mE(t){return(0,lh.h)("svg",Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},t),(0,lh.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.29995 4.99995C2.29995 5.57985 1.82985 6.04995 1.24995 6.04995C0.670052 6.04995 0.199951 5.57985 0.199951 4.99995C0.199951 4.42005 0.670052 3.94995 1.24995 3.94995C1.82985 3.94995 2.29995 4.42005 2.29995 4.99995ZM4.99995 6.04995C5.57985 6.04995 6.04995 5.57985 6.04995 4.99995C6.04995 4.42005 5.57985 3.94995 4.99995 3.94995C4.42005 3.94995 3.94995 4.42005 3.94995 4.99995C3.94995 5.57985 4.42005 6.04995 4.99995 6.04995ZM8.74995 6.04995C9.32985 6.04995 9.79995 5.57985 9.79995 4.99995C9.79995 4.42005 9.32985 3.94995 8.74995 3.94995C8.17005 3.94995 7.69995 4.42005 7.69995 4.99995C7.69995 5.57985 8.17005 6.04995 8.74995 6.04995Z"}))}Ro.StatusDotIcon=mE;var Ao={};function yp(t){this.mode=St.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,r=this.data.length;e<r;e++){var n=[],i=this.data.charCodeAt(e);i>65536?(n[0]=240|(i&1835008)>>>18,n[1]=128|(i&258048)>>>12,n[2]=128|(i&4032)>>>6,n[3]=128|i&63):i>2048?(n[0]=224|(i&61440)>>>12,n[1]=128|(i&4032)>>>6,n[2]=128|i&63):i>128?(n[0]=192|(i&1984)>>>6,n[1]=128|i&63):n[0]=i,this.parsedData.push(n)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}yp.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,r=this.parsedData.length;e<r;e++)t.put(this.parsedData[e],8)}};function er(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}er.prototype={addData:function(t){var e=new yp(t);this.dataList.push(e),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=er.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[t+r][e+n]=!0:this.modules[t+r][e+n]=!1)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=qe.getLostPoint(this);(r==0||t>n)&&(t=n,e=r)}return e},createMovieClip:function(t,e,r){var n=t.createEmptyMovieClip(e,r),i=1;this.make();for(var s=0;s<this.modules.length;s++)for(var o=s*i,a=0;a<this.modules[s].length;a++){var u=a*i,l=this.modules[s][a];l&&(n.beginFill(0,100),n.moveTo(u,o),n.lineTo(u+i,o),n.lineTo(u+i,o+i),n.lineTo(u,o+i),n.endFill())}return n},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=qe.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var n=t[e],i=t[r];if(this.modules[n][i]==null)for(var s=-2;s<=2;s++)for(var o=-2;o<=2;o++)s==-2||s==2||o==-2||o==2||s==0&&o==0?this.modules[n+s][i+o]=!0:this.modules[n+s][i+o]=!1}},setupTypeNumber:function(t){for(var e=qe.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,n=qe.getBCHTypeInfo(r),i=0;i<15;i++){var s=!t&&(n>>i&1)==1;i<6?this.modules[i][8]=s:i<8?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(var i=0;i<15;i++){var s=!t&&(n>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=s:i<9?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,n=this.moduleCount-1,i=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var a=0;a<2;a++)if(this.modules[n][o-a]==null){var u=!1;s<t.length&&(u=(t[s]>>>i&1)==1);var l=qe.getMask(e,n,o-a);l&&(u=!u),this.modules[n][o-a]=u,i--,i==-1&&(s++,i=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}}};er.PAD0=236;er.PAD1=17;er.createData=function(t,e,r){for(var n=Qt.getRSBlocks(t,e),i=new mp,s=0;s<r.length;s++){var o=r[s];i.put(o.mode,4),i.put(o.getLength(),qe.getLengthInBits(o.mode,t)),o.write(i)}for(var a=0,s=0;s<n.length;s++)a+=n[s].dataCount;if(i.getLengthInBits()>a*8)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+a*8+")");for(i.getLengthInBits()+4<=a*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=a*8||(i.put(er.PAD0,8),i.getLengthInBits()>=a*8));)i.put(er.PAD1,8);return er.createBytes(i,n)};er.createBytes=function(t,e){for(var r=0,n=0,i=0,s=new Array(e.length),o=new Array(e.length),a=0;a<e.length;a++){var u=e[a].dataCount,l=e[a].totalCount-u;n=Math.max(n,u),i=Math.max(i,l),s[a]=new Array(u);for(var d=0;d<s[a].length;d++)s[a][d]=255&t.buffer[d+r];r+=u;var p=qe.getErrorCorrectPolynomial(l),v=new Fn(s[a],p.getLength()-1),S=v.mod(p);o[a]=new Array(p.getLength()-1);for(var d=0;d<o[a].length;d++){var M=d+S.getLength()-o[a].length;o[a][d]=M>=0?S.get(M):0}}for(var x=0,d=0;d<e.length;d++)x+=e[d].totalCount;for(var O=new Array(x),I=0,d=0;d<n;d++)for(var a=0;a<e.length;a++)d<s[a].length&&(O[I++]=s[a][d]);for(var d=0;d<i;d++)for(var a=0;a<e.length;a++)d<o[a].length&&(O[I++]=o[a][d]);return O};var St={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},mr={L:1,M:0,Q:3,H:2},hr={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},qe={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;qe.getBCHDigit(e)-qe.getBCHDigit(qe.G15)>=0;)e^=qe.G15<<qe.getBCHDigit(e)-qe.getBCHDigit(qe.G15);return(t<<10|e)^qe.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;qe.getBCHDigit(e)-qe.getBCHDigit(qe.G18)>=0;)e^=qe.G18<<qe.getBCHDigit(e)-qe.getBCHDigit(qe.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;t!=0;)e++,t>>>=1;return e},getPatternPosition:function(t){return qe.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case hr.PATTERN000:return(e+r)%2==0;case hr.PATTERN001:return e%2==0;case hr.PATTERN010:return r%3==0;case hr.PATTERN011:return(e+r)%3==0;case hr.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case hr.PATTERN101:return e*r%2+e*r%3==0;case hr.PATTERN110:return(e*r%2+e*r%3)%2==0;case hr.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new Fn([1],0),r=0;r<t;r++)e=e.multiply(new Fn([1,ot.gexp(r)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case St.MODE_NUMBER:return 10;case St.MODE_ALPHA_NUM:return 9;case St.MODE_8BIT_BYTE:return 8;case St.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case St.MODE_NUMBER:return 12;case St.MODE_ALPHA_NUM:return 11;case St.MODE_8BIT_BYTE:return 16;case St.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(e<41)switch(t){case St.MODE_NUMBER:return 14;case St.MODE_ALPHA_NUM:return 13;case St.MODE_8BIT_BYTE:return 16;case St.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+e)},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n++)for(var i=0;i<e;i++){for(var s=0,o=t.isDark(n,i),a=-1;a<=1;a++)if(!(n+a<0||e<=n+a))for(var u=-1;u<=1;u++)i+u<0||e<=i+u||a==0&&u==0||o==t.isDark(n+a,i+u)&&s++;s>5&&(r+=3+s-5)}for(var n=0;n<e-1;n++)for(var i=0;i<e-1;i++){var l=0;t.isDark(n,i)&&l++,t.isDark(n+1,i)&&l++,t.isDark(n,i+1)&&l++,t.isDark(n+1,i+1)&&l++,(l==0||l==4)&&(r+=3)}for(var n=0;n<e;n++)for(var i=0;i<e-6;i++)t.isDark(n,i)&&!t.isDark(n,i+1)&&t.isDark(n,i+2)&&t.isDark(n,i+3)&&t.isDark(n,i+4)&&!t.isDark(n,i+5)&&t.isDark(n,i+6)&&(r+=40);for(var i=0;i<e;i++)for(var n=0;n<e-6;n++)t.isDark(n,i)&&!t.isDark(n+1,i)&&t.isDark(n+2,i)&&t.isDark(n+3,i)&&t.isDark(n+4,i)&&!t.isDark(n+5,i)&&t.isDark(n+6,i)&&(r+=40);for(var d=0,i=0;i<e;i++)for(var n=0;n<e;n++)t.isDark(n,i)&&d++;var p=Math.abs(100*d/e/e-50)/5;return r+=p*10,r}},ot={glog:function(t){if(t<1)throw new Error("glog("+t+")");return ot.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return ot.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var ut=0;ut<8;ut++)ot.EXP_TABLE[ut]=1<<ut;for(var ut=8;ut<256;ut++)ot.EXP_TABLE[ut]=ot.EXP_TABLE[ut-4]^ot.EXP_TABLE[ut-5]^ot.EXP_TABLE[ut-6]^ot.EXP_TABLE[ut-8];for(var ut=0;ut<255;ut++)ot.LOG_TABLE[ot.EXP_TABLE[ut]]=ut;function Fn(t,e){if(t.length==null)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&t[r]==0;)r++;this.num=new Array(t.length-r+e);for(var n=0;n<t.length-r;n++)this.num[n]=t[n+r]}Fn.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<t.getLength();n++)e[r+n]^=ot.gexp(ot.glog(this.get(r))+ot.glog(t.get(n)));return new Fn(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=ot.glog(this.get(0))-ot.glog(t.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<t.getLength();n++)r[n]^=ot.gexp(ot.glog(t.get(n))+e);return new Fn(r,0).mod(t)}};function Qt(t,e){this.totalCount=t,this.dataCount=e}Qt.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Qt.getRSBlocks=function(t,e){var r=Qt.getRsBlockTable(t,e);if(r==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=r.length/3,i=[],s=0;s<n;s++)for(var o=r[s*3+0],a=r[s*3+1],u=r[s*3+2],l=0;l<o;l++)i.push(new Qt(a,u));return i};Qt.getRsBlockTable=function(t,e){switch(e){case mr.L:return Qt.RS_BLOCK_TABLE[(t-1)*4+0];case mr.M:return Qt.RS_BLOCK_TABLE[(t-1)*4+1];case mr.Q:return Qt.RS_BLOCK_TABLE[(t-1)*4+2];case mr.H:return Qt.RS_BLOCK_TABLE[(t-1)*4+3];default:return}};function mp(){this.buffer=[],this.length=0}mp.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(var r=0;r<e;r++)this.putBit((t>>>e-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var xa=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function bp(t){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M",image:{svg:"",width:0,height:0}},typeof t=="string"&&(t={content:t}),t)for(var e in t)this.options[e]=t[e];if(typeof this.options.content!="string")throw new Error("Expected 'content' as string!");if(this.options.content.length===0)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0)||!(this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");function r(u){switch(u){case"L":return mr.L;case"M":return mr.M;case"Q":return mr.Q;case"H":return mr.H;default:throw new Error("Unknwon error correction level: "+u)}}function n(u,l){for(var d=i(u),p=1,v=0,S=0,M=xa.length;S<=M;S++){var x=xa[S];if(!x)throw new Error("Content too long: expected "+v+" but got "+d);switch(l){case"L":v=x[0];break;case"M":v=x[1];break;case"Q":v=x[2];break;case"H":v=x[3];break;default:throw new Error("Unknwon error correction level: "+l)}if(d<=v)break;p++}if(p>xa.length)throw new Error("Content too long");return p}function i(u){var l=encodeURI(u).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return l.length+(l.length!=u?3:0)}var s=this.options.content,o=n(s,this.options.ecl),a=r(this.options.ecl);this.qrcode=new er(o,a),this.qrcode.addData(s),this.qrcode.make()}bp.prototype.svg=function(t){var e=this.options||{},r=this.qrcode.modules;typeof t>"u"&&(t={container:e.container||"svg"});for(var n=typeof e.pretty<"u"?!!e.pretty:!0,i=n?"  ":"",s=n?`\r
`:"",o=e.width,a=e.height,u=r.length,l=o/(u+2*e.padding),d=a/(u+2*e.padding),p=typeof e.join<"u"?!!e.join:!1,v=typeof e.swap<"u"?!!e.swap:!1,S=typeof e.xmlDeclaration<"u"?!!e.xmlDeclaration:!0,M=typeof e.predefined<"u"?!!e.predefined:!1,x=M?i+'<defs><path id="qrmodule" d="M0 0 h'+d+" v"+l+' H0 z" style="fill:'+e.color+';shape-rendering:crispEdges;" /></defs>'+s:"",O=i+'<rect x="0" y="0" width="'+o+'" height="'+a+'" style="fill:'+e.background+';shape-rendering:crispEdges;"/>'+s,I="",R="",T=0;T<u;T++)for(var N=0;N<u;N++){var k=r[N][T];if(k){var P=N*l+e.padding*l,W=T*d+e.padding*d;if(v){var ee=P;P=W,W=ee}if(p){var D=l+P,z=d+W;P=Number.isInteger(P)?Number(P):P.toFixed(2),W=Number.isInteger(W)?Number(W):W.toFixed(2),D=Number.isInteger(D)?Number(D):D.toFixed(2),z=Number.isInteger(z)?Number(z):z.toFixed(2),R+="M"+P+","+W+" V"+z+" H"+D+" V"+W+" H"+P+" Z "}else M?I+=i+'<use x="'+P.toString()+'" y="'+W.toString()+'" href="#qrmodule" />'+s:I+=i+'<rect x="'+P.toString()+'" y="'+W.toString()+'" width="'+l+'" height="'+d+'" style="fill:'+e.color+';shape-rendering:crispEdges;"/>'+s}}p&&(I=i+'<path x="0" y="0" style="fill:'+e.color+';shape-rendering:crispEdges;" d="'+R+'" />');let U="";if(this.options.image!==void 0&&this.options.image.svg){const m=o*this.options.image.width/100,c=a*this.options.image.height/100,f=o/2-m/2,g=a/2-c/2;U+=`<svg x="${f}" y="${g}" width="${m}" height="${c}" viewBox="0 0 100 100" preserveAspectRatio="xMinYMin meet">`,U+=this.options.image.svg+s,U+="</svg>"}var q="";switch(t.container){case"svg":S&&(q+='<?xml version="1.0" standalone="yes"?>'+s),q+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+o+'" height="'+a+'">'+s,q+=x+O+I,q+=U,q+="</svg>";break;case"svg-viewbox":S&&(q+='<?xml version="1.0" standalone="yes"?>'+s),q+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+o+" "+a+'">'+s,q+=x+O+I,q+=U,q+="</svg>";break;case"g":q+='<g width="'+o+'" height="'+a+'">'+s,q+=x+O+I,q+=U,q+="</g>";break;default:q+=(x+O+I+U).replace(/^\s+/,"");break}return q};var bE=bp,wE=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ao,"__esModule",{value:!0});Ao.QRCode=void 0;const _E=Ct,hh=as,SE=wE(bE),EE=t=>{const[e,r]=(0,hh.useState)("");return(0,hh.useEffect)(()=>{var n,i;const s=new SE.default({content:t.content,background:t.bgColor||"#ffffff",color:t.fgColor||"#000000",container:"svg",ecl:"M",width:(n=t.width)!==null&&n!==void 0?n:256,height:(i=t.height)!==null&&i!==void 0?i:256,padding:0,image:t.image}),o=Buffer.from(s.svg(),"utf8").toString("base64");r(`data:image/svg+xml;base64,${o}`)}),e?(0,_E.h)("img",{src:e,alt:"QR Code"}):null};Ao.QRCode=EE;var ko={},cu={};Object.defineProperty(cu,"__esModule",{value:!0});cu.default=".-cbwsdk-css-reset .-cbwsdk-spinner{display:inline-block}.-cbwsdk-css-reset .-cbwsdk-spinner svg{display:inline-block;animation:2s linear infinite -cbwsdk-spinner-svg}.-cbwsdk-css-reset .-cbwsdk-spinner svg circle{animation:1.9s ease-in-out infinite both -cbwsdk-spinner-circle;display:block;fill:rgba(0,0,0,0);stroke-dasharray:283;stroke-dashoffset:280;stroke-linecap:round;stroke-width:10px;transform-origin:50% 50%}@keyframes -cbwsdk-spinner-svg{0%{transform:rotateZ(0deg)}100%{transform:rotateZ(360deg)}}@keyframes -cbwsdk-spinner-circle{0%,25%{stroke-dashoffset:280;transform:rotate(0)}50%,75%{stroke-dashoffset:75;transform:rotate(45deg)}100%{stroke-dashoffset:280;transform:rotate(360deg)}}";var ME=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ko,"__esModule",{value:!0});ko.Spinner=void 0;const _s=Ct,CE=ME(cu),xE=t=>{var e;const r=(e=t.size)!==null&&e!==void 0?e:64,n=t.color||"#000";return(0,_s.h)("div",{class:"-cbwsdk-spinner"},(0,_s.h)("style",null,CE.default),(0,_s.h)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{width:r,height:r}},(0,_s.h)("circle",{style:{cx:50,cy:50,r:45,stroke:n}})))};ko.Spinner=xE;var uu={};Object.defineProperty(uu,"__esModule",{value:!0});uu.default=".-cbwsdk-css-reset .-cbwsdk-connect-content{height:430px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-connect-content.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-header{display:flex;align-items:center;justify-content:space-between;margin:0 0 30px}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading{font-style:normal;font-weight:500;font-size:28px;line-height:36px;margin:0}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-layout{display:flex;flex-direction:row}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-left{margin-right:30px;display:flex;flex-direction:column;justify-content:space-between}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-right{flex:25%;margin-right:34px}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-wrapper{width:220px;height:220px;border-radius:12px;display:flex;justify-content:center;align-items:center;background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light{background-color:rgba(255,255,255,.95)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light>p{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark{background-color:rgba(10,11,13,.9)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark>p{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting>p{font-size:12px;font-weight:bold;margin-top:16px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app{border-radius:8px;font-size:14px;line-height:20px;padding:12px;width:339px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.light{background:#eef0f3;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.dark{background:#1e2025;color:#8a919e}.-cbwsdk-css-reset .-cbwsdk-cancel-button{-webkit-appearance:none;border:none;background:none;cursor:pointer;padding:0;margin:0}.-cbwsdk-css-reset .-cbwsdk-cancel-button-x{position:relative;display:block;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-wallet-steps{padding:0 0 0 16px;margin:0;width:100%;list-style:decimal}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item{list-style-type:decimal;display:list-item;font-style:normal;font-weight:400;font-size:16px;line-height:24px;margin-top:20px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item-wrapper{display:flex;align-items:center}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-pad-left{margin-left:6px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon{display:flex;border-radius:50%;height:24px;width:24px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.light{background:#0052ff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.dark{background:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item{align-items:center;display:flex;flex-direction:row;padding:16px 24px;gap:12px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-connect-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-item.light.selected{background:#f5f8ff;color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark.selected{background:#001033;color:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item.selected{border-radius:100px;font-weight:600}.-cbwsdk-css-reset .-cbwsdk-connect-item-copy-wrapper{margin:0 4px 0 8px}.-cbwsdk-css-reset .-cbwsdk-connect-item-title{margin:0 0 0;font-size:16px;line-height:24px;font-weight:500}.-cbwsdk-css-reset .-cbwsdk-connect-item-description{font-weight:400;font-size:14px;line-height:20px;margin:0}";var fi=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.CoinbaseAppSteps=Xt.CoinbaseWalletSteps=Xt.ConnectItem=Xt.ConnectContent=void 0;const Ot=fi(Co),V=Ct,fh=as,IE=$,RE=ri,AE=xo,kE=fi(iu),OE=fi(su),wp=Io,TE=fi(ou),NE=fi(au),LE=Ro,PE=Ao,$E=ko,DE=fi(uu),dh={"coinbase-wallet-app":{title:"Coinbase Wallet app",description:"Connect with your self-custody wallet",icon:OE.default,steps:Sp},"coinbase-app":{title:"Coinbase app",description:"Connect with your Coinbase account",icon:kE.default,steps:Ep}},jE=t=>{switch(t){case"coinbase-app":return TE.default;case"coinbase-wallet-app":default:return NE.default}},nc=t=>t==="light"?"#FFFFFF":"#0A0B0D";function FE(t){const{theme:e}=t,[r,n]=(0,fh.useState)("coinbase-wallet-app"),i=(0,fh.useCallback)(l=>{n(l)},[]),s=(0,IE.createQrUrl)(t.sessionId,t.sessionSecret,t.linkAPIUrl,t.isParentConnection,t.version,t.chainId),o=dh[r];if(!r)return null;const a=o.steps,u=r==="coinbase-app";return(0,V.h)("div",{"data-testid":"connect-content",class:(0,Ot.default)("-cbwsdk-connect-content",e)},(0,V.h)("style",null,DE.default),(0,V.h)("div",{class:"-cbwsdk-connect-content-header"},(0,V.h)("h2",{class:(0,Ot.default)("-cbwsdk-connect-content-heading",e)},"Scan to connect with one of our mobile apps"),t.onCancel&&(0,V.h)("button",{type:"button",class:"-cbwsdk-cancel-button",onClick:t.onCancel},(0,V.h)(AE.CloseIcon,{fill:e==="light"?"#0A0B0D":"#FFFFFF"}))),(0,V.h)("div",{class:"-cbwsdk-connect-content-layout"},(0,V.h)("div",{class:"-cbwsdk-connect-content-column-left"},(0,V.h)("div",null,Object.entries(dh).map(([l,d])=>(0,V.h)(_p,{key:l,title:d.title,description:d.description,icon:d.icon,selected:r===l,onClick:()=>i(l),theme:e}))),u&&(0,V.h)("div",{class:(0,Ot.default)("-cbwsdk-connect-content-update-app",e)},"Dont see a ",(0,V.h)("strong",null,"Scan")," option? Update your Coinbase app to the latest version and try again.")),(0,V.h)("div",{class:"-cbwsdk-connect-content-column-right"},(0,V.h)("div",{class:"-cbwsdk-connect-content-qr-wrapper"},(0,V.h)(PE.QRCode,{content:s,width:200,height:200,fgColor:"#000",bgColor:"transparent",image:{svg:jE(r),width:25,height:25}}),(0,V.h)("input",{type:"hidden",name:"cbw-cbwsdk-version",value:RE.LIB_VERSION}),(0,V.h)("input",{type:"hidden",value:s})),(0,V.h)(a,{theme:e}),!t.isConnected&&(0,V.h)("div",{"data-testid":"connecting-spinner",class:(0,Ot.default)("-cbwsdk-connect-content-qr-connecting",e)},(0,V.h)($E.Spinner,{size:36,color:e==="dark"?"#FFF":"#000"}),(0,V.h)("p",null,"Connecting...")))))}Xt.ConnectContent=FE;function _p({title:t,description:e,icon:r,selected:n,theme:i,onClick:s}){return(0,V.h)("div",{onClick:s,class:(0,Ot.default)("-cbwsdk-connect-item",i,{selected:n})},(0,V.h)("div",null,(0,V.h)("img",{src:r,alt:t})),(0,V.h)("div",{class:"-cbwsdk-connect-item-copy-wrapper"},(0,V.h)("h3",{class:"-cbwsdk-connect-item-title"},t),(0,V.h)("p",{class:"-cbwsdk-connect-item-description"},e)))}Xt.ConnectItem=_p;function Sp({theme:t}){return(0,V.h)("ol",{class:"-cbwsdk-wallet-steps"},(0,V.h)("li",{class:(0,Ot.default)("-cbwsdk-wallet-steps-item",t)},(0,V.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase Wallet app")),(0,V.h)("li",{class:(0,Ot.default)("-cbwsdk-wallet-steps-item",t)},(0,V.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},(0,V.h)("span",null,"Tap ",(0,V.h)("strong",null,"Scan")," "),(0,V.h)("span",{class:(0,Ot.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",t)},(0,V.h)(wp.QRCodeIcon,{fill:nc(t)})))))}Xt.CoinbaseWalletSteps=Sp;function Ep({theme:t}){return(0,V.h)("ol",{class:"-cbwsdk-wallet-steps"},(0,V.h)("li",{class:(0,Ot.default)("-cbwsdk-wallet-steps-item",t)},(0,V.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase app")),(0,V.h)("li",{class:(0,Ot.default)("-cbwsdk-wallet-steps-item",t)},(0,V.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},(0,V.h)("span",null,"Tap ",(0,V.h)("strong",null,"More")),(0,V.h)("span",{class:(0,Ot.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",t)},(0,V.h)(LE.StatusDotIcon,{fill:nc(t)})),(0,V.h)("span",{class:"-cbwsdk-wallet-steps-pad-left"},"then ",(0,V.h)("strong",null,"Scan")),(0,V.h)("span",{class:(0,Ot.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",t)},(0,V.h)(wp.QRCodeIcon,{fill:nc(t)})))))}Xt.CoinbaseAppSteps=Ep;var Oo={},To={};Object.defineProperty(To,"__esModule",{value:!0});To.ArrowLeftIcon=void 0;const ph=Ct;function BE(t){return(0,ph.h)("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},t),(0,ph.h)("path",{d:"M8.60675 0.155884L7.37816 1.28209L12.7723 7.16662H0V8.83328H12.6548L6.82149 14.6666L8 15.8451L15.8201 8.02501L8.60675 0.155884Z"}))}To.ArrowLeftIcon=BE;var No={};Object.defineProperty(No,"__esModule",{value:!0});No.LaptopIcon=void 0;const Ia=Ct;function VE(t){return(0,Ia.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},t),(0,Ia.h)("path",{d:"M1.8001 2.2002H12.2001V9.40019H1.8001V2.2002ZM3.4001 3.8002V7.80019H10.6001V3.8002H3.4001Z"}),(0,Ia.h)("path",{d:"M13.4001 10.2002H0.600098C0.600098 11.0838 1.31644 11.8002 2.2001 11.8002H11.8001C12.6838 11.8002 13.4001 11.0838 13.4001 10.2002Z"}))}No.LaptopIcon=VE;var Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.SafeIcon=void 0;const gh=Ct;function WE(t){return(0,gh.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},t),(0,gh.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.600098 0.600098V11.8001H13.4001V0.600098H0.600098ZM7.0001 9.2001C5.3441 9.2001 4.0001 7.8561 4.0001 6.2001C4.0001 4.5441 5.3441 3.2001 7.0001 3.2001C8.6561 3.2001 10.0001 4.5441 10.0001 6.2001C10.0001 7.8561 8.6561 9.2001 7.0001 9.2001ZM0.600098 12.6001H3.8001V13.4001H0.600098V12.6001ZM10.2001 12.6001H13.4001V13.4001H10.2001V12.6001ZM8.8001 6.2001C8.8001 7.19421 7.99421 8.0001 7.0001 8.0001C6.00598 8.0001 5.2001 7.19421 5.2001 6.2001C5.2001 5.20598 6.00598 4.4001 7.0001 4.4001C7.99421 4.4001 8.8001 5.20598 8.8001 6.2001Z"}))}Lo.SafeIcon=WE;var lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.default=".-cbwsdk-css-reset .-cbwsdk-try-extension{display:flex;margin-top:12px;height:202px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-try-extension.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-column-half{flex:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading{font-style:normal;font-weight:500;font-size:25px;line-height:32px;margin:0;max-width:204px}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta{appearance:none;border:none;background:none;color:#0052ff;cursor:pointer;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.light{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.dark{color:#588af5}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-wrapper{display:flex;align-items:center;margin-top:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-icon{display:block;margin-left:4px;height:14px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;padding:0;list-style:none;height:100%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item{display:flex;align-items:center;flex-flow:nowrap;margin-top:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item:first-of-type{margin-top:0}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon-wrapper{display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon{display:flex;height:32px;width:32px;border-radius:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.light{background:#eef0f3}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.dark{background:#1e2025}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy{display:block;font-weight:400;font-size:14px;line-height:20px;padding-left:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.light{color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.dark{color:#8a919e}";var Mp=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.TryExtensionContent=void 0;const Fr=Mp(Co),Xe=Ct,Ra=as,HE=To,zE=No,UE=Lo,qE=Mp(lu);function GE({theme:t}){const[e,r]=(0,Ra.useState)(!1),n=(0,Ra.useCallback)(()=>{window.open("https://api.wallet.coinbase.com/rpc/v2/desktop/chrome","_blank")},[]),i=(0,Ra.useCallback)(()=>{e?window.location.reload():(n(),r(!0))},[n,e]);return(0,Xe.h)("div",{class:(0,Fr.default)("-cbwsdk-try-extension",t)},(0,Xe.h)("style",null,qE.default),(0,Xe.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,Xe.h)("h3",{class:(0,Fr.default)("-cbwsdk-try-extension-heading",t)},"Or try the Coinbase Wallet browser extension"),(0,Xe.h)("div",{class:"-cbwsdk-try-extension-cta-wrapper"},(0,Xe.h)("button",{class:(0,Fr.default)("-cbwsdk-try-extension-cta",t),onClick:i},e?"Refresh":"Install"),(0,Xe.h)("div",null,!e&&(0,Xe.h)(HE.ArrowLeftIcon,{class:"-cbwsdk-try-extension-cta-icon",fill:t==="light"?"#0052FF":"#588AF5"})))),(0,Xe.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,Xe.h)("ul",{class:"-cbwsdk-try-extension-list"},(0,Xe.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,Xe.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,Xe.h)("span",{class:(0,Fr.default)("-cbwsdk-try-extension-list-item-icon",t)},(0,Xe.h)(zE.LaptopIcon,{fill:t==="light"?"#0A0B0D":"#FFFFFF"}))),(0,Xe.h)("div",{class:(0,Fr.default)("-cbwsdk-try-extension-list-item-copy",t)},"Connect with dapps with just one click on your desktop browser")),(0,Xe.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,Xe.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,Xe.h)("span",{class:(0,Fr.default)("-cbwsdk-try-extension-list-item-icon",t)},(0,Xe.h)(UE.SafeIcon,{fill:t==="light"?"#0A0B0D":"#FFFFFF"}))),(0,Xe.h)("div",{class:(0,Fr.default)("-cbwsdk-try-extension-list-item-copy",t)},"Add an additional layer of security by using a supported Ledger hardware wallet")))))}Oo.TryExtensionContent=GE;var hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.default=".-cbwsdk-css-reset .-cbwsdk-connect-dialog{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.light{background-color:rgba(0,0,0,.5)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.dark{background-color:rgba(50,53,61,.4)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box{display:flex;position:relative;flex-direction:column;transform:scale(1);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box-hidden{opacity:0;transform:scale(0.85)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container{display:block}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container-hidden{display:none}";var Cp=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.ConnectDialog=void 0;const Aa=Cp(Co),Br=Ct,ka=as,JE=Xt,ZE=Oo,QE=Cp(hu),YE=t=>{const{isOpen:e,darkMode:r}=t,[n,i]=(0,ka.useState)(!e),[s,o]=(0,ka.useState)(!e);(0,ka.useEffect)(()=>{const u=[window.setTimeout(()=>{o(!e)},10)];return e?i(!1):u.push(window.setTimeout(()=>{i(!0)},360)),()=>{u.forEach(window.clearTimeout)}},[t.isOpen]);const a=r?"dark":"light";return(0,Br.h)("div",{class:(0,Aa.default)("-cbwsdk-connect-dialog-container",n&&"-cbwsdk-connect-dialog-container-hidden")},(0,Br.h)("style",null,QE.default),(0,Br.h)("div",{class:(0,Aa.default)("-cbwsdk-connect-dialog-backdrop",a,s&&"-cbwsdk-connect-dialog-backdrop-hidden")}),(0,Br.h)("div",{class:"-cbwsdk-connect-dialog"},(0,Br.h)("div",{class:(0,Aa.default)("-cbwsdk-connect-dialog-box",s&&"-cbwsdk-connect-dialog-box-hidden")},t.connectDisabled?null:(0,Br.h)(JE.ConnectContent,{theme:a,version:t.version,sessionId:t.sessionId,sessionSecret:t.sessionSecret,linkAPIUrl:t.linkAPIUrl,isConnected:t.isConnected,isParentConnection:t.isParentConnection,chainId:t.chainId,onCancel:t.onCancel}),(0,Br.h)(ZE.TryExtensionContent,{theme:a}))))};Mo.ConnectDialog=YE;Object.defineProperty(wo,"__esModule",{value:!0});wo.LinkFlow=void 0;const Oa=Ct,vh=Eo,KE=Mo;class XE{constructor(e){this.extensionUI$=new vh.BehaviorSubject({}),this.subscriptions=new vh.Subscription,this.isConnected=!1,this.chainId=1,this.isOpen=!1,this.onCancel=null,this.root=null,this.connectDisabled=!1,this.darkMode=e.darkMode,this.version=e.version,this.sessionId=e.sessionId,this.sessionSecret=e.sessionSecret,this.linkAPIUrl=e.linkAPIUrl,this.isParentConnection=e.isParentConnection,this.connected$=e.connected$,this.chainId$=e.chainId$}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-link-flow-root",e.appendChild(this.root),this.render(),this.subscriptions.add(this.connected$.subscribe(r=>{this.isConnected!==r&&(this.isConnected=r,this.render())})),this.subscriptions.add(this.chainId$.subscribe(r=>{this.chainId!==r&&(this.chainId=r,this.render())}))}detach(){var e;this.root&&(this.subscriptions.unsubscribe(),(0,Oa.render)(null,this.root),(e=this.root.parentElement)===null||e===void 0||e.removeChild(this.root))}setConnectDisabled(e){this.connectDisabled=e}open(e){this.isOpen=!0,this.onCancel=e.onCancel,this.render()}close(){this.isOpen=!1,this.onCancel=null,this.render()}render(){if(!this.root)return;const e=this.extensionUI$.subscribe(()=>{this.root&&(0,Oa.render)((0,Oa.h)(KE.ConnectDialog,{darkMode:this.darkMode,version:this.version,sessionId:this.sessionId,sessionSecret:this.sessionSecret,linkAPIUrl:this.linkAPIUrl,isOpen:this.isOpen,isConnected:this.isConnected,isParentConnection:this.isParentConnection,chainId:this.chainId,onCancel:this.onCancel,connectDisabled:this.connectDisabled}),this.root)});this.subscriptions.add(e)}}wo.LinkFlow=XE;var xp={},fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}";(function(t){var e=F&&F.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(t,"__esModule",{value:!0}),t.SnackbarInstance=t.SnackbarContainer=t.Snackbar=void 0;const r=e(Co),n=Ct,i=as,s=e(fu),o="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";function a(p){switch(p){case"coinbase-app":return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE0LjY3NCAxOC44NThjLTIuMDQ1IDAtMy42NDgtMS43MjItMy42NDgtMy44NDVzMS42NTktMy44NDUgMy42NDgtMy44NDVjMS44MjQgMCAzLjMxNyAxLjM3NyAzLjU5MyAzLjIxNGgzLjcwM2MtLjMzMS0zLjk2LTMuNDgyLTcuMDU5LTcuMjk2LTcuMDU5LTQuMDM0IDAtNy4zNSAzLjQ0My03LjM1IDcuNjkgMCA0LjI0NiAzLjI2IDcuNjkgNy4zNSA3LjY5IDMuODcgMCA2Ljk2NS0zLjEgNy4yOTYtNy4wNTloLTMuNzAzYy0uMjc2IDEuODM2LTEuNzY5IDMuMjE0LTMuNTkzIDMuMjE0WiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0wIDEwLjY3OGMwLTMuNzExIDAtNS41OTYuNzQyLTcuMDIzQTYuNTMyIDYuNTMyIDAgMCAxIDMuNjU1Ljc0MkM1LjA4MiAwIDYuOTY3IDAgMTAuNjc4IDBoNy45MzhjMy43MTEgMCA1LjU5NiAwIDcuMDIzLjc0MmE2LjUzMSA2LjUzMSAwIDAgMSAyLjkxMyAyLjkxM2MuNzQyIDEuNDI3Ljc0MiAzLjMxMi43NDIgNy4wMjN2Ny45MzhjMCAzLjcxMSAwIDUuNTk2LS43NDIgNy4wMjNhNi41MzEgNi41MzEgMCAwIDEtMi45MTMgMi45MTNjLTEuNDI3Ljc0Mi0zLjMxMi43NDItNy4wMjMuNzQyaC03LjkzOGMtMy43MTEgMC01LjU5NiAwLTcuMDIzLS43NDJhNi41MzEgNi41MzEgMCAwIDEtMi45MTMtMi45MTNDMCAyNC4yMTIgMCAyMi4zODQgMCAxOC42MTZ2LTcuOTM4WiIgZmlsbD0iIzAwNTJGRiIvPjxwYXRoIGQ9Ik0xNC42ODQgMTkuNzczYy0yLjcyNyAwLTQuODY0LTIuMjk1LTQuODY0LTUuMTI2IDAtMi44MzEgMi4yMS01LjEyNyA0Ljg2NC01LjEyNyAyLjQzMiAwIDQuNDIyIDEuODM3IDQuNzkgNC4yODVoNC45MzhjLS40NDItNS4yOC00LjY0My05LjQxMS05LjcyOC05LjQxMS01LjM4IDAtOS44MDIgNC41OS05LjgwMiAxMC4yNTMgMCA1LjY2MiA0LjM0OCAxMC4yNTMgOS44MDIgMTAuMjUzIDUuMTU5IDAgOS4yODYtNC4xMzIgOS43MjgtOS40MTFoLTQuOTM4Yy0uMzY4IDIuNDQ4LTIuMzU4IDQuMjg0LTQuNzkgNC4yODRaIiBmaWxsPSIjZmZmIi8+PC9zdmc+";case"coinbase-wallet-app":default:return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+"}}class u{constructor(v){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=v.darkMode}attach(v){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",v.appendChild(this.root),this.render()}presentItem(v){const S=this.nextItemKey++;return this.items.set(S,v),this.render(),()=>{this.items.delete(S),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,n.render)((0,n.h)("div",null,(0,n.h)(t.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([v,S])=>(0,n.h)(t.SnackbarInstance,Object.assign({},S,{key:v}))))),this.root)}}t.Snackbar=u;const l=p=>(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-container")},(0,n.h)("style",null,s.default),(0,n.h)("div",{class:"-cbwsdk-snackbar"},p.children));t.SnackbarContainer=l;const d=({autoExpand:p,message:v,menuItems:S,appSrc:M})=>{const[x,O]=(0,i.useState)(!0),[I,R]=(0,i.useState)(p??!1);(0,i.useEffect)(()=>{const N=[window.setTimeout(()=>{O(!1)},1),window.setTimeout(()=>{R(!0)},1e4)];return()=>{N.forEach(window.clearTimeout)}});const T=()=>{R(!I)};return(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-instance",x&&"-cbwsdk-snackbar-instance-hidden",I&&"-cbwsdk-snackbar-instance-expanded")},(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:T},(0,n.h)("img",{src:a(M),class:"-cbwsdk-snackbar-instance-header-cblogo"}),(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},v),(0,n.h)("div",{class:"-gear-container"},!I&&(0,n.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,n.h)("img",{src:o,class:"-gear-icon",title:"Expand"}))),S&&S.length>0&&(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},S.map((N,k)=>(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-instance-menu-item",N.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:N.onClick,key:k},(0,n.h)("svg",{width:N.svgWidth,height:N.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("path",{"fill-rule":N.defaultFillRule,"clip-rule":N.defaultClipRule,d:N.path,fill:"#AAAAAA"})),(0,n.h)("span",{class:(0,r.default)("-cbwsdk-snackbar-instance-menu-item-info",N.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},N.info)))))};t.SnackbarInstance=d})(xp);var Po={},du={};Object.defineProperty(du,"__esModule",{value:!0});du.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';var e3=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Po,"__esModule",{value:!0});Po.injectCssReset=void 0;const t3=e3(du);function r3(){const t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode(t3.default)),document.documentElement.appendChild(t)}Po.injectCssReset=r3;Object.defineProperty(bo,"__esModule",{value:!0});bo.WalletSDKUI=void 0;const n3=wo,i3=xp,s3=Po;class o3{constructor(e){this.standalone=null,this.attached=!1,this.appSrc=null,this.snackbar=new i3.Snackbar({darkMode:e.darkMode}),this.linkFlow=new n3.LinkFlow({darkMode:e.darkMode,version:e.version,sessionId:e.session.id,sessionSecret:e.session.secret,linkAPIUrl:e.linkAPIUrl,connected$:e.connected$,chainId$:e.chainId$,isParentConnection:!1})}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const e=document.documentElement,r=document.createElement("div");r.className="-cbwsdk-css-reset",e.appendChild(r),this.linkFlow.attach(r),this.snackbar.attach(r),this.attached=!0,(0,s3.injectCssReset)()}setConnectDisabled(e){this.linkFlow.setConnectDisabled(e)}addEthereumChain(e){}watchAsset(e){}switchEthereumChain(e){}requestEthereumAccounts(e){this.linkFlow.open({onCancel:e.onCancel})}hideRequestEthereumAccounts(){this.linkFlow.close()}signEthereumMessage(e){}signEthereumTransaction(e){}submitEthereumTransaction(e){}ethereumAddressFromSignedMessage(e){}showConnecting(e){let r;return e.isUnlinkedErrorState?r={autoExpand:!0,message:"Connection lost",appSrc:this.appSrc,menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:r={message:"Confirm on phone",appSrc:this.appSrc,menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(r)}setAppSrc(e){this.appSrc=e}reloadUI(){document.location.reload()}inlineAccountsResponse(){return!1}inlineAddEthereumChain(e){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}setStandalone(e){this.standalone=e}isStandalone(){var e;return(e=this.standalone)!==null&&e!==void 0?e:!1}}bo.WalletSDKUI=o3;var $o={},Do={};Object.defineProperty(Do,"__esModule",{value:!0});var Tn;(function(t){t.typeOfFunction="function",t.boolTrue=!0})(Tn||(Tn={}));function Ip(t,e,r){if(!r||typeof r.value!==Tn.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+e+"> is not a method!");return{configurable:Tn.boolTrue,get:function(){var n=r.value.bind(this);return Object.defineProperty(this,e,{value:n,configurable:Tn.boolTrue,writable:Tn.boolTrue}),n}}}Do.bind=Ip;Do.default=Ip;function Rp(t){return function(r){return r.lift(new a3(t))}}var a3=function(){function t(e){this.durationSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new c3(e,this.durationSelector))},t}(),c3=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.durationSelector=n,i.hasValue=!1,i}return e.prototype._next=function(r){if(this.value=r,this.hasValue=!0,!this.throttled){var n=void 0;try{var i=this.durationSelector;n=i(r)}catch(o){return this.destination.error(o)}var s=Ye(n,new Ze(this));!s||s.closed?this.clearThrottle():this.add(this.throttled=s)}},e.prototype.clearThrottle=function(){var r=this,n=r.value,i=r.hasValue,s=r.throttled;s&&(this.remove(s),this.throttled=void 0,s.unsubscribe()),i&&(this.value=void 0,this.hasValue=!1,this.destination.next(n))},e.prototype.notifyNext=function(){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(Qe);function u3(t,e){return e===void 0&&(e=mt),Rp(function(){return cp(t,e)})}function l3(t){return function(r){return r.lift(new h3(t))}}var h3=function(){function t(e){this.closingNotifier=e}return t.prototype.call=function(e,r){return r.subscribe(new f3(e,this.closingNotifier))},t}(),f3=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.buffer=[],i.add(Ye(n,new Ze(i))),i}return e.prototype._next=function(r){this.buffer.push(r)},e.prototype.notifyNext=function(){var r=this.buffer;this.buffer=[],this.destination.next(r)},e}(Qe);function d3(t,e){return e===void 0&&(e=null),function(n){return n.lift(new p3(t,e))}}var p3=function(){function t(e,r){this.bufferSize=e,this.startBufferEvery=r,!r||e===r?this.subscriberClass=g3:this.subscriberClass=v3}return t.prototype.call=function(e,r){return r.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},t}(),g3=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.bufferSize=n,i.buffer=[],i}return e.prototype._next=function(r){var n=this.buffer;n.push(r),n.length==this.bufferSize&&(this.destination.next(n),this.buffer=[])},e.prototype._complete=function(){var r=this.buffer;r.length>0&&this.destination.next(r),t.prototype._complete.call(this)},e}(B),v3=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.bufferSize=n,s.startBufferEvery=i,s.buffers=[],s.count=0,s}return e.prototype._next=function(r){var n=this,i=n.bufferSize,s=n.startBufferEvery,o=n.buffers,a=n.count;this.count++,a%s===0&&o.push([]);for(var u=o.length;u--;){var l=o[u];l.push(r),l.length===i&&(o.splice(u,1),this.destination.next(l))}},e.prototype._complete=function(){for(var r=this,n=r.buffers,i=r.destination;n.length>0;){var s=n.shift();s.length>0&&i.next(s)}t.prototype._complete.call(this)},e}(B);function y3(t){var e=arguments.length,r=mt;Mt(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],e--);var n=null;e>=2&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(o){return o.lift(new m3(t,n,i,r))}}var m3=function(){function t(e,r,n,i){this.bufferTimeSpan=e,this.bufferCreationInterval=r,this.maxBufferSize=n,this.scheduler=i}return t.prototype.call=function(e,r){return r.subscribe(new w3(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),b3=function(){function t(){this.buffer=[]}return t}(),w3=function(t){A(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;a.bufferTimeSpan=n,a.bufferCreationInterval=i,a.maxBufferSize=s,a.scheduler=o,a.contexts=[];var u=a.openContext();if(a.timespanOnly=i==null||i<0,a.timespanOnly){var l={subscriber:a,context:u,bufferTimeSpan:n};a.add(u.closeAction=o.schedule(yh,n,l))}else{var d={subscriber:a,context:u},p={bufferTimeSpan:n,bufferCreationInterval:i,subscriber:a,scheduler:o};a.add(u.closeAction=o.schedule(Ap,n,d)),a.add(o.schedule(_3,i,p))}return a}return e.prototype._next=function(r){for(var n=this.contexts,i=n.length,s,o=0;o<i;o++){var a=n[o],u=a.buffer;u.push(r),u.length==this.maxBufferSize&&(s=a)}s&&this.onBufferFull(s)},e.prototype._error=function(r){this.contexts.length=0,t.prototype._error.call(this,r)},e.prototype._complete=function(){for(var r=this,n=r.contexts,i=r.destination;n.length>0;){var s=n.shift();i.next(s.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(r){this.closeContext(r);var n=r.closeAction;if(n.unsubscribe(),this.remove(n),!this.closed&&this.timespanOnly){r=this.openContext();var i=this.bufferTimeSpan,s={subscriber:this,context:r,bufferTimeSpan:i};this.add(r.closeAction=this.scheduler.schedule(yh,i,s))}},e.prototype.openContext=function(){var r=new b3;return this.contexts.push(r),r},e.prototype.closeContext=function(r){this.destination.next(r.buffer);var n=this.contexts,i=n?n.indexOf(r):-1;i>=0&&n.splice(n.indexOf(r),1)},e}(B);function yh(t){var e=t.subscriber,r=t.context;r&&e.closeContext(r),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function _3(t){var e=t.bufferCreationInterval,r=t.bufferTimeSpan,n=t.subscriber,i=t.scheduler,s=n.openContext(),o=this;n.closed||(n.add(s.closeAction=i.schedule(Ap,r,{subscriber:n,context:s})),o.schedule(t,e))}function Ap(t){var e=t.subscriber,r=t.context;e.closeContext(r)}function S3(t,e){return function(n){return n.lift(new E3(t,e))}}var E3=function(){function t(e,r){this.openings=e,this.closingSelector=r}return t.prototype.call=function(e,r){return r.subscribe(new M3(e,this.openings,this.closingSelector))},t}(),M3=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.closingSelector=i,s.contexts=[],s.add(cr(s,n)),s}return e.prototype._next=function(r){for(var n=this.contexts,i=n.length,s=0;s<i;s++)n[s].buffer.push(r)},e.prototype._error=function(r){for(var n=this.contexts;n.length>0;){var i=n.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,t.prototype._error.call(this,r)},e.prototype._complete=function(){for(var r=this.contexts;r.length>0;){var n=r.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(r,n){r?this.closeBuffer(r):this.openBuffer(n)},e.prototype.notifyComplete=function(r){this.closeBuffer(r.context)},e.prototype.openBuffer=function(r){try{var n=this.closingSelector,i=n.call(this,r);i&&this.trySubscribe(i)}catch(s){this._error(s)}},e.prototype.closeBuffer=function(r){var n=this.contexts;if(n&&r){var i=r.buffer,s=r.subscription;this.destination.next(i),n.splice(n.indexOf(r),1),this.remove(s),s.unsubscribe()}},e.prototype.trySubscribe=function(r){var n=this.contexts,i=[],s=new Je,o={buffer:i,subscription:s};n.push(o);var a=cr(this,r,o);!a||a.closed?this.closeBuffer(o):(a.context=o,this.add(a),s.add(a))},e}(un);function C3(t){return function(e){return e.lift(new x3(t))}}var x3=function(){function t(e){this.closingSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new I3(e,this.closingSelector))},t}(),I3=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.closingSelector=n,i.subscribing=!1,i.openBuffer(),i}return e.prototype._next=function(r){this.buffer.push(r)},e.prototype._complete=function(){var r=this.buffer;r&&this.destination.next(r),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},e.prototype.notifyNext=function(){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var r=this.closingSubscription;r&&(this.remove(r),r.unsubscribe());var n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];var i;try{var s=this.closingSelector;i=s()}catch(o){return this.error(o)}r=new Je,this.closingSubscription=r,this.add(r),this.subscribing=!0,r.add(Ye(i,new Ze(this))),this.subscribing=!1},e}(Qe);function R3(t){return function(r){var n=new A3(t),i=r.lift(n);return n.caught=i}}var A3=function(){function t(e){this.selector=e}return t.prototype.call=function(e,r){return r.subscribe(new k3(e,this.selector,this.caught))},t}(),k3=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.selector=n,s.caught=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=void 0;try{n=this.selector(r,this.caught)}catch(o){t.prototype.error.call(this,o);return}this._unsubscribeAndRecycle();var i=new Ze(this);this.add(i);var s=Ye(n,i);s!==i&&this.add(s)}},e}(Qe);function O3(t){return function(e){return e.lift(new Xc(t))}}function T3(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=null;return typeof t[t.length-1]=="function"&&(r=t.pop()),t.length===1&&yt(t[0])&&(t=t[0].slice()),function(n){return n.lift.call(lr([n].concat(t)),new Xc(r))}}function N3(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return r.lift.call(Fi.apply(void 0,[r].concat(t)))}}function kp(t,e){return tn(t,e,1)}function L3(t,e){return kp(function(){return t},e)}function P3(t){return function(e){return e.lift(new $3(t,e))}}var $3=function(){function t(e,r){this.predicate=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new D3(e,this.predicate,this.source))},t}(),D3=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.source=i,s.count=0,s.index=0,s}return e.prototype._next=function(r){this.predicate?this._tryPredicate(r):this.count++},e.prototype._tryPredicate=function(r){var n;try{n=this.predicate(r,this.index++,this.source)}catch(i){this.destination.error(i);return}n&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(B);function j3(t){return function(e){return e.lift(new F3(t))}}var F3=function(){function t(e){this.durationSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new B3(e,this.durationSelector))},t}(),B3=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.durationSelector=n,i.hasValue=!1,i}return e.prototype._next=function(r){try{var n=this.durationSelector.call(this,r);n&&this._tryNext(r,n)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(r,n){var i=this.durationSubscription;this.value=r,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),i=Ye(n,new Ze(this)),i&&!i.closed&&this.add(this.durationSubscription=i)},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var r=this.value,n=this.durationSubscription;n&&(this.durationSubscription=void 0,n.unsubscribe(),this.remove(n)),this.value=void 0,this.hasValue=!1,t.prototype._next.call(this,r)}},e}(Qe);function V3(t,e){return e===void 0&&(e=mt),function(r){return r.lift(new W3(t,e))}}var W3=function(){function t(e,r){this.dueTime=e,this.scheduler=r}return t.prototype.call=function(e,r){return r.subscribe(new H3(e,this.dueTime,this.scheduler))},t}(),H3=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.dueTime=n,s.scheduler=i,s.debouncedSubscription=null,s.lastValue=null,s.hasValue=!1,s}return e.prototype._next=function(r){this.clearDebounce(),this.lastValue=r,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(z3,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var r=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(r)}},e.prototype.clearDebounce=function(){var r=this.debouncedSubscription;r!==null&&(this.remove(r),r.unsubscribe(),this.debouncedSubscription=null)},e}(B);function z3(t){t.debouncedNext()}function cs(t){return t===void 0&&(t=null),function(e){return e.lift(new U3(t))}}var U3=function(){function t(e){this.defaultValue=e}return t.prototype.call=function(e,r){return r.subscribe(new q3(e,this.defaultValue))},t}(),q3=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.defaultValue=n,i.isEmpty=!0,i}return e.prototype._next=function(r){this.isEmpty=!1,this.destination.next(r)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(B);function Op(t){return t instanceof Date&&!isNaN(+t)}function G3(t,e){e===void 0&&(e=mt);var r=Op(t),n=r?+t-e.now():Math.abs(t);return function(i){return i.lift(new J3(n,e))}}var J3=function(){function t(e,r){this.delay=e,this.scheduler=r}return t.prototype.call=function(e,r){return r.subscribe(new Z3(e,this.delay,this.scheduler))},t}(),Z3=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.delay=n,s.scheduler=i,s.queue=[],s.active=!1,s.errored=!1,s}return e.dispatch=function(r){for(var n=r.source,i=n.queue,s=r.scheduler,o=r.destination;i.length>0&&i[0].time-s.now()<=0;)i.shift().notification.observe(o);if(i.length>0){var a=Math.max(0,i[0].time-s.now());this.schedule(r,a)}else this.unsubscribe(),n.active=!1},e.prototype._schedule=function(r){this.active=!0;var n=this.destination;n.add(r.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:r}))},e.prototype.scheduleNotification=function(r){if(this.errored!==!0){var n=this.scheduler,i=new Q3(n.now()+this.delay,r);this.queue.push(i),this.active===!1&&this._schedule(n)}},e.prototype._next=function(r){this.scheduleNotification(ar.createNext(r))},e.prototype._error=function(r){this.errored=!0,this.queue=[],this.destination.error(r),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(ar.createComplete()),this.unsubscribe()},e}(B),Q3=function(){function t(e,r){this.time=e,this.notification=r}return t}();function Y3(t,e){return e?function(r){return new X3(r,e).lift(new mh(t))}:function(r){return r.lift(new mh(t))}}var mh=function(){function t(e){this.delayDurationSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new K3(e,this.delayDurationSelector))},t}(),K3=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.delayDurationSelector=n,i.completed=!1,i.delayNotifierSubscriptions=[],i.index=0,i}return e.prototype.notifyNext=function(r,n,i,s,o){this.destination.next(r),this.removeSubscription(o),this.tryComplete()},e.prototype.notifyError=function(r,n){this._error(r)},e.prototype.notifyComplete=function(r){var n=this.removeSubscription(r);n&&this.destination.next(n),this.tryComplete()},e.prototype._next=function(r){var n=this.index++;try{var i=this.delayDurationSelector(r,n);i&&this.tryDelay(i,r)}catch(s){this.destination.error(s)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(r){r.unsubscribe();var n=this.delayNotifierSubscriptions.indexOf(r);return n!==-1&&this.delayNotifierSubscriptions.splice(n,1),r.outerValue},e.prototype.tryDelay=function(r,n){var i=cr(this,r,n);if(i&&!i.closed){var s=this.destination;s.add(i),this.delayNotifierSubscriptions.push(i)}},e.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},e}(un),X3=function(t){A(e,t);function e(r,n){var i=t.call(this)||this;return i.source=r,i.subscriptionDelay=n,i}return e.prototype._subscribe=function(r){this.subscriptionDelay.subscribe(new e4(r,this.source))},e}(Q),e4=function(t){A(e,t);function e(r,n){var i=t.call(this)||this;return i.parent=r,i.source=n,i.sourceSubscribed=!1,i}return e.prototype._next=function(r){this.subscribeToSource()},e.prototype._error=function(r){this.unsubscribe(),this.parent.error(r)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(B);function t4(){return function(e){return e.lift(new r4)}}var r4=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new n4(e))},t}(),n4=function(t){A(e,t);function e(r){return t.call(this,r)||this}return e.prototype._next=function(r){r.observe(this.destination)},e}(B);function i4(t,e){return function(r){return r.lift(new s4(t,e))}}var s4=function(){function t(e,r){this.keySelector=e,this.flushes=r}return t.prototype.call=function(e,r){return r.subscribe(new o4(e,this.keySelector,this.flushes))},t}(),o4=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.keySelector=n,s.values=new Set,i&&s.add(Ye(i,new Ze(s))),s}return e.prototype.notifyNext=function(){this.values.clear()},e.prototype.notifyError=function(r){this._error(r)},e.prototype._next=function(r){this.keySelector?this._useKeySelector(r):this._finalizeNext(r,r)},e.prototype._useKeySelector=function(r){var n,i=this.destination;try{n=this.keySelector(r)}catch(s){i.error(s);return}this._finalizeNext(n,r)},e.prototype._finalizeNext=function(r,n){var i=this.values;i.has(r)||(i.add(r),this.destination.next(n))},e}(Qe);function Tp(t,e){return function(r){return r.lift(new a4(t,e))}}var a4=function(){function t(e,r){this.compare=e,this.keySelector=r}return t.prototype.call=function(e,r){return r.subscribe(new c4(e,this.compare,this.keySelector))},t}(),c4=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.keySelector=i,s.hasKey=!1,typeof n=="function"&&(s.compare=n),s}return e.prototype.compare=function(r,n){return r===n},e.prototype._next=function(r){var n;try{var i=this.keySelector;n=i?i(r):r}catch(a){return this.destination.error(a)}var s=!1;if(this.hasKey)try{var o=this.compare;s=o(this.key,n)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=n,this.destination.next(r))},e}(B);function u4(t,e){return Tp(function(r,n){return e?e(r[t],n[t]):r[t]===n[t]})}function jo(t){return t===void 0&&(t=f4),function(e){return e.lift(new l4(t))}}var l4=function(){function t(e){this.errorFactory=e}return t.prototype.call=function(e,r){return r.subscribe(new h4(e,this.errorFactory))},t}(),h4=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.errorFactory=n,i.hasValue=!1,i}return e.prototype._next=function(r){this.hasValue=!0,this.destination.next(r)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var r=void 0;try{r=this.errorFactory()}catch(n){r=n}this.destination.error(r)},e}(B);function f4(){return new os}function pu(t){return function(e){return t===0?li():e.lift(new d4(t))}}var d4=function(){function t(e){if(this.total=e,this.total<0)throw new Qn}return t.prototype.call=function(e,r){return r.subscribe(new p4(e,this.total))},t}(),p4=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.count=0,i}return e.prototype._next=function(r){var n=this.total,i=++this.count;i<=n&&(this.destination.next(r),i===n&&(this.destination.complete(),this.unsubscribe()))},e}(B);function g4(t,e){if(t<0)throw new Qn;var r=arguments.length>=2;return function(n){return n.pipe(Er(function(i,s){return s===t}),pu(1),r?cs(e):jo(function(){return new Qn}))}}function v4(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return Fi(r,So.apply(void 0,t))}}function y4(t,e){return function(r){return r.lift(new m4(t,e,r))}}var m4=function(){function t(e,r,n){this.predicate=e,this.thisArg=r,this.source=n}return t.prototype.call=function(e,r){return r.subscribe(new b4(e,this.predicate,this.thisArg,this.source))},t}(),b4=function(t){A(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o.predicate=n,o.thisArg=i,o.source=s,o.index=0,o.thisArg=i||o,o}return e.prototype.notifyComplete=function(r){this.destination.next(r),this.destination.complete()},e.prototype._next=function(r){var n=!1;try{n=this.predicate.call(this.thisArg,r,this.index++,this.source)}catch(i){this.destination.error(i);return}n||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(B);function w4(){return function(t){return t.lift(new _4)}}var _4=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new S4(e))},t}(),S4=function(t){A(e,t);function e(r){var n=t.call(this,r)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return e.prototype._next=function(r){this.hasSubscription||(this.hasSubscription=!0,this.add(Ye(r,new Ze(this))))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(Qe);function Np(t,e){return e?function(r){return r.pipe(Np(function(n,i){return lr(t(n,i)).pipe(Lt(function(s,o){return e(n,s,i,o)}))}))}:function(r){return r.lift(new E4(t))}}var E4=function(){function t(e){this.project=e}return t.prototype.call=function(e,r){return r.subscribe(new M4(e,this.project))},t}(),M4=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.project=n,i.hasSubscription=!1,i.hasCompleted=!1,i.index=0,i}return e.prototype._next=function(r){this.hasSubscription||this.tryNext(r)},e.prototype.tryNext=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this.hasSubscription=!0,this._innerSub(n)},e.prototype._innerSub=function(r){var n=new Ze(this),i=this.destination;i.add(n);var s=Ye(r,n);s!==n&&i.add(s)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyError=function(r){this.destination.error(r)},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(Qe);function C4(t,e,r){return e===void 0&&(e=Number.POSITIVE_INFINITY),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(n){return n.lift(new x4(t,e,r))}}var x4=function(){function t(e,r,n){this.project=e,this.concurrent=r,this.scheduler=n}return t.prototype.call=function(e,r){return r.subscribe(new I4(e,this.project,this.concurrent,this.scheduler))},t}(),I4=function(t){A(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o.project=n,o.concurrent=i,o.scheduler=s,o.index=0,o.active=0,o.hasCompleted=!1,i<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return e.dispatch=function(r){var n=r.subscriber,i=r.result,s=r.value,o=r.index;n.subscribeToProjection(i,s,o)},e.prototype._next=function(r){var n=this.destination;if(n.closed){this._complete();return}var i=this.index++;if(this.active<this.concurrent){n.next(r);try{var s=this.project,o=s(r,i);if(!this.scheduler)this.subscribeToProjection(o,r,i);else{var a={subscriber:this,result:o,value:r,index:i},u=this.destination;u.add(this.scheduler.schedule(e.dispatch,0,a))}}catch(l){n.error(l)}}else this.buffer.push(r)},e.prototype.subscribeToProjection=function(r,n,i){this.active++;var s=this.destination;s.add(Ye(r,new Ze(this)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this._next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r&&r.length>0&&this._next(r.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},e}(Qe);function R4(t){return function(e){return e.lift(new A4(t))}}var A4=function(){function t(e){this.callback=e}return t.prototype.call=function(e,r){return r.subscribe(new k4(e,this.callback))},t}(),k4=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.add(new Je(n)),i}return e}(B);function O4(t,e){if(typeof t!="function")throw new TypeError("predicate is not a function");return function(r){return r.lift(new Lp(t,r,!1,e))}}var Lp=function(){function t(e,r,n,i){this.predicate=e,this.source=r,this.yieldIndex=n,this.thisArg=i}return t.prototype.call=function(e,r){return r.subscribe(new T4(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}(),T4=function(t){A(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.predicate=n,a.source=i,a.yieldIndex=s,a.thisArg=o,a.index=0,a}return e.prototype.notifyComplete=function(r){var n=this.destination;n.next(r),n.complete(),this.unsubscribe()},e.prototype._next=function(r){var n=this,i=n.predicate,s=n.thisArg,o=this.index++;try{var a=i.call(s||this,r,o,this.source);a&&this.notifyComplete(this.yieldIndex?o:r)}catch(u){this.destination.error(u)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(B);function N4(t,e){return function(r){return r.lift(new Lp(t,r,!0,e))}}function L4(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?Er(function(i,s){return t(i,s,n)}):_r,pu(1),r?cs(e):jo(function(){return new os}))}}function P4(){return function(e){return e.lift(new $4)}}var $4=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new D4(e))},t}(),D4=function(t){A(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype._next=function(r){},e}(B);function j4(){return function(t){return t.lift(new F4)}}var F4=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new B4(e))},t}(),B4=function(t){A(e,t);function e(r){return t.call(this,r)||this}return e.prototype.notifyComplete=function(r){var n=this.destination;n.next(r),n.complete()},e.prototype._next=function(r){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(B);function Hs(t){return function(r){return t===0?li():r.lift(new V4(t))}}var V4=function(){function t(e){if(this.total=e,this.total<0)throw new Qn}return t.prototype.call=function(e,r){return r.subscribe(new W4(e,this.total))},t}(),W4=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.ring=new Array,i.count=0,i}return e.prototype._next=function(r){var n=this.ring,i=this.total,s=this.count++;if(n.length<i)n.push(r);else{var o=s%i;n[o]=r}},e.prototype._complete=function(){var r=this.destination,n=this.count;if(n>0)for(var i=this.count>=this.total?this.total:this.count,s=this.ring,o=0;o<i;o++){var a=n++%i;r.next(s[a])}r.complete()},e}(B);function H4(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?Er(function(i,s){return t(i,s,n)}):_r,Hs(1),r?cs(e):jo(function(){return new os}))}}function z4(t){return function(e){return e.lift(new U4(t))}}var U4=function(){function t(e){this.value=e}return t.prototype.call=function(e,r){return r.subscribe(new q4(e,this.value))},t}(),q4=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.value=n,i}return e.prototype._next=function(r){this.destination.next(this.value)},e}(B);function G4(){return function(e){return e.lift(new J4)}}var J4=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new Z4(e))},t}(),Z4=function(t){A(e,t);function e(r){return t.call(this,r)||this}return e.prototype._next=function(r){this.destination.next(ar.createNext(r))},e.prototype._error=function(r){var n=this.destination;n.next(ar.createError(r)),n.complete()},e.prototype._complete=function(){var r=this.destination;r.next(ar.createComplete()),r.complete()},e}(B);function zs(t,e){var r=!1;return arguments.length>=2&&(r=!0),function(i){return i.lift(new Q4(t,e,r))}}var Q4=function(){function t(e,r,n){n===void 0&&(n=!1),this.accumulator=e,this.seed=r,this.hasSeed=n}return t.prototype.call=function(e,r){return r.subscribe(new Y4(e,this.accumulator,this.seed,this.hasSeed))},t}(),Y4=function(t){A(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o.accumulator=n,o._seed=i,o.hasSeed=s,o.index=0,o}return Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(r){this.hasSeed=!0,this._seed=r},enumerable:!0,configurable:!0}),e.prototype._next=function(r){if(!this.hasSeed)this.seed=r,this.destination.next(r);else return this._tryNext(r)},e.prototype._tryNext=function(r){var n=this.index++,i;try{i=this.accumulator(this.seed,r,n)}catch(s){this.destination.error(s)}this.seed=i,this.destination.next(i)},e}(B);function Fo(t,e){return arguments.length>=2?function(n){return Qa(zs(t,e),Hs(1),cs(e))(n)}:function(n){return Qa(zs(function(i,s,o){return t(i,s,o+1)}),Hs(1))(n)}}function K4(t){var e=typeof t=="function"?function(r,n){return t(r,n)>0?r:n}:function(r,n){return r>n?r:n};return Fo(e)}function X4(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return r.lift.call(ip.apply(void 0,[r].concat(t)))}}function e5(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),typeof e=="function"?tn(function(){return t},e,r):(typeof e=="number"&&(r=e),tn(function(){return t},r))}function t5(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),function(n){return n.lift(new r5(t,e,r))}}var r5=function(){function t(e,r,n){this.accumulator=e,this.seed=r,this.concurrent=n}return t.prototype.call=function(e,r){return r.subscribe(new n5(e,this.accumulator,this.seed,this.concurrent))},t}(),n5=function(t){A(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o.accumulator=n,o.acc=i,o.concurrent=s,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return e.prototype._next=function(r){if(this.active<this.concurrent){var n=this.index++,i=this.destination,s=void 0;try{var o=this.accumulator;s=o(this.acc,r,n)}catch(a){return i.error(a)}this.active++,this._innerSub(s)}else this.buffer.push(r)},e.prototype._innerSub=function(r){var n=new Ze(this),i=this.destination;i.add(n);var s=Ye(r,n);s!==n&&i.add(s)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},e.prototype.notifyNext=function(r){var n=this.destination;this.acc=r,this.hasValue=!0,n.next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r.length>0?this._next(r.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},e}(Qe);function i5(t){var e=typeof t=="function"?function(r,n){return t(r,n)<0?r:n}:function(r,n){return r<n?r:n};return Fo(e)}function rn(t,e){return function(n){var i;if(typeof t=="function"?i=t:i=function(){return t},typeof e=="function")return n.lift(new s5(i,e));var s=Object.create(n,$2);return s.source=n,s.subjectFactory=i,s}}var s5=function(){function t(e,r){this.subjectFactory=e,this.selector=r}return t.prototype.call=function(e,r){var n=this.selector,i=this.subjectFactory(),s=n(i).subscribe(e);return s.add(r.subscribe(i)),s},t}();function o5(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===1&&yt(t[0])&&(t=t[0]),function(r){return r.lift(new a5(t))}}var a5=function(){function t(e){this.nextSources=e}return t.prototype.call=function(e,r){return r.subscribe(new c5(e,this.nextSources))},t}(),c5=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.destination=r,i.nextSources=n,i}return e.prototype.notifyError=function(){this.subscribeToNextSource()},e.prototype.notifyComplete=function(){this.subscribeToNextSource()},e.prototype._error=function(r){this.subscribeToNextSource(),this.unsubscribe()},e.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},e.prototype.subscribeToNextSource=function(){var r=this.nextSources.shift();if(r){var n=new Ze(this),i=this.destination;i.add(n);var s=Ye(r,n);s!==n&&i.add(s)}else this.destination.complete()},e}(Qe);function u5(){return function(t){return t.lift(new l5)}}var l5=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new h5(e))},t}(),h5=function(t){A(e,t);function e(r){var n=t.call(this,r)||this;return n.hasPrev=!1,n}return e.prototype._next=function(r){var n;this.hasPrev?n=[this.prev,r]:this.hasPrev=!0,this.prev=r,n&&this.destination.next(n)},e}(B);function f5(t,e){return function(r){return[Er(t,e)(r),Er(op(t,e))(r)]}}function d5(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length;if(r===0)throw new Error("list of properties cannot be empty.");return function(n){return Lt(p5(t,r))(n)}}function p5(t,e){var r=function(n){for(var i=n,s=0;s<e;s++){var o=i?.[t[s]];if(o!==void 0)i=o;else return}return i};return r}function g5(t){return t?rn(function(){return new at},t):rn(new at)}function v5(t){return function(e){return rn(new Fd(t))(e)}}function y5(){return function(t){return rn(new hi)(t)}}function m5(t,e,r,n){r&&typeof r!="function"&&(n=r);var i=typeof r=="function"?r:void 0,s=new Kc(t,e,n);return function(o){return rn(function(){return s},i)(o)}}function b5(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(n){return t.length===1&&yt(t[0])&&(t=t[0]),n.lift.call(ap.apply(void 0,[n].concat(t)))}}function w5(t){return t===void 0&&(t=-1),function(e){return t===0?li():t<0?e.lift(new bh(-1,e)):e.lift(new bh(t-1,e))}}var bh=function(){function t(e,r){this.count=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new _5(e,this.count,this.source))},t}(),_5=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.count=n,s.source=i,s}return e.prototype.complete=function(){if(!this.isStopped){var r=this,n=r.source,i=r.count;if(i===0)return t.prototype.complete.call(this);i>-1&&(this.count=i-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(B);function S5(t){return function(e){return e.lift(new E5(t))}}var E5=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){return r.subscribe(new M5(e,this.notifier,r))},t}(),M5=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.notifier=n,s.source=i,s.sourceIsBeingSubscribedTo=!0,s}return e.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},e.prototype._unsubscribe=function(){var r=this,n=r.notifications,i=r.retriesSubscription;n&&(n.unsubscribe(),this.notifications=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype._unsubscribeAndRecycle=function(){var r=this._unsubscribe;return this._unsubscribe=null,t.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=r,this},e.prototype.subscribeToRetries=function(){this.notifications=new at;var r;try{var n=this.notifier;r=n(this.notifications)}catch{return t.prototype.complete.call(this)}this.retries=r,this.retriesSubscription=Ye(r,new Ze(this))},e}(Qe);function C5(t){return t===void 0&&(t=-1),function(e){return e.lift(new x5(t,e))}}var x5=function(){function t(e,r){this.count=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new I5(e,this.count,this.source))},t}(),I5=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.count=n,s.source=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=this,i=n.source,s=n.count;if(s===0)return t.prototype.error.call(this,r);s>-1&&(this.count=s-1),i.subscribe(this._unsubscribeAndRecycle())}},e}(B);function R5(t){return function(e){return e.lift(new A5(t,e))}}var A5=function(){function t(e,r){this.notifier=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new k5(e,this.notifier,this.source))},t}(),k5=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.notifier=n,s.source=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=this.errors,i=this.retries,s=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{n=new at;try{var o=this.notifier;i=o(n)}catch(a){return t.prototype.error.call(this,a)}s=Ye(i,new Ze(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=s,n.next(r)}},e.prototype._unsubscribe=function(){var r=this,n=r.errors,i=r.retriesSubscription;n&&(n.unsubscribe(),this.errors=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype.notifyNext=function(){var r=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=r,this.source.subscribe(this)},e}(Qe);function O5(t){return function(e){return e.lift(new T5(t))}}var T5=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){var n=new N5(e),i=r.subscribe(n);return i.add(Ye(this.notifier,new Ze(n))),i},t}(),N5=function(t){A(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.hasValue=!1,r}return e.prototype._next=function(r){this.value=r,this.hasValue=!0},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(Qe);function L5(t,e){return e===void 0&&(e=mt),function(r){return r.lift(new P5(t,e))}}var P5=function(){function t(e,r){this.period=e,this.scheduler=r}return t.prototype.call=function(e,r){return r.subscribe(new $5(e,this.period,this.scheduler))},t}(),$5=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.period=n,s.scheduler=i,s.hasValue=!1,s.add(i.schedule(D5,n,{subscriber:s,period:n})),s}return e.prototype._next=function(r){this.lastValue=r,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(B);function D5(t){var e=t.subscriber,r=t.period;e.notifyNext(),this.schedule(t,r)}function j5(t,e){return function(r){return r.lift(new F5(t,e))}}var F5=function(){function t(e,r){this.compareTo=e,this.comparator=r}return t.prototype.call=function(e,r){return r.subscribe(new B5(e,this.compareTo,this.comparator))},t}(),B5=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.compareTo=n,s.comparator=i,s._a=[],s._b=[],s._oneComplete=!1,s.destination.add(n.subscribe(new V5(r,s))),s}return e.prototype._next=function(r){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(r),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},e.prototype.checkValues=function(){for(var r=this,n=r._a,i=r._b,s=r.comparator;n.length>0&&i.length>0;){var o=n.shift(),a=i.shift(),u=!1;try{u=s?s(o,a):o===a}catch(l){this.destination.error(l)}u||this.emit(!1)}},e.prototype.emit=function(r){var n=this.destination;n.next(r),n.complete()},e.prototype.nextB=function(r){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(r),this.checkValues())},e.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},e}(B),V5=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.parent=n,i}return e.prototype._next=function(r){this.parent.nextB(r)},e.prototype._error=function(r){this.parent.error(r),this.unsubscribe()},e.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},e}(B);function W5(){return new at}function H5(){return function(t){return Zc()(rn(W5)(t))}}function z5(t,e,r){var n;return t&&typeof t=="object"?n=t:n={bufferSize:t,windowTime:e,refCount:!1,scheduler:r},function(i){return i.lift(U5(n))}}function U5(t){var e=t.bufferSize,r=e===void 0?Number.POSITIVE_INFINITY:e,n=t.windowTime,i=n===void 0?Number.POSITIVE_INFINITY:n,s=t.refCount,o=t.scheduler,a,u=0,l,d=!1,p=!1;return function(S){u++;var M;!a||d?(d=!1,a=new Kc(r,i,o),M=a.subscribe(this),l=S.subscribe({next:function(x){a.next(x)},error:function(x){d=!0,a.error(x)},complete:function(){p=!0,l=void 0,a.complete()}}),p&&(l=void 0)):M=a.subscribe(this),this.add(function(){u--,M.unsubscribe(),M=void 0,l&&!p&&s&&u===0&&(l.unsubscribe(),l=void 0,a=void 0)})}}function q5(t){return function(e){return e.lift(new G5(t,e))}}var G5=function(){function t(e,r){this.predicate=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new J5(e,this.predicate,this.source))},t}(),J5=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.source=i,s.seenValue=!1,s.index=0,s}return e.prototype.applySingleValue=function(r){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=r)},e.prototype._next=function(r){var n=this.index++;this.predicate?this.tryNext(r,n):this.applySingleValue(r)},e.prototype.tryNext=function(r,n){try{this.predicate(r,n,this.source)&&this.applySingleValue(r)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){var r=this.destination;this.index>0?(r.next(this.seenValue?this.singleValue:void 0),r.complete()):r.error(new os)},e}(B);function Z5(t){return function(e){return e.lift(new Q5(t))}}var Q5=function(){function t(e){this.total=e}return t.prototype.call=function(e,r){return r.subscribe(new Y5(e,this.total))},t}(),Y5=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.count=0,i}return e.prototype._next=function(r){++this.count>this.total&&this.destination.next(r)},e}(B);function K5(t){return function(e){return e.lift(new X5(t))}}var X5=function(){function t(e){if(this._skipCount=e,this._skipCount<0)throw new Qn}return t.prototype.call=function(e,r){return this._skipCount===0?r.subscribe(new B(e)):r.subscribe(new eM(e,this._skipCount))},t}(),eM=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i._skipCount=n,i._count=0,i._ring=new Array(n),i}return e.prototype._next=function(r){var n=this._skipCount,i=this._count++;if(i<n)this._ring[i]=r;else{var s=i%n,o=this._ring,a=o[s];o[s]=r,this.destination.next(a)}},e}(B);function tM(t){return function(e){return e.lift(new rM(t))}}var rM=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){return r.subscribe(new nM(e,this.notifier))},t}(),nM=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;i.hasValue=!1;var s=new Ze(i);i.add(s),i.innerSubscription=s;var o=Ye(n,s);return o!==s&&(i.add(o),i.innerSubscription=o),i}return e.prototype._next=function(r){this.hasValue&&t.prototype._next.call(this,r)},e.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(Qe);function iM(t){return function(e){return e.lift(new sM(t))}}var sM=function(){function t(e){this.predicate=e}return t.prototype.call=function(e,r){return r.subscribe(new oM(e,this.predicate))},t}(),oM=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.predicate=n,i.skipping=!0,i.index=0,i}return e.prototype._next=function(r){var n=this.destination;this.skipping&&this.tryCallPredicate(r),this.skipping||n.next(r)},e.prototype.tryCallPredicate=function(r){try{var n=this.predicate(r,this.index++);this.skipping=!!n}catch(i){this.destination.error(i)}},e}(B);function aM(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return Mt(r)?(t.pop(),function(n){return Fi(t,n,r)}):function(n){return Fi(t,n)}}var cM=function(t){A(e,t);function e(r,n,i){n===void 0&&(n=0),i===void 0&&(i=xs);var s=t.call(this)||this;return s.source=r,s.delayTime=n,s.scheduler=i,(!Yn(n)||n<0)&&(s.delayTime=0),(!i||typeof i.schedule!="function")&&(s.scheduler=xs),s}return e.create=function(r,n,i){return n===void 0&&(n=0),i===void 0&&(i=xs),new e(r,n,i)},e.dispatch=function(r){var n=r.source,i=r.subscriber;return this.add(n.subscribe(i))},e.prototype._subscribe=function(r){var n=this.delayTime,i=this.source,s=this.scheduler;return s.schedule(e.dispatch,n,{source:i,subscriber:r})},e}(Q);function uM(t,e){return e===void 0&&(e=0),function(n){return n.lift(new lM(t,e))}}var lM=function(){function t(e,r){this.scheduler=e,this.delay=r}return t.prototype.call=function(e,r){return new cM(r,this.delay,this.scheduler).subscribe(e)},t}();function Bi(t,e){return typeof e=="function"?function(r){return r.pipe(Bi(function(n,i){return lr(t(n,i)).pipe(Lt(function(s,o){return e(n,s,i,o)}))}))}:function(r){return r.lift(new hM(t))}}var hM=function(){function t(e){this.project=e}return t.prototype.call=function(e,r){return r.subscribe(new fM(e,this.project))},t}(),fM=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.project=n,i.index=0,i}return e.prototype._next=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this._innerSub(n)},e.prototype._innerSub=function(r){var n=this.innerSubscription;n&&n.unsubscribe();var i=new Ze(this),s=this.destination;s.add(i),this.innerSubscription=Ye(r,i),this.innerSubscription!==i&&s.add(this.innerSubscription)},e.prototype._complete=function(){var r=this.innerSubscription;(!r||r.closed)&&t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(r){this.destination.next(r)},e}(Qe);function dM(){return Bi(_r)}function pM(t,e){return e?Bi(function(){return t},e):Bi(function(){return t})}function gM(t){return function(e){return e.lift(new vM(t))}}var vM=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){var n=new yM(e),i=Ye(this.notifier,new Ze(n));return i&&!n.seenValue?(n.add(i),r.subscribe(n)):n},t}(),yM=function(t){A(e,t);function e(r){var n=t.call(this,r)||this;return n.seenValue=!1,n}return e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(Qe);function mM(t,e){return e===void 0&&(e=!1),function(r){return r.lift(new bM(t,e))}}var bM=function(){function t(e,r){this.predicate=e,this.inclusive=r}return t.prototype.call=function(e,r){return r.subscribe(new wM(e,this.predicate,this.inclusive))},t}(),wM=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.inclusive=i,s.index=0,s}return e.prototype._next=function(r){var n=this.destination,i;try{i=this.predicate(r,this.index++)}catch(s){n.error(s);return}this.nextOrComplete(r,i)},e.prototype.nextOrComplete=function(r,n){var i=this.destination;n?i.next(r):(this.inclusive&&i.next(r),i.complete())},e}(B);function _M(t,e,r){return function(i){return i.lift(new SM(t,e,r))}}var SM=function(){function t(e,r,n){this.nextOrObserver=e,this.error=r,this.complete=n}return t.prototype.call=function(e,r){return r.subscribe(new EM(e,this.nextOrObserver,this.error,this.complete))},t}(),EM=function(t){A(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o._tapNext=Jt,o._tapError=Jt,o._tapComplete=Jt,o._tapError=i||Jt,o._tapComplete=s||Jt,Jn(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||Jt,o._tapError=n.error||Jt,o._tapComplete=n.complete||Jt),o}return e.prototype._next=function(r){try{this._tapNext.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.next(r)},e.prototype._error=function(r){try{this._tapError.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.error(r)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(r){this.destination.error(r);return}return this.destination.complete()},e}(B),Pp={leading:!0,trailing:!1};function MM(t,e){return e===void 0&&(e=Pp),function(r){return r.lift(new CM(t,!!e.leading,!!e.trailing))}}var CM=function(){function t(e,r,n){this.durationSelector=e,this.leading=r,this.trailing=n}return t.prototype.call=function(e,r){return r.subscribe(new xM(e,this.durationSelector,this.leading,this.trailing))},t}(),xM=function(t){A(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o.destination=r,o.durationSelector=n,o._leading=i,o._trailing=s,o._hasValue=!1,o}return e.prototype._next=function(r){this._hasValue=!0,this._sendValue=r,this._throttled||(this._leading?this.send():this.throttle(r))},e.prototype.send=function(){var r=this,n=r._hasValue,i=r._sendValue;n&&(this.destination.next(i),this.throttle(i)),this._hasValue=!1,this._sendValue=void 0},e.prototype.throttle=function(r){var n=this.tryDurationSelector(r);n&&this.add(this._throttled=Ye(n,new Ze(this)))},e.prototype.tryDurationSelector=function(r){try{return this.durationSelector(r)}catch(n){return this.destination.error(n),null}},e.prototype.throttlingDone=function(){var r=this,n=r._throttled,i=r._trailing;n&&n.unsubscribe(),this._throttled=void 0,i&&this.send()},e.prototype.notifyNext=function(){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(Qe);function IM(t,e,r){return e===void 0&&(e=mt),r===void 0&&(r=Pp),function(n){return n.lift(new RM(t,e,r.leading,r.trailing))}}var RM=function(){function t(e,r,n,i){this.duration=e,this.scheduler=r,this.leading=n,this.trailing=i}return t.prototype.call=function(e,r){return r.subscribe(new AM(e,this.duration,this.scheduler,this.leading,this.trailing))},t}(),AM=function(t){A(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.duration=n,a.scheduler=i,a.leading=s,a.trailing=o,a._hasTrailingValue=!1,a._trailingValue=null,a}return e.prototype._next=function(r){this.throttled?this.trailing&&(this._trailingValue=r,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(kM,this.duration,{subscriber:this})),this.leading?this.destination.next(r):this.trailing&&(this._trailingValue=r,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var r=this.throttled;r&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),r.unsubscribe(),this.remove(r),this.throttled=null)},e}(B);function kM(t){var e=t.subscriber;e.clearThrottle()}function OM(t){return t===void 0&&(t=mt),function(e){return tu(function(){return e.pipe(zs(function(r,n){var i=r.current;return{value:n,current:t.now(),last:i}},{current:t.now(),value:void 0,last:void 0}),Lt(function(r){var n=r.current,i=r.last,s=r.value;return new TM(s,n-i)}))})}}var TM=function(){function t(e,r){this.value=e,this.interval=r}return t}();function $p(t,e,r){return r===void 0&&(r=mt),function(n){var i=Op(t),s=i?+t-r.now():Math.abs(t);return n.lift(new NM(s,i,e,r))}}var NM=function(){function t(e,r,n,i){this.waitFor=e,this.absoluteTimeout=r,this.withObservable=n,this.scheduler=i}return t.prototype.call=function(e,r){return r.subscribe(new LM(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),LM=function(t){A(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.absoluteTimeout=n,a.waitFor=i,a.withObservable=s,a.scheduler=o,a.scheduleTimeout(),a}return e.dispatchTimeout=function(r){var n=r.withObservable;r._unsubscribeAndRecycle(),r.add(Ye(n,new Ze(r)))},e.prototype.scheduleTimeout=function(){var r=this.action;r?this.action=r.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(r){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,r)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(Qe);function PM(t,e){return e===void 0&&(e=mt),$p(t,Yc(new Jd),e)}function $M(t){return t===void 0&&(t=mt),Lt(function(e){return new DM(e,t.now())})}var DM=function(){function t(e,r){this.value=e,this.timestamp=r}return t}();function jM(t,e,r){return r===0?[e]:(t.push(e),t)}function FM(){return Fo(jM,[])}function BM(t){return function(r){return r.lift(new VM(t))}}var VM=function(){function t(e){this.windowBoundaries=e}return t.prototype.call=function(e,r){var n=new WM(e),i=r.subscribe(n);return i.closed||n.add(Ye(this.windowBoundaries,new Ze(n))),i},t}(),WM=function(t){A(e,t);function e(r){var n=t.call(this,r)||this;return n.window=new at,r.next(n.window),n}return e.prototype.notifyNext=function(){this.openWindow()},e.prototype.notifyError=function(r){this._error(r)},e.prototype.notifyComplete=function(){this._complete()},e.prototype._next=function(r){this.window.next(r)},e.prototype._error=function(r){this.window.error(r),this.destination.error(r)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var r=this.window;r&&r.complete();var n=this.destination,i=this.window=new at;n.next(i)},e}(Qe);function HM(t,e){return e===void 0&&(e=0),function(n){return n.lift(new zM(t,e))}}var zM=function(){function t(e,r){this.windowSize=e,this.startWindowEvery=r}return t.prototype.call=function(e,r){return r.subscribe(new UM(e,this.windowSize,this.startWindowEvery))},t}(),UM=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.destination=r,s.windowSize=n,s.startWindowEvery=i,s.windows=[new at],s.count=0,r.next(s.windows[0]),s}return e.prototype._next=function(r){for(var n=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,i=this.destination,s=this.windowSize,o=this.windows,a=o.length,u=0;u<a&&!this.closed;u++)o[u].next(r);var l=this.count-s+1;if(l>=0&&l%n===0&&!this.closed&&o.shift().complete(),++this.count%n===0&&!this.closed){var d=new at;o.push(d),i.next(d)}},e.prototype._error=function(r){var n=this.windows;if(n)for(;n.length>0&&!this.closed;)n.shift().error(r);this.destination.error(r)},e.prototype._complete=function(){var r=this.windows;if(r)for(;r.length>0&&!this.closed;)r.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(B);function qM(t){var e=mt,r=null,n=Number.POSITIVE_INFINITY;return Mt(arguments[3])&&(e=arguments[3]),Mt(arguments[2])?e=arguments[2]:Yn(arguments[2])&&(n=Number(arguments[2])),Mt(arguments[1])?e=arguments[1]:Yn(arguments[1])&&(r=Number(arguments[1])),function(s){return s.lift(new GM(t,r,n,e))}}var GM=function(){function t(e,r,n,i){this.windowTimeSpan=e,this.windowCreationInterval=r,this.maxWindowSize=n,this.scheduler=i}return t.prototype.call=function(e,r){return r.subscribe(new ZM(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),JM=function(t){A(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._numberOfNextedValues=0,r}return e.prototype.next=function(r){this._numberOfNextedValues++,t.prototype.next.call(this,r)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(at),ZM=function(t){A(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;a.destination=r,a.windowTimeSpan=n,a.windowCreationInterval=i,a.maxWindowSize=s,a.scheduler=o,a.windows=[];var u=a.openWindow();if(i!==null&&i>=0){var l={subscriber:a,window:u,context:null},d={windowTimeSpan:n,windowCreationInterval:i,subscriber:a,scheduler:o};a.add(o.schedule(Dp,n,l)),a.add(o.schedule(YM,i,d))}else{var p={subscriber:a,window:u,windowTimeSpan:n};a.add(o.schedule(QM,n,p))}return a}return e.prototype._next=function(r){for(var n=this.windows,i=n.length,s=0;s<i;s++){var o=n[s];o.closed||(o.next(r),o.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(o))}},e.prototype._error=function(r){for(var n=this.windows;n.length>0;)n.shift().error(r);this.destination.error(r)},e.prototype._complete=function(){for(var r=this.windows;r.length>0;){var n=r.shift();n.closed||n.complete()}this.destination.complete()},e.prototype.openWindow=function(){var r=new JM;this.windows.push(r);var n=this.destination;return n.next(r),r},e.prototype.closeWindow=function(r){r.complete();var n=this.windows;n.splice(n.indexOf(r),1)},e}(B);function QM(t){var e=t.subscriber,r=t.windowTimeSpan,n=t.window;n&&e.closeWindow(n),t.window=e.openWindow(),this.schedule(t,r)}function YM(t){var e=t.windowTimeSpan,r=t.subscriber,n=t.scheduler,i=t.windowCreationInterval,s=r.openWindow(),o=this,a={action:o,subscription:null},u={subscriber:r,window:s,context:a};a.subscription=n.schedule(Dp,e,u),o.add(a.subscription),o.schedule(t,i)}function Dp(t){var e=t.subscriber,r=t.window,n=t.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),e.closeWindow(r)}function KM(t,e){return function(r){return r.lift(new XM(t,e))}}var XM=function(){function t(e,r){this.openings=e,this.closingSelector=r}return t.prototype.call=function(e,r){return r.subscribe(new eC(e,this.openings,this.closingSelector))},t}(),eC=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.openings=n,s.closingSelector=i,s.contexts=[],s.add(s.openSubscription=cr(s,n,n)),s}return e.prototype._next=function(r){var n=this.contexts;if(n)for(var i=n.length,s=0;s<i;s++)n[s].window.next(r)},e.prototype._error=function(r){var n=this.contexts;if(this.contexts=null,n)for(var i=n.length,s=-1;++s<i;){var o=n[s];o.window.error(r),o.subscription.unsubscribe()}t.prototype._error.call(this,r)},e.prototype._complete=function(){var r=this.contexts;if(this.contexts=null,r)for(var n=r.length,i=-1;++i<n;){var s=r[i];s.window.complete(),s.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var r=this.contexts;if(this.contexts=null,r)for(var n=r.length,i=-1;++i<n;){var s=r[i];s.window.unsubscribe(),s.subscription.unsubscribe()}},e.prototype.notifyNext=function(r,n,i,s,o){if(r===this.openings){var a=void 0;try{var u=this.closingSelector;a=u(n)}catch(S){return this.error(S)}var l=new at,d=new Je,p={window:l,subscription:d};this.contexts.push(p);var v=cr(this,a,p);v.closed?this.closeWindow(this.contexts.length-1):(v.context=p,d.add(v)),this.destination.next(l)}else this.closeWindow(this.contexts.indexOf(r))},e.prototype.notifyError=function(r){this.error(r)},e.prototype.notifyComplete=function(r){r!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(r.context))},e.prototype.closeWindow=function(r){if(r!==-1){var n=this.contexts,i=n[r],s=i.window,o=i.subscription;n.splice(r,1),s.complete(),o.unsubscribe()}},e}(un);function tC(t){return function(r){return r.lift(new rC(t))}}var rC=function(){function t(e){this.closingSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new nC(e,this.closingSelector))},t}(),nC=function(t){A(e,t);function e(r,n){var i=t.call(this,r)||this;return i.destination=r,i.closingSelector=n,i.openWindow(),i}return e.prototype.notifyNext=function(r,n,i,s,o){this.openWindow(o)},e.prototype.notifyError=function(r){this._error(r)},e.prototype.notifyComplete=function(r){this.openWindow(r)},e.prototype._next=function(r){this.window.next(r)},e.prototype._error=function(r){this.window.error(r),this.destination.error(r),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(r){r===void 0&&(r=null),r&&(this.remove(r),r.unsubscribe());var n=this.window;n&&n.complete();var i=this.window=new at;this.destination.next(i);var s;try{var o=this.closingSelector;s=o()}catch(a){this.destination.error(a),this.window.error(a);return}this.add(this.closingNotification=cr(this,s))},e}(un);function iC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){var n;typeof t[t.length-1]=="function"&&(n=t.pop());var i=t;return r.lift(new sC(i,n))}}var sC=function(){function t(e,r){this.observables=e,this.project=r}return t.prototype.call=function(e,r){return r.subscribe(new oC(e,this.observables,this.project))},t}(),oC=function(t){A(e,t);function e(r,n,i){var s=t.call(this,r)||this;s.observables=n,s.project=i,s.toRespond=[];var o=n.length;s.values=new Array(o);for(var a=0;a<o;a++)s.toRespond.push(a);for(var a=0;a<o;a++){var u=n[a];s.add(cr(s,u,void 0,a))}return s}return e.prototype.notifyNext=function(r,n,i){this.values[i]=n;var s=this.toRespond;if(s.length>0){var o=s.indexOf(i);o!==-1&&s.splice(o,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(r){if(this.toRespond.length===0){var n=[r].concat(this.values);this.project?this._tryProject(n):this.destination.next(n)}},e.prototype._tryProject=function(r){var n;try{n=this.project.apply(this,r)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(un);function aC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(n){return n.lift.call(up.apply(void 0,[n].concat(t)))}}function cC(t){return function(e){return e.lift(new lp(t))}}const uC=Object.freeze(Object.defineProperty({__proto__:null,audit:Rp,auditTime:u3,buffer:l3,bufferCount:d3,bufferTime:y3,bufferToggle:S3,bufferWhen:C3,catchError:R3,combineAll:O3,combineLatest:T3,concat:N3,concatAll:ep,concatMap:kp,concatMapTo:L3,count:P3,debounce:j3,debounceTime:V3,defaultIfEmpty:cs,delay:G3,delayWhen:Y3,dematerialize:t4,distinct:i4,distinctUntilChanged:Tp,distinctUntilKeyChanged:u4,elementAt:g4,endWith:v4,every:y4,exhaust:w4,exhaustMap:Np,expand:C4,filter:Er,finalize:R4,find:O4,findIndex:N4,first:L4,flatMap:kS,groupBy:j2,ignoreElements:P4,isEmpty:j4,last:H4,map:Lt,mapTo:z4,materialize:G4,max:K4,merge:X4,mergeAll:eu,mergeMap:tn,mergeMapTo:e5,mergeScan:t5,min:i5,multicast:rn,observeOn:J2,onErrorResumeNext:o5,pairwise:u5,partition:f5,pluck:d5,publish:g5,publishBehavior:v5,publishLast:y5,publishReplay:m5,race:b5,reduce:Fo,refCount:Zc,repeat:w5,repeatWhen:S5,retry:C5,retryWhen:R5,sample:O5,sampleTime:L5,scan:zs,sequenceEqual:j5,share:H5,shareReplay:z5,single:q5,skip:Z5,skipLast:K5,skipUntil:tM,skipWhile:iM,startWith:aM,subscribeOn:uM,switchAll:dM,switchMap:Bi,switchMapTo:pM,take:pu,takeLast:Hs,takeUntil:gM,takeWhile:mM,tap:_M,throttle:MM,throttleTime:IM,throwIfEmpty:jo,timeInterval:OM,timeout:PM,timeoutWith:$p,timestamp:$M,toArray:FM,window:BM,windowCount:HM,windowTime:qM,windowToggle:KM,windowWhen:tC,withLatestFrom:iC,zip:aC,zipAll:cC},Symbol.toStringTag,{value:"Module"})),gu=nn(uC);var Bo={},kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.ClientMessagePublishEvent=kt.ClientMessageSetSessionConfig=kt.ClientMessageGetSessionConfig=kt.ClientMessageIsLinked=kt.ClientMessageHostSession=void 0;function lC(t){return Object.assign({type:"HostSession"},t)}kt.ClientMessageHostSession=lC;function hC(t){return Object.assign({type:"IsLinked"},t)}kt.ClientMessageIsLinked=hC;function fC(t){return Object.assign({type:"GetSessionConfig"},t)}kt.ClientMessageGetSessionConfig=fC;function dC(t){return Object.assign({type:"SetSessionConfig"},t)}kt.ClientMessageSetSessionConfig=dC;function pC(t){return Object.assign({type:"PublishEvent"},t)}kt.ClientMessagePublishEvent=pC;var jp={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RxWebSocket=t.ConnectionState=void 0;const e=Eo,r=gu;var n;(function(s){s[s.DISCONNECTED=0]="DISCONNECTED",s[s.CONNECTING=1]="CONNECTING",s[s.CONNECTED=2]="CONNECTED"})(n=t.ConnectionState||(t.ConnectionState={}));class i{constructor(o,a=WebSocket){this.WebSocketClass=a,this.webSocket=null,this.connectionStateSubject=new e.BehaviorSubject(n.DISCONNECTED),this.incomingDataSubject=new e.Subject,this.url=o.replace(/^http/,"ws")}connect(){return this.webSocket?(0,e.throwError)(new Error("webSocket object is not null")):new e.Observable(o=>{let a;try{this.webSocket=a=new this.WebSocketClass(this.url)}catch(u){o.error(u);return}this.connectionStateSubject.next(n.CONNECTING),a.onclose=u=>{this.clearWebSocket(),o.error(new Error(`websocket error ${u.code}: ${u.reason}`)),this.connectionStateSubject.next(n.DISCONNECTED)},a.onopen=u=>{o.next(),o.complete(),this.connectionStateSubject.next(n.CONNECTED)},a.onmessage=u=>{this.incomingDataSubject.next(u.data)}}).pipe((0,r.take)(1))}disconnect(){const{webSocket:o}=this;if(o){this.clearWebSocket(),this.connectionStateSubject.next(n.DISCONNECTED);try{o.close()}catch{}}}get connectionState$(){return this.connectionStateSubject.asObservable()}get incomingData$(){return this.incomingDataSubject.asObservable()}get incomingJSONData$(){return this.incomingData$.pipe((0,r.flatMap)(o=>{let a;try{a=JSON.parse(o)}catch{return(0,e.empty)()}return(0,e.of)(a)}))}sendData(o){const{webSocket:a}=this;if(!a)throw new Error("websocket is not connected");a.send(o)}clearWebSocket(){const{webSocket:o}=this;o&&(this.webSocket=null,o.onclose=null,o.onerror=null,o.onmessage=null,o.onopen=null)}}t.RxWebSocket=i})(jp);var Vo={};Object.defineProperty(Vo,"__esModule",{value:!0});Vo.isServerMessageFail=void 0;function gC(t){return t&&t.type==="Fail"&&typeof t.id=="number"&&typeof t.sessionId=="string"&&typeof t.error=="string"}Vo.isServerMessageFail=gC;Object.defineProperty(Bo,"__esModule",{value:!0});Bo.WalletSDKConnection=void 0;const $t=Eo,X=gu,Ei=ni,In=Hi,Mi=kt,Ci=ti,Ss=jp,Ta=Vo,wh=1e4,vC=6e4;class yC{constructor(e,r,n,i,s=WebSocket){this.sessionId=e,this.sessionKey=r,this.diagnostic=i,this.subscriptions=new $t.Subscription,this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,In.IntNumber)(1),this.connectedSubject=new $t.BehaviorSubject(!1),this.linkedSubject=new $t.BehaviorSubject(!1),this.sessionConfigSubject=new $t.ReplaySubject(1);const o=new Ss.RxWebSocket(n+"/rpc",s);this.ws=o,this.subscriptions.add(o.connectionState$.pipe((0,X.tap)(a=>{var u;return(u=this.diagnostic)===null||u===void 0?void 0:u.log(Ci.EVENTS.CONNECTED_STATE_CHANGE,{state:a,sessionIdHash:Ei.Session.hash(e)})}),(0,X.skip)(1),(0,X.filter)(a=>a===Ss.ConnectionState.DISCONNECTED&&!this.destroyed),(0,X.delay)(5e3),(0,X.filter)(a=>!this.destroyed),(0,X.flatMap)(a=>o.connect()),(0,X.retry)()).subscribe()),this.subscriptions.add(o.connectionState$.pipe((0,X.skip)(2),(0,X.switchMap)(a=>(0,$t.iif)(()=>a===Ss.ConnectionState.CONNECTED,this.authenticate().pipe((0,X.tap)(u=>this.sendIsLinked()),(0,X.tap)(u=>this.sendGetSessionConfig()),(0,X.map)(u=>!0)),(0,$t.of)(!1))),(0,X.distinctUntilChanged)(),(0,X.catchError)(a=>(0,$t.of)(!1))).subscribe(a=>this.connectedSubject.next(a))),this.subscriptions.add(o.connectionState$.pipe((0,X.skip)(1),(0,X.switchMap)(a=>(0,$t.iif)(()=>a===Ss.ConnectionState.CONNECTED,(0,$t.timer)(0,wh)))).subscribe(a=>a===0?this.updateLastHeartbeat():this.heartbeat())),this.subscriptions.add(o.incomingData$.pipe((0,X.filter)(a=>a==="h")).subscribe(a=>this.updateLastHeartbeat())),this.subscriptions.add(o.incomingJSONData$.pipe((0,X.filter)(a=>["IsLinkedOK","Linked"].includes(a.type))).subscribe(a=>{var u;const l=a;(u=this.diagnostic)===null||u===void 0||u.log(Ci.EVENTS.LINKED,{sessionIdHash:Ei.Session.hash(e),linked:l.linked,type:a.type,onlineGuests:l.onlineGuests}),this.linkedSubject.next(l.linked||l.onlineGuests>0)})),this.subscriptions.add(o.incomingJSONData$.pipe((0,X.filter)(a=>["GetSessionConfigOK","SessionConfigUpdated"].includes(a.type))).subscribe(a=>{var u;const l=a;(u=this.diagnostic)===null||u===void 0||u.log(Ci.EVENTS.SESSION_CONFIG_RECEIVED,{sessionIdHash:Ei.Session.hash(e),metadata_keys:l&&l.metadata?Object.keys(l.metadata):void 0}),this.sessionConfigSubject.next({webhookId:l.webhookId,webhookUrl:l.webhookUrl,metadata:l.metadata})}))}connect(){var e;if(this.destroyed)throw new Error("instance is destroyed");(e=this.diagnostic)===null||e===void 0||e.log(Ci.EVENTS.STARTED_CONNECTING,{sessionIdHash:Ei.Session.hash(this.sessionId)}),this.ws.connect().subscribe()}destroy(){var e;this.subscriptions.unsubscribe(),this.ws.disconnect(),(e=this.diagnostic)===null||e===void 0||e.log(Ci.EVENTS.DISCONNECTED,{sessionIdHash:Ei.Session.hash(this.sessionId)}),this.destroyed=!0}get isDestroyed(){return this.destroyed}get connected$(){return this.connectedSubject.asObservable()}get onceConnected$(){return this.connected$.pipe((0,X.filter)(e=>e),(0,X.take)(1),(0,X.map)(()=>{}))}get linked$(){return this.linkedSubject.asObservable()}get onceLinked$(){return this.linked$.pipe((0,X.filter)(e=>e),(0,X.take)(1),(0,X.map)(()=>{}))}get sessionConfig$(){return this.sessionConfigSubject.asObservable()}get incomingEvent$(){return this.ws.incomingJSONData$.pipe((0,X.filter)(e=>{if(e.type!=="Event")return!1;const r=e;return typeof r.sessionId=="string"&&typeof r.eventId=="string"&&typeof r.event=="string"&&typeof r.data=="string"}),(0,X.map)(e=>e))}setSessionMetadata(e,r){const n=(0,Mi.ClientMessageSetSessionConfig)({id:(0,In.IntNumber)(this.nextReqId++),sessionId:this.sessionId,metadata:{[e]:r}});return this.onceConnected$.pipe((0,X.flatMap)(i=>this.makeRequest(n)),(0,X.map)(i=>{if((0,Ta.isServerMessageFail)(i))throw new Error(i.error||"failed to set session metadata")}))}publishEvent(e,r,n=!1){const i=(0,Mi.ClientMessagePublishEvent)({id:(0,In.IntNumber)(this.nextReqId++),sessionId:this.sessionId,event:e,data:r,callWebhook:n});return this.onceLinked$.pipe((0,X.flatMap)(s=>this.makeRequest(i)),(0,X.map)(s=>{if((0,Ta.isServerMessageFail)(s))throw new Error(s.error||"failed to publish event");return s.eventId}))}sendData(e){this.ws.sendData(JSON.stringify(e))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>wh*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}makeRequest(e,r=vC){const n=e.id;try{this.sendData(e)}catch(i){return(0,$t.throwError)(i)}return this.ws.incomingJSONData$.pipe((0,X.timeoutWith)(r,(0,$t.throwError)(new Error(`request ${n} timed out`))),(0,X.filter)(i=>i.id===n),(0,X.take)(1))}authenticate(){const e=(0,Mi.ClientMessageHostSession)({id:(0,In.IntNumber)(this.nextReqId++),sessionId:this.sessionId,sessionKey:this.sessionKey});return this.makeRequest(e).pipe((0,X.map)(r=>{if((0,Ta.isServerMessageFail)(r))throw new Error(r.error||"failed to authentcate")}))}sendIsLinked(){const e=(0,Mi.ClientMessageIsLinked)({id:(0,In.IntNumber)(this.nextReqId++),sessionId:this.sessionId});this.sendData(e)}sendGetSessionConfig(){const e=(0,Mi.ClientMessageGetSessionConfig)({id:(0,In.IntNumber)(this.nextReqId++),sessionId:this.sessionId});this.sendData(e)}}Bo.WalletSDKConnection=yC;var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.decrypt=Xn.encrypt=void 0;const Us=$;async function mC(t,e){if(e.length!==64)throw Error("secret must be 256 bits");const r=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.importKey("raw",(0,Us.hexStringToUint8Array)(e),{name:"aes-gcm"},!1,["encrypt","decrypt"]),i=new TextEncoder,s=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,i.encode(t)),o=16,a=s.slice(s.byteLength-o),u=s.slice(0,s.byteLength-o),l=new Uint8Array(a),d=new Uint8Array(u),p=new Uint8Array([...r,...l,...d]);return(0,Us.uint8ArrayToHex)(p)}Xn.encrypt=mC;function bC(t,e){if(e.length!==64)throw Error("secret must be 256 bits");return new Promise((r,n)=>{(async function(){const i=await crypto.subtle.importKey("raw",(0,Us.hexStringToUint8Array)(e),{name:"aes-gcm"},!1,["encrypt","decrypt"]),s=(0,Us.hexStringToUint8Array)(t),o=s.slice(0,12),a=s.slice(12,28),u=s.slice(28),l=new Uint8Array([...u,...a]),d={name:"AES-GCM",iv:new Uint8Array(o)};try{const p=await window.crypto.subtle.decrypt(d,i,l),v=new TextDecoder;r(v.decode(p))}catch(p){n(p)}})()})}Xn.decrypt=bC;var Wo={},Ho={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RelayMessageType=void 0,function(e){e.SESSION_ID_REQUEST="SESSION_ID_REQUEST",e.SESSION_ID_RESPONSE="SESSION_ID_RESPONSE",e.LINKED="LINKED",e.UNLINKED="UNLINKED",e.WEB3_REQUEST="WEB3_REQUEST",e.WEB3_REQUEST_CANCELED="WEB3_REQUEST_CANCELED",e.WEB3_RESPONSE="WEB3_RESPONSE"}(t.RelayMessageType||(t.RelayMessageType={}))})(Ho);Object.defineProperty(Wo,"__esModule",{value:!0});Wo.Web3RequestCanceledMessage=void 0;const wC=Ho;function _C(t){return{type:wC.RelayMessageType.WEB3_REQUEST_CANCELED,id:t}}Wo.Web3RequestCanceledMessage=_C;var zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.Web3RequestMessage=void 0;const SC=Ho;function EC(t){return Object.assign({type:SC.RelayMessageType.WEB3_REQUEST},t)}zo.Web3RequestMessage=EC;var ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.isWeb3ResponseMessage=ei.Web3ResponseMessage=void 0;const Fp=Ho;function MC(t){return Object.assign({type:Fp.RelayMessageType.WEB3_RESPONSE},t)}ei.Web3ResponseMessage=MC;function CC(t){return t&&t.type===Fp.RelayMessageType.WEB3_RESPONSE}ei.isWeb3ResponseMessage=CC;var xC=F&&F.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),IC=F&&F.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Bp=F&&F.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},RC=F&&F.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xC(e,t,r);return IC(e,t),e},AC=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($o,"__esModule",{value:!0});$o.WalletSDKRelay=void 0;const Vp=AC(Do),Vr=Eo,tt=gu,ft=ti,kC=Bo,Rn=Vi,OC=Hi,Ne=$,fr=RC(Xn),dr=ni,Es=Bt,ct=Ys,TC=Wo,NC=zo,Rt=ce,wt=ei;class Ft extends Es.WalletSDKRelayAbstract{constructor(e){var r;super(),this.accountsCallback=null,this.chainCallback=null,this.dappDefaultChainSubject=new Vr.BehaviorSubject(1),this.dappDefaultChain=1,this.appName="",this.appLogoUrl=null,this.subscriptions=new Vr.Subscription,this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage,this.options=e;const{session:n,ui:i,connection:s}=this.subscribe();if(this._session=n,this.connection=s,this.relayEventManager=e.relayEventManager,e.diagnosticLogger&&e.eventListener)throw new Error("Can't have both eventListener and diagnosticLogger options, use only diagnosticLogger");e.eventListener?this.diagnostic={log:e.eventListener.onEvent}:this.diagnostic=e.diagnosticLogger,this._reloadOnDisconnect=(r=e.reloadOnDisconnect)!==null&&r!==void 0?r:!0,this.ui=i}subscribe(){this.subscriptions.add(this.dappDefaultChainSubject.subscribe(i=>{this.dappDefaultChain!==i&&(this.dappDefaultChain=i)}));const e=dr.Session.load(this.storage)||new dr.Session(this.storage).save(),r=new kC.WalletSDKConnection(e.id,e.key,this.linkAPIUrl,this.diagnostic);this.subscriptions.add(r.sessionConfig$.subscribe({next:i=>{this.onSessionConfigChanged(i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ft.EVENTS.GENERAL_ERROR,{message:"error while invoking session config callback"})}})),this.subscriptions.add(r.incomingEvent$.pipe((0,tt.filter)(i=>i.event==="Web3Response")).subscribe({next:this.handleIncomingEvent})),this.subscriptions.add(r.linked$.pipe((0,tt.skip)(1),(0,tt.tap)(i=>{var s;this.isLinked=i;const o=this.storage.getItem(Es.LOCAL_STORAGE_ADDRESSES_KEY);if(i&&(this.session.linked=i),this.isUnlinkedErrorState=!1,o){const a=o.split(" "),u=this.storage.getItem("IsStandaloneSigning")==="true";if(a[0]!==""&&!i&&this.session.linked&&!u){this.isUnlinkedErrorState=!0;const l=this.getSessionIdHash();(s=this.diagnostic)===null||s===void 0||s.log(ft.EVENTS.UNLINKED_ERROR_STATE,{sessionIdHash:l})}}})).subscribe()),this.subscriptions.add(r.sessionConfig$.pipe((0,tt.filter)(i=>!!i.metadata&&i.metadata.__destroyed==="1")).subscribe(()=>{var i;const s=r.isDestroyed;return(i=this.diagnostic)===null||i===void 0||i.log(ft.EVENTS.METADATA_DESTROYED,{alreadyDestroyed:s,sessionIdHash:this.getSessionIdHash()}),this.resetAndReload()})),this.subscriptions.add(r.sessionConfig$.pipe((0,tt.filter)(i=>i.metadata&&i.metadata.WalletUsername!==void 0)).pipe((0,tt.mergeMap)(i=>fr.decrypt(i.metadata.WalletUsername,e.secret))).subscribe({next:i=>{this.storage.setItem(Es.WALLET_USER_NAME_KEY,i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ft.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"username"})}})),this.subscriptions.add(r.sessionConfig$.pipe((0,tt.filter)(i=>i.metadata&&i.metadata.AppVersion!==void 0)).pipe((0,tt.mergeMap)(i=>fr.decrypt(i.metadata.AppVersion,e.secret))).subscribe({next:i=>{this.storage.setItem(Es.APP_VERSION_KEY,i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ft.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"appversion"})}})),this.subscriptions.add(r.sessionConfig$.pipe((0,tt.filter)(i=>i.metadata&&i.metadata.ChainId!==void 0&&i.metadata.JsonRpcUrl!==void 0)).pipe((0,tt.mergeMap)(i=>(0,Vr.zip)(fr.decrypt(i.metadata.ChainId,e.secret),fr.decrypt(i.metadata.JsonRpcUrl,e.secret)))).pipe((0,tt.distinctUntilChanged)()).subscribe({next:([i,s])=>{this.chainCallback&&this.chainCallback(i,s)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ft.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"chainId|jsonRpcUrl"})}})),this.subscriptions.add(r.sessionConfig$.pipe((0,tt.filter)(i=>i.metadata&&i.metadata.EthereumAddress!==void 0)).pipe((0,tt.mergeMap)(i=>fr.decrypt(i.metadata.EthereumAddress,e.secret))).subscribe({next:i=>{this.accountsCallback&&this.accountsCallback([i]),Ft.accountRequestCallbackIds.size>0&&(Array.from(Ft.accountRequestCallbackIds.values()).forEach(s=>{const o=(0,wt.Web3ResponseMessage)({id:s,response:(0,Rt.RequestEthereumAccountsResponse)([i])});this.invokeCallback(Object.assign(Object.assign({},o),{id:s}))}),Ft.accountRequestCallbackIds.clear())},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ft.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"selectedAddress"})}})),this.subscriptions.add(r.sessionConfig$.pipe((0,tt.filter)(i=>i.metadata&&i.metadata.AppSrc!==void 0)).pipe((0,tt.mergeMap)(i=>fr.decrypt(i.metadata.AppSrc,e.secret))).subscribe({next:i=>{this.ui.setAppSrc(i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ft.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"appSrc"})}}));const n=this.options.uiConstructor({linkAPIUrl:this.options.linkAPIUrl,version:this.options.version,darkMode:this.options.darkMode,session:e,connected$:r.connected$,chainId$:this.dappDefaultChainSubject});return r.connect(),{session:e,ui:n,connection:r}}attachUI(){this.ui.attach()}resetAndReload(){this.connection.setSessionMetadata("__destroyed","1").pipe((0,tt.timeout)(1e3),(0,tt.catchError)(e=>(0,Vr.of)(null))).subscribe(e=>{var r,n,i;const s=this.ui.isStandalone();try{this.subscriptions.unsubscribe()}catch{(r=this.diagnostic)===null||r===void 0||r.log(ft.EVENTS.GENERAL_ERROR,{message:"Had error unsubscribing"})}(n=this.diagnostic)===null||n===void 0||n.log(ft.EVENTS.SESSION_STATE_CHANGE,{method:"relay::resetAndReload",sessionMetadataChange:"__destroyed, 1",sessionIdHash:this.getSessionIdHash()}),this.connection.destroy();const o=dr.Session.load(this.storage);if(o?.id===this._session.id?this.storage.clear():o&&((i=this.diagnostic)===null||i===void 0||i.log(ft.EVENTS.SKIPPED_CLEARING_SESSION,{sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:dr.Session.hash(o.id)})),this._reloadOnDisconnect){this.ui.reloadUI();return}this.accountsCallback&&this.accountsCallback([],!0),this.subscriptions=new Vr.Subscription;const{session:a,ui:u,connection:l}=this.subscribe();this._session=a,this.connection=l,this.ui=u,s&&this.ui.setStandalone&&this.ui.setStandalone(!0),this.attachUI()},e=>{var r;(r=this.diagnostic)===null||r===void 0||r.log(ft.EVENTS.FAILURE,{method:"relay::resetAndReload",message:`failed to reset and reload with ${e}`,sessionIdHash:this.getSessionIdHash()})})}setAppInfo(e,r){this.appName=e,this.appLogoUrl=r}getStorageItem(e){return this.storage.getItem(e)}get session(){return this._session}setStorageItem(e,r){this.storage.setItem(e,r)}signEthereumMessage(e,r,n,i){return this.sendRequest({method:ct.Web3Method.signEthereumMessage,params:{message:(0,Ne.hexStringFromBuffer)(e,!0),address:r,addPrefix:n,typedDataJson:i||null}})}ethereumAddressFromSignedMessage(e,r,n){return this.sendRequest({method:ct.Web3Method.ethereumAddressFromSignedMessage,params:{message:(0,Ne.hexStringFromBuffer)(e,!0),signature:(0,Ne.hexStringFromBuffer)(r,!0),addPrefix:n}})}signEthereumTransaction(e){return this.sendRequest({method:ct.Web3Method.signEthereumTransaction,params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,Ne.bigIntStringFromBN)(e.weiValue),data:(0,Ne.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,Ne.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?(0,Ne.bigIntStringFromBN)(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?(0,Ne.bigIntStringFromBN)(e.gasPriceInWei):null,gasLimit:e.gasLimit?(0,Ne.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:ct.Web3Method.signEthereumTransaction,params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,Ne.bigIntStringFromBN)(e.weiValue),data:(0,Ne.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,Ne.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?(0,Ne.bigIntStringFromBN)(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?(0,Ne.bigIntStringFromBN)(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?(0,Ne.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,r){return this.sendRequest({method:ct.Web3Method.submitEthereumTransaction,params:{signedTransaction:(0,Ne.hexStringFromBuffer)(e,!0),chainId:r}})}scanQRCode(e){return this.sendRequest({method:ct.Web3Method.scanQRCode,params:{regExp:e}})}getQRCodeUrl(){return(0,Ne.createQrUrl)(this._session.id,this._session.secret,this.linkAPIUrl,!1,this.options.version,this.dappDefaultChain)}genericRequest(e,r){return this.sendRequest({method:ct.Web3Method.generic,params:{action:r,data:e}})}sendGenericMessage(e){return this.sendRequest(e)}sendRequest(e){let r=null;const n=(0,Ne.randomBytesHex)(8),i=o=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,e.method,o),r?.()};return{promise:new Promise((o,a)=>{this.ui.isStandalone()||(r=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:i,onResetConnection:this.resetAndReload})),this.relayEventManager.callbacks.set(n,u=>{if(r?.(),u.errorMessage)return a(new Error(u.errorMessage));o(u)}),this.ui.isStandalone()?this.sendRequestStandalone(n,e):this.publishWeb3RequestEvent(n,e)}),cancel:i}}setConnectDisabled(e){this.ui.setConnectDisabled(e)}setAccountsCallback(e){this.accountsCallback=e}setChainCallback(e){this.chainCallback=e}setDappDefaultChainCallback(e){this.dappDefaultChainSubject.next(e)}publishWeb3RequestEvent(e,r){var n;const i=(0,NC.Web3RequestMessage)({id:e,request:r}),s=dr.Session.load(this.storage);(n=this.diagnostic)===null||n===void 0||n.log(ft.EVENTS.WEB3_REQUEST,{eventId:i.id,method:`relay::${i.request.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:s?dr.Session.hash(s.id):"",isSessionMismatched:(s?.id!==this._session.id).toString()}),this.subscriptions.add(this.publishEvent("Web3Request",i,!0).subscribe({next:o=>{var a;(a=this.diagnostic)===null||a===void 0||a.log(ft.EVENTS.WEB3_REQUEST_PUBLISHED,{eventId:i.id,method:`relay::${i.request.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:s?dr.Session.hash(s.id):"",isSessionMismatched:(s?.id!==this._session.id).toString()})},error:o=>{this.handleWeb3ResponseMessage((0,wt.Web3ResponseMessage)({id:i.id,response:{method:i.request.method,errorMessage:o.message}}))}}))}publishWeb3RequestCanceledEvent(e){const r=(0,TC.Web3RequestCanceledMessage)(e);this.subscriptions.add(this.publishEvent("Web3RequestCanceled",r,!1).subscribe())}publishEvent(e,r,n){const i=this.session.secret;return new Vr.Observable(s=>{fr.encrypt(JSON.stringify(Object.assign(Object.assign({},r),{origin:location.origin})),i).then(o=>{s.next(o),s.complete()})}).pipe((0,tt.mergeMap)(s=>this.connection.publishEvent(e,s,n)))}handleIncomingEvent(e){try{this.subscriptions.add((0,Vr.from)(fr.decrypt(e.data,this.session.secret)).pipe((0,tt.map)(r=>JSON.parse(r))).subscribe({next:r=>{const n=(0,wt.isWeb3ResponseMessage)(r)?r:null;n&&this.handleWeb3ResponseMessage(n)},error:()=>{var r;(r=this.diagnostic)===null||r===void 0||r.log(ft.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"incomingEvent"})}}))}catch{return}}handleWeb3ResponseMessage(e){var r;const{response:n}=e;if((r=this.diagnostic)===null||r===void 0||r.log(ft.EVENTS.WEB3_RESPONSE,{eventId:e.id,method:`relay::${n.method}`,sessionIdHash:this.getSessionIdHash()}),(0,Rt.isRequestEthereumAccountsResponse)(n)){Ft.accountRequestCallbackIds.forEach(i=>this.invokeCallback(Object.assign(Object.assign({},e),{id:i}))),Ft.accountRequestCallbackIds.clear();return}this.invokeCallback(e)}handleErrorResponse(e,r,n,i){var s;const o=(s=n?.message)!==null&&s!==void 0?s:(0,Rn.standardErrorMessage)(i);this.handleWeb3ResponseMessage((0,wt.Web3ResponseMessage)({id:e,response:{method:r,errorMessage:o,errorCode:i}}))}invokeCallback(e){const r=this.relayEventManager.callbacks.get(e.id);r&&(r(e.response),this.relayEventManager.callbacks.delete(e.id))}requestEthereumAccounts(){const e={method:ct.Web3Method.requestEthereumAccounts,params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},r=(0,Ne.randomBytesHex)(8),n=s=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,e.method,s)};return{promise:new Promise((s,o)=>{var a;this.relayEventManager.callbacks.set(r,l=>{if(this.ui.hideRequestEthereumAccounts(),l.errorMessage)return o(new Error(l.errorMessage));s(l)});const u=((a=window?.navigator)===null||a===void 0?void 0:a.userAgent)||null;if(u&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(u)){let l;try{(0,Ne.isInIFrame)()&&window.top?l=window.top.location:l=window.location}catch{l=window.location}l.href=`https://www.coinbase.com/connect-dapp?uri=${encodeURIComponent(l.href)}`;return}if(this.ui.inlineAccountsResponse()){const l=d=>{this.handleWeb3ResponseMessage((0,wt.Web3ResponseMessage)({id:r,response:(0,Rt.RequestEthereumAccountsResponse)(d)}))};this.ui.requestEthereumAccounts({onCancel:n,onAccounts:l})}else{const l=Rn.standardErrors.provider.userRejectedRequest("User denied account authorization");this.ui.requestEthereumAccounts({onCancel:()=>n(l)})}Ft.accountRequestCallbackIds.add(r),!this.ui.inlineAccountsResponse()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(r,e)}),cancel:n}}selectProvider(e){const r={method:ct.Web3Method.selectProvider,params:{providerOptions:e}},n=(0,Ne.randomBytesHex)(8),i=o=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,r.method,o)},s=new Promise((o,a)=>{this.relayEventManager.callbacks.set(n,d=>{if(d.errorMessage)return a(new Error(d.errorMessage));o(d)});const u=d=>{this.handleWeb3ResponseMessage((0,wt.Web3ResponseMessage)({id:n,response:(0,Rt.SelectProviderResponse)(OC.ProviderType.Unselected)}))},l=d=>{this.handleWeb3ResponseMessage((0,wt.Web3ResponseMessage)({id:n,response:(0,Rt.SelectProviderResponse)(d)}))};this.ui.selectProvider&&this.ui.selectProvider({onApprove:l,onCancel:u,providerOptions:e})});return{cancel:i,promise:s}}watchAsset(e,r,n,i,s,o){const a={method:ct.Web3Method.watchAsset,params:{type:e,options:{address:r,symbol:n,decimals:i,image:s},chainId:o}};let u=null;const l=(0,Ne.randomBytesHex)(8),d=v=>{this.publishWeb3RequestCanceledEvent(l),this.handleErrorResponse(l,a.method,v),u?.()};this.ui.inlineWatchAsset()||(u=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:d,onResetConnection:this.resetAndReload}));const p=new Promise((v,S)=>{this.relayEventManager.callbacks.set(l,O=>{if(u?.(),O.errorMessage)return S(new Error(O.errorMessage));v(O)});const M=O=>{this.handleWeb3ResponseMessage((0,wt.Web3ResponseMessage)({id:l,response:(0,Rt.WatchAssetReponse)(!1)}))},x=()=>{this.handleWeb3ResponseMessage((0,wt.Web3ResponseMessage)({id:l,response:(0,Rt.WatchAssetReponse)(!0)}))};this.ui.inlineWatchAsset()&&this.ui.watchAsset({onApprove:x,onCancel:M,type:e,address:r,symbol:n,decimals:i,image:s,chainId:o}),!this.ui.inlineWatchAsset()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(l,a)});return{cancel:d,promise:p}}addEthereumChain(e,r,n,i,s,o){const a={method:ct.Web3Method.addEthereumChain,params:{chainId:e,rpcUrls:r,blockExplorerUrls:i,chainName:s,iconUrls:n,nativeCurrency:o}};let u=null;const l=(0,Ne.randomBytesHex)(8),d=v=>{this.publishWeb3RequestCanceledEvent(l),this.handleErrorResponse(l,a.method,v),u?.()};return this.ui.inlineAddEthereumChain(e)||(u=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:d,onResetConnection:this.resetAndReload})),{promise:new Promise((v,S)=>{this.relayEventManager.callbacks.set(l,O=>{if(u?.(),O.errorMessage)return S(new Error(O.errorMessage));v(O)});const M=O=>{this.handleWeb3ResponseMessage((0,wt.Web3ResponseMessage)({id:l,response:(0,Rt.AddEthereumChainResponse)({isApproved:!1,rpcUrl:""})}))},x=O=>{this.handleWeb3ResponseMessage((0,wt.Web3ResponseMessage)({id:l,response:(0,Rt.AddEthereumChainResponse)({isApproved:!0,rpcUrl:O})}))};this.ui.inlineAddEthereumChain(e)&&this.ui.addEthereumChain({onCancel:M,onApprove:x,chainId:a.params.chainId,rpcUrls:a.params.rpcUrls,blockExplorerUrls:a.params.blockExplorerUrls,chainName:a.params.chainName,iconUrls:a.params.iconUrls,nativeCurrency:a.params.nativeCurrency}),!this.ui.inlineAddEthereumChain(e)&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(l,a)}),cancel:d}}switchEthereumChain(e,r){const n={method:ct.Web3Method.switchEthereumChain,params:Object.assign({chainId:e},{address:r})},i=(0,Ne.randomBytesHex)(8),s=a=>{this.publishWeb3RequestCanceledEvent(i),this.handleErrorResponse(i,n.method,a)};return{promise:new Promise((a,u)=>{this.relayEventManager.callbacks.set(i,p=>{if((0,Rt.isErrorResponse)(p)&&p.errorCode)return u(Rn.standardErrors.provider.custom({code:p.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if(p.errorMessage)return u(new Error(p.errorMessage));a(p)});const l=p=>{var v;if(p){const S=(v=(0,Rn.getErrorCode)(p))!==null&&v!==void 0?v:Rn.standardErrorCodes.provider.unsupportedChain;this.handleErrorResponse(i,ct.Web3Method.switchEthereumChain,p instanceof Error?p:Rn.standardErrors.provider.unsupportedChain(e),S)}else this.handleWeb3ResponseMessage((0,wt.Web3ResponseMessage)({id:i,response:(0,Rt.SwitchEthereumChainResponse)({isApproved:!1,rpcUrl:""})}))},d=p=>{this.handleWeb3ResponseMessage((0,wt.Web3ResponseMessage)({id:i,response:(0,Rt.SwitchEthereumChainResponse)({isApproved:!0,rpcUrl:p})}))};this.ui.switchEthereumChain({onCancel:l,onApprove:d,chainId:n.params.chainId,address:n.params.address}),!this.ui.inlineSwitchEthereumChain()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(i,n)}),cancel:s}}inlineAddEthereumChain(e){return this.ui.inlineAddEthereumChain(e)}getSessionIdHash(){return dr.Session.hash(this._session.id)}sendRequestStandalone(e,r){const n=s=>{this.handleErrorResponse(e,r.method,s)},i=s=>{this.handleWeb3ResponseMessage((0,wt.Web3ResponseMessage)({id:e,response:s}))};switch(r.method){case ct.Web3Method.signEthereumMessage:this.ui.signEthereumMessage({request:r,onSuccess:i,onCancel:n});break;case ct.Web3Method.signEthereumTransaction:this.ui.signEthereumTransaction({request:r,onSuccess:i,onCancel:n});break;case ct.Web3Method.submitEthereumTransaction:this.ui.submitEthereumTransaction({request:r,onSuccess:i,onCancel:n});break;case ct.Web3Method.ethereumAddressFromSignedMessage:this.ui.ethereumAddressFromSignedMessage({request:r,onSuccess:i});break;default:n();break}}onSessionConfigChanged(e){}}Ft.accountRequestCallbackIds=new Set;Bp([Vp.default],Ft.prototype,"resetAndReload",null);Bp([Vp.default],Ft.prototype,"handleIncomingEvent",null);$o.WalletSDKRelay=Ft;var Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.WalletSDKRelayEventManager=void 0;const LC=$;class PC{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const e=this._nextRequestId,r=(0,LC.prepend0x)(e.toString(16));return this.callbacks.get(r)&&this.callbacks.delete(r),e}}Uo.WalletSDKRelayEventManager=PC;Object.defineProperty(Li,"__esModule",{value:!0});Li.CoinbaseWalletSDK=void 0;const $C=qs,DC=Gs,jC=Js,FC=Bn,BC=bo,VC=$o,WC=Uo,HC=$,Wp=ri;class qo{constructor(e){var r,n,i;this._appName="",this._appLogoUrl=null,this._relay=null,this._relayEventManager=null;const s=e.linkAPIUrl||DC.LINK_API_URL;let o;if(e.uiConstructor?o=e.uiConstructor:o=l=>new BC.WalletSDKUI(l),typeof e.overrideIsMetaMask>"u"?this._overrideIsMetaMask=!1:this._overrideIsMetaMask=e.overrideIsMetaMask,this._overrideIsCoinbaseWallet=(r=e.overrideIsCoinbaseWallet)!==null&&r!==void 0?r:!0,this._overrideIsCoinbaseBrowser=(n=e.overrideIsCoinbaseBrowser)!==null&&n!==void 0?n:!1,e.diagnosticLogger&&e.eventListener)throw new Error("Can't have both eventListener and diagnosticLogger options, use only diagnosticLogger");e.eventListener?this._diagnosticLogger={log:e.eventListener.onEvent}:this._diagnosticLogger=e.diagnosticLogger,this._reloadOnDisconnect=(i=e.reloadOnDisconnect)!==null&&i!==void 0?i:!0;const a=new URL(s),u=`${a.protocol}//${a.host}`;this._storage=new jC.ScopedLocalStorage(`-walletlink:${u}`),this._storage.setItem("version",qo.VERSION),!(this.walletExtension||this.coinbaseBrowser)&&(this._relayEventManager=new WC.WalletSDKRelayEventManager,this._relay=new VC.WalletSDKRelay({linkAPIUrl:s,version:Wp.LIB_VERSION,darkMode:!!e.darkMode,uiConstructor:o,storage:this._storage,relayEventManager:this._relayEventManager,diagnosticLogger:this._diagnosticLogger,reloadOnDisconnect:this._reloadOnDisconnect}),this.setAppInfo(e.appName,e.appLogoUrl),!e.headlessMode&&this._relay.attachUI())}makeWeb3Provider(e="",r=1){const n=this.walletExtension;if(n)return this.isCipherProvider(n)||n.setProviderInfo(e,r),this._reloadOnDisconnect===!1&&typeof n.disableReloadOnDisconnect=="function"&&n.disableReloadOnDisconnect(),n;const i=this.coinbaseBrowser;if(i)return i;const s=this._relay;if(!s||!this._relayEventManager||!this._storage)throw new Error("Relay not initialized, should never happen");return e||s.setConnectDisabled(!0),new FC.CoinbaseWalletProvider({relayProvider:()=>Promise.resolve(s),relayEventManager:this._relayEventManager,storage:this._storage,jsonRpcUrl:e,chainId:r,qrUrl:this.getQrUrl(),diagnosticLogger:this._diagnosticLogger,overrideIsMetaMask:this._overrideIsMetaMask,overrideIsCoinbaseWallet:this._overrideIsCoinbaseWallet,overrideIsCoinbaseBrowser:this._overrideIsCoinbaseBrowser})}setAppInfo(e,r){var n;this._appName=e||"DApp",this._appLogoUrl=r||(0,HC.getFavicon)();const i=this.walletExtension;i?this.isCipherProvider(i)||i.setAppInfo(this._appName,this._appLogoUrl):(n=this._relay)===null||n===void 0||n.setAppInfo(this._appName,this._appLogoUrl)}disconnect(){var e;const r=this.walletExtension;r?r.close():(e=this._relay)===null||e===void 0||e.resetAndReload()}getQrUrl(){var e,r;return(r=(e=this._relay)===null||e===void 0?void 0:e.getQRCodeUrl())!==null&&r!==void 0?r:null}getCoinbaseWalletLogo(e,r=240){return(0,$C.walletLogo)(e,r)}get walletExtension(){var e;return(e=window.coinbaseWalletExtension)!==null&&e!==void 0?e:window.walletLinkExtension}get coinbaseBrowser(){var e,r;try{const n=(e=window.ethereum)!==null&&e!==void 0?e:(r=window.top)===null||r===void 0?void 0:r.ethereum;return n&&"isCoinbaseBrowser"in n&&n.isCoinbaseBrowser?n:void 0}catch{return}}isCipherProvider(e){return typeof e.isCipher=="boolean"&&e.isCipher}}Li.CoinbaseWalletSDK=qo;qo.VERSION=Wp.LIB_VERSION;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CoinbaseWalletProvider=t.CoinbaseWalletSDK=void 0;const e=Li,r=Bn;var n=Li;Object.defineProperty(t,"CoinbaseWalletSDK",{enumerable:!0,get:function(){return n.CoinbaseWalletSDK}});var i=Bn;Object.defineProperty(t,"CoinbaseWalletProvider",{enumerable:!0,get:function(){return i.CoinbaseWalletProvider}}),t.default=e.CoinbaseWalletSDK,typeof window<"u"&&(window.CoinbaseWalletSDK=e.CoinbaseWalletSDK,window.CoinbaseWalletProvider=r.CoinbaseWalletProvider,window.WalletLink=e.CoinbaseWalletSDK,window.WalletLinkProvider=r.CoinbaseWalletProvider)})(ic);const zC=Up(ic),XC=qp({__proto__:null,default:zC},[ic]);export{XC as i};
